-- MySQL dump 10.13  Distrib 8.0.33, for Linux (x86_64)
--
-- Host: 192.168.1.4    Database: pmo
-- ------------------------------------------------------
-- Server version	5.5.5-10.11.3-MariaDB-1:10.11.3+maria~ubu2204

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `tblratracking`
--

DROP TABLE IF EXISTS `tblratracking`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tblratracking` (
  `raID` int(10) NOT NULL,
  `raTitle` longtext DEFAULT NULL,
  `raProduct` varchar(50) DEFAULT NULL,
  `raInstallVer` varchar(50) DEFAULT NULL,
  `raDesignate` varchar(50) DEFAULT NULL,
  `raIssueType` varchar(50) DEFAULT NULL,
  `raFixtype` varchar(50) DEFAULT NULL,
  `raEnvImpact` varchar(50) DEFAULT NULL,
  `raOutage` tinyint(1) NOT NULL,
  `raStatus` varchar(50) DEFAULT NULL,
  `raIssueDate` datetime DEFAULT NULL,
  `raDocLink` longtext DEFAULT NULL,
  `raMemo` longtext DEFAULT NULL,
  `raSLGnum` varchar(50) DEFAULT NULL,
  `raFixFlag` varchar(50) DEFAULT NULL,
  `raDLG` varchar(50) DEFAULT NULL,
  `raKPowner` varchar(50) DEFAULT NULL,
  `raCustomer` varchar(50) DEFAULT NULL,
  `raEpicCode` longtext DEFAULT NULL,
  `raCodeReviewer` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`raID`),
  KEY `raEpicCode` (`raEpicCode`(45)),
  KEY `raFixID` (`raFixFlag`),
  KEY `raID` (`raID`),
  KEY `SLGIDnum` (`raSLGnum`),
  KEY `tblEmployeetblRATracking` (`raKPowner`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tblratracking`
--

LOCK TABLES `tblratracking` WRITE;
/*!40000 ALTER TABLE `tblratracking` DISABLE KEYS */;
INSERT INTO `tblratracking` VALUES (509,'509 - SYSTEM CONFIGURATION TO ENABLE THE USE OF TRANSCRIPTION SOFT-DELETION UTILITIES','EDI',NULL,'LOEWENSTEIN, DANIEL            ','Other','Not Applicable','Server Only',0,'Complete','2008-03-20 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\509_20080320 - NCAL EDI Transcriptions - Global setup to enable transcription utilities.doc#',NULL,'263518',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(565,'0501-NCAL-Spr07SLG384550','EDI',NULL,'Greg Faber','Other','Enhancement','Server Only',0,'Open','2008-09-11 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0501-NCAL-Spr07SLG384550.doc#',NULL,'384550',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(573,'573_20090209 – 898601 – Store replaced medication order id to 7088 for RU-RO messages','EDI',NULL,'LOEWENSTEIN, DANIEL            ',' ','Enhancement','Server Only',0,'Open','2009-02-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\573_20090209 – 898601 – Store replaced medication order id to 7088 for RU-RO messages.doc#',NULL,'311801',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(959,'KPNCAL -  Sync COPAY Override Reason Code (EPT 5791) and Refund Reason Code (TAR-7510) Require Comment Flag',NULL,NULL,'Ryan Gonzalez',NULL,NULL,'Server',0,'Closed','2007-09-27 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 959Release Auth_ - KPNCAL -  Sync Requre Comment Flag.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1118,'Kp - mark patient records for re-extract','CLARITY',NULL,'VAZZANA, MATT            ',' ','Fix','Server Only',0,'Open','2008-01-03 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1118- DII69-Patient Reextracts.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION',NULL,NULL),(1147,'KPNCAL - Close all historical ancillary and old orders only encounters','EPICCARE',NULL,'SMITH, JACKIE            ','Performance',NULL,'Other',0,'Open','2007-05-01 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\KP NCAL - Close encounter clean up.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1195,'Chronic Dz Clean up','Ambulatory',NULL,NULL,NULL,NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1195 20070618 - KP NCAL - Run Chronic Diagnosis Cleanup in RENC.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1196,'Kp ncal or add laterality to orp records','OPTIME',NULL,'BRUVOLD, RYAN            ',' ',NULL,' ',0,'Open','2007-06-22 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1196 Kp ncal or add laterality to orp records.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1197,'Insert missing ORD 226 (PATIENT CSN) entries in 6 records','Clarity',NULL,'Jon Hong',NULL,NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\1197 - Insert Missing ORD 226 entries.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1222,'Remove Inadvertent MH Patient instructions','EPICCARE',NULL,'HONG, JON            ','Other',NULL,' ',0,'Cancelled','2007-07-12 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1222 0712 Remove Inadvertent MH Pat.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1223,'Trickle messages back onto the trigger and filer that were saved off','Ambulatory',NULL,'WINTER, NATHANIEL',NULL,NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1223 Move messages back onto the queue.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1227,'20070723 - KP NCAL - Run Cleanup for MDL Cleanup Utility','Ambulatory',NULL,'Drew Davey',NULL,NULL,NULL,0,'Closed','2007-07-23 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1227 20070723 - KP NCAL - Run Cleanup for MDL Cleanup Utility.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1232,'Clear LVN section replacement flag - Emergency','EpicCare',NULL,NULL,NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1233,'Acct System Stabilization Utilities','Hospital Billing','Spring \'06','Matt Begliner',NULL,NULL,NULL,0,'Closed','2007-08-10 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1233 - DNB Acct System Stabilization Utilities.doc',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1234,'Create block utilization batch job','Optime',NULL,NULL,NULL,NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA1234 20070813-KP NCAL-Build Utilization Job.doc',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1236,'KPHC NCAL PROD - Config for ad hoc 0720-AP-CR2194-E743955-Spr06Sep10NS.tar.Z -OR Utilization reporting','Identity',NULL,NULL,NULL,NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20070822 - KP NCAL RA 1236- Correct MRN Blocks on South Bay.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1238,'Complete Old Merges','Identity',NULL,NULL,NULL,NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20070822 - KP NCAL RA1238 - Complete Old Merges.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1239,'Hibernate Epic Owned Account Types','Resolute',NULL,NULL,NULL,NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1239 - 20070822 - Hibernate Epic Owned Account Types.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1240,'Allergy Clean up','Ambulatory',NULL,'Drew Davey','Other',NULL,'Server',0,'Closed','2007-08-23 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20070823 - KP NCAL RA 1240- Run Allergy Cleanup in PROD.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1241,'clean up old dfi record: rodgerson','HIMS',NULL,NULL,NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1242,'Process stranded L nodes at NCAL','Chart Sync',NULL,'Margaret Lin',NULL,NULL,NULL,0,'Open',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1242 Process stranded L nodes at NCAL.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1243,'Re-extract Order Records','Clarity',NULL,'Steve Ludwig',NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1246,'re-extract data for ptenc_cpy_except','Clarity',NULL,'Steve Ludwig',NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1252,'DST Fix','InterConnect',NULL,'Stephanie Bonifacio','Fix',NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\NCAL Fix For DST Issue - RA 1252.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1253,'ORD2065 Cleanup','EpicCare',NULL,'Drew Davey',NULL,NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1253 20070920 - KP NCAL - ORD 2065 Cleanup in PSUP.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1254,'Correct ORD item 630 - instantiated orders count','Care Everywhere',NULL,'Aaron Greenblatt',NULL,NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1254 Correct ORD item 630 - instantiated orders count.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1255,'PB/ set configurable fields for open item statement','RESOLUTE',NULL,'BELLAM, SIRISHA            ','Other',NULL,'Other',0,'Open','2007-09-25 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1255 PB new statement config.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1256,'Cleanup EPT24360 related to Amb Med Orders','Chart Sync',NULL,'Kristie Rerimer','Fix',NULL,'Client',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1256 - 20070925 - KP NCAL Clean-up ED Chart Sync Item .doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1258,'Unresolve conflict 20062318','Chart Sync',NULL,'Aaron Greenblatt','Other',NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1258_Unresolve conflict 20062318.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1259,'Turn on Radiant License in TESTCAM','Ambulatory',NULL,'Apoorva Agarwal',NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1260,'MyChart - Clean up messages containing lab result sent to wrong patient','MyChart',NULL,NULL,NULL,NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1260 20071004 - KP NCAL - MyChart - Clean up messages containing lab result sent to wrong patient.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1261,'Correct CSSCONFMAN ORD grp 55 conflict resolution','Chart Sync',NULL,'Aaron Greenblatt','Fix',NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1261 Correct CSSCONFMAN ORD grp 55 conflict resolution.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1262,'KPNCAL - Turn on Switch to Send Enterprise Id to Ingenix','RESOLUTE',NULL,'GONZALEZ, RYAN            ',' ','Enhancement','Server Only',0,'Open','2008-10-08 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA1262.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1263,'Utility to back-populate hqa','Optime',NULL,'Ryan Bruvold','Other',NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1263 KP NCAL BACKPOPULATE HQA.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1265,'20071018 - Run build audit for antioch','EMR (IP)',NULL,'Maria Spinozzi',NULL,NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1265 Runbuildauditforantioch.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1267,'KP NCAL - MyChart - patient data cleanup after wrong mrn used to sign up for kp.org (HD2808575)','MyChart','Spring 06','Kevin Park',NULL,NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1267 20071019 - KP NCAL - MyChart - patient data cleanup after wrong MRN used to sign up for  kp.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1269,'20071026 - test and run dst utility','EMR (IP)',NULL,'Maria Spinozzi','Fix',NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1269 20071026 Test and run DST utility.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1272,'Set up Supplies and Drugs Print Group Format','Optime',NULL,'Adam Sauder',NULL,NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1272 - OpTime - Set Up Supplies and Drugs Print Group Format.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1273,'RIS, KP-NCAL, Enable Order Composer','Radiology',NULL,'Sujata Kamath','Other',NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA1273 - RIS, Enable Order Composer.doc',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1274,'Retrigger bed charges for 14 patient contacts','ADT',NULL,'Jeff Ver Burg','Fix',NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1274 - NCAL- Retrigger missing bed charges.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1278,'110607 - deactivate epic released order mode of verbal','Chart Sync',NULL,'REIMER, KRISTIE',NULL,NULL,'Server',0,'Open',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1279 NCAL remote subscription race condition clean up1.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1279,'NCAL remote subscription race condition clean up','Resolute',NULL,'Michael Wiese',NULL,NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1279 NCAL remote subscription race condition clean up1.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1280,'Clear Accounts From Associated Pool','Hospital Billing',NULL,'Ryan Gonzalez','Fix',NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1280 20071112 - Clear Accounts From Associated Pool.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1282,'KP NCAL - Combine Account Utility','ADT','Spring 06','Matt Begliner','Other',NULL,'Client',0,'Open',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1282 - Clarity Combine POS Accounts.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1283,'Kp ncal run verbal order fix utility','INPATIENT EMR',NULL,'SPINOZZI, MARIA            ','Other',NULL,'Fix',0,'Open','2007-11-23 00:00:00',NULL,NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1285,'Set I DEP 25605 for HOV redirection and HSH','Resolute',NULL,'Jeff Ver Burg','Other',NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1285 - Set I DEP 24605 to No.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1291,'NCAL cleanup of contacts with wrong owners','CHART SYNC, CHARGE HOMING',NULL,'WIESE, MICHAEL            ',' ',NULL,' ',0,'Open','2007-12-06 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\NCAL Cleanup of Contacts with Wrong Owners.doc','this is pending approval by the business; sent emails to Tom Cardella and Rosalba Carrillo-Vassel (Britt Mattern in her absence)',NULL,'Y',NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1292,'Ncal: cht clean up chart locks due to assigned staff code',NULL,NULL,NULL,NULL,NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1292 - Remove Bad CHT locks.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1293,'Turn on chart sync tracking for ORD group 157 in NCAL WITS',NULL,NULL,NULL,NULL,NULL,'Server',0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1293 20071206 Turn on Chart Sync tracking for ORD group 157.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1294,'KP NCAL - MyChart - Clean up MyChart message containing a character 3','Ambulatory',NULL,'PARK, KEVIN',NULL,NULL,NULL,0,'Closed',NULL,'#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1294 20071207 - KP NCAL - MyChart - Clean up MyChart message containing a character 3.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1296,'Kp ncal - done ~11000 messages','EpicCare/In Basket',NULL,'HONG, JON            ','Fix',NULL,'Server Only',0,'Closed','2007-12-11 00:00:00',NULL,NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1299,'NCal OR Populate Anesthesiologists in Preference Cards','OPTIME',NULL,'SAUDER, ADAM            ',' ',NULL,'Enhancement',0,'Open','2008-01-03 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1299 - OpTime - Set Anesthesiologist Items in ORP.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1300,'20080107 - KP NCAL - IDENTITY - Delete record with duplicate CID','IDENTITY, EMPI',NULL,'SWANK, DAN            ',' ',NULL,'Other',0,'Closed','2008-01-07 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080107 - KP NCAL - IDENTITY - Delete record with duplicate CID.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1301,'20080104 - KP NCAL - IDENTITY - Fix Incomplete Merges','IDENTITY, EMPI',NULL,'SWANK, DAN            ',' ',NULL,'Other',0,'Open','2008-01-07 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080104 - KP NCAL - IDENTITY - Fix Incomplete Merges.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1302,'Clean up er3(n) to er6(n) conversion exceptions in NCAL','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ',NULL,'Other',0,'Open','2008-01-09 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1302 ER3 to ER6 at NCAL.doc#','Related RFC : CHG000002057377 - KPHC NCAL PROD - run ER3 to ER6 conversion',NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1303,'Change LPP 54105 and 54045 for fewer open subsciptions','CHART SYNC',NULL,'JENKINS, EMILY            ',' ',NULL,'Fix',0,'Open','2008-01-11 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1303 - 20080109 - ChartSync, Change LPP 54105 v2.doc#',NULL,NULL,'Y',NULL,'X514008','KP N CALIFORNIA REGION',NULL,NULL),(1305,'NCAL - Retrigger Ingenix Messages','RESOLUTE',NULL,'GONZALEZ, RYAN            ',' ',NULL,' ',0,'Open','2008-01-09 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\NCAL - Retrigger Ingenix Messages.doc#',NULL,NULL,NULL,NULL,NULL,'KP N CALIFORNIA REGION',NULL,NULL),(1306,'KPNCAL - 1.10.2008. Cancel orders on deceased patient\'s pre-admission','ORDERS',NULL,'SPINOZZI, MARIA            ','Other',NULL,'Fix',0,'Cancelled','2008-01-10 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1306 - Cancel Orders on Deceased Patient.doc#',NULL,NULL,'Y',' I756371','X514008','KP N CALIFORNIA REGION',NULL,NULL),(1308,'KP NCAL find and fix ords with bad blgi nodes','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ',NULL,'Fix',0,'Open','2008-01-11 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\800944 Find and fix ORDs with bad BLGIs.doc#',NULL,NULL,NULL,NULL,'X746116','KP N CALIFORNIA REGION',NULL,NULL),(1309,'KPNCAL - Clear Bad Referring Providers','RESOLUTE, CLAIMS',NULL,'GONZALEZ, RYAN            ','Data Corruption','Other','Server Only',0,'Closed','2008-01-15 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\KPNCAL - RA 1309 Clear Bad Referring Providers.doc#',NULL,'254711',NULL,' ','G336027','KP N CALIFORNIA REGION',NULL,NULL),(1310,'Manually remove orders stuck in verification queue','EPICRX',NULL,'MAYFIELD, JOY            ','Other','Not Applicable','Not Applicable',0,'Closed','2008-01-16 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080116 - NCAL - Manually Remove Orders from Verification Queue.doc#',NULL,'254203',NULL,' ','G336027','KP N CALIFORNIA REGION',NULL,NULL),(1313,'KP NCAL - Turn on Radiant license in WITSNB2','RADIOLOGY',NULL,'KAMATH, SUJATA            ',' ','Other','Server Only',0,'Open','2008-01-23 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20081023-KP NCAL-Turn on Radiant license in WITSNB2.doc#',NULL,'237305',NULL,' ','G336027','KP N CALIFORNIA REGION',NULL,NULL),(1315,'KP NCAL - MyChart - Troubleshooting issues with LPG 51407 in MyChart','MYCHART',NULL,'PARK, KEVIN            ','Other','Not Applicable',' ',0,'Open','2008-01-25 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080125 - KP NCAL - MyChart - Troubleshooting issues with LPG 51407 in WITS.doc#',NULL,'250847',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1317,'CS - run gen compare','CHART SYNC',NULL,'JENKINS, EMILY            ',' ','Not Applicable','Server Only',0,'Open','2008-01-31 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1317 - CS - Run gen compare.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1318,'Clean up Logs Linked to Multiple Patients','OPTIME',NULL,'SAUDER, ADAM            ',' ','Fix','Server Only',0,'Open','2008-01-31 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1318 - OpTime - Clean up Logs Linked to Multiple Patients.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1321,'Kp ncal - update lpp records for pse fix','EPICRX',NULL,'SHARKEY, THOMAS            ',' ','Fix','Server Only',0,'Open','2008-02-08 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\KP NCAL PRN COMMENTS PSE FIX.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1323,'20080212 - KP NCAL - ORD / LLB Cleanup in PSUP','EPICCARE',NULL,'DAVEY, DREW            ','Other','Other','Server Only',0,'Open','2008-02-12 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080212 - KP NCAL - ORD LLB Cleanup in PSUP.doc#',NULL,'250752',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1327,'Ept 24360 clean-up','INPATIENT EMR',NULL,'REIMER, KRISTIE            ',' ','Fix','Server Only',0,'Open','2008-02-14 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080214 - KP NCAL - EPT 24360 Cleanup in PROD.doc#',NULL,'236055',NULL,' ','g336027','KP N CALIFORNIA REGION ',NULL,NULL),(1328,'Kp ncal - suspend utility cleanup','INPATIENT EMR',NULL,'REIMER, KRISTIE            ',' ',' ',' ',0,'Open','2008-02-14 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080214 - KP NCAL - Suspend Utility Search in Shadow.doc#',NULL,'218777',NULL,' ','g336027','KP N CALIFORNIA REGION ',NULL,NULL),(1331,'CLEAR UNNECESSARY SC AND SCI NODES FROM ORDS','CHART SYNC',NULL,'WINTER, NATHANIEL            ',' ','Fax #:','608-216-9842',0,'Open','2008-02-20 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\080220- Remove unneeded SC and SCI nodes.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1334,'KP NCAL - MYCHART - MARK WMG RECORDS AS HANDLED','MYCHART',NULL,'PARK, KEVIN            ','Other',' ',' ',0,'Open','2008-02-27 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080227 - KP NCAL - MyChart - Mark Two WMG Records as Handled.doc#',NULL,'261833',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1335,'TEST END DATE DAILY FOR \'07','INPATIENT EMR',NULL,'REIMER, KRISTIE            ','Data Corruption','Fix',' ',0,'Open','2008-02-26 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080227 - End Date Daily Utility for Spring \'07.doc#',NULL,'218777',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1336,'KP NCAL - ORDERSET CONVERSION WITS','INPATIENT EMR, EPICRX, ORDERS',NULL,'SHARKEY, THOMAS            ',' ',' ',' ',0,'Open','2008-03-03 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\KP NCAL WITS PRL CONV.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1338,'EDI - KP NCAL- TEMPORARILY MODIFY LAB INTERFACE SUPER GROUP CODE TO VALIDATE FIX TO UCI VALIDATION LOGIC','EDI',NULL,'LOEWENSTEIN, DANIEL            ','Other','Fix and Enhancement','Server Only',0,'Open','2008-03-03 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080303 - EDI - KP NCAL - Temporarily adjust AYNCLI01 server object in WITS2 environment to allow for validation of CR 2300.doc#',NULL,'263523',NULL,'I757834','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1339,'PURGE OLD MISPADDED CHANGE FLAGS','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ',' ','Server Only',0,'Open','2008-03-04 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\1339 - CS - Purge old mispadded change flags.doc#',NULL,'260632',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1340,'MODIFY DEMOGRAPHICS MENU AND ACTIVITY RECORDS','INPATIENT EMR',NULL,'REIMER, KRISTIE            ','Other','Fix and Enhancement','Server Only',0,'Open','2008-03-07 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\030708-Modify Demographics Menu and Activity Records.doc#',NULL,'264352',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1348,'3.11.08 RESUBMIT FAILED MESSAGES FROM DST NCAL','INTERCONNECT',NULL,'WIESE, MICHAEL            ',' ',' ',' ',0,'Open','2008-03-11 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\3.11.08 RESUBMIT FAILED MESSAGES FROM DST NCAL.doc#',NULL,'202466',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1350,'20080312 - KP NCAL - Set E&M Section and Attribute Pairs For HLX Records (WITS/PSUP)','EPICCARE',NULL,'DAVEY, DREW            ','Other','Other','Server Only',0,'Open','2008-03-12 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080312 - KP NCAL - Set EM Section and Attribute Pairs For HLX Records - WITS and PSUP.doc#',NULL,'265347',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1351,'KP NCAL, OR QUICKFORM COMPILE TIME CLEANUP','OPTIME, ANESTHESIA',NULL,'BRUVOLD, RYAN            ','Other','Fix','Server Only',0,'Open','2008-03-13 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1351 - OpTime - Cleanup QuickForm Compile Times.doc#',NULL,'264510, 265413',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1352,'RESUBMIT FAILED MESSAGES AT NCAL 3-13-08','INTERCONNECT',NULL,'JENKINS, EMILY            ',' ',' ',' ',0,'Open','2008-03-13 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1352 - Failed messages remediation at NCAL 3-18-08.doc#',NULL,'202466',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1355,'20080319 - KP NCAL - ORD 2065 CLEANUP IN PROD','EPICCARE, EDI',NULL,'DAVEY, DREW            ',' ','Other','Server Only',0,'Open','2008-03-20 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080319 - KP NCAL - ORD 2065 CLEANUP IN PROD.doc#',NULL,'233522',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1356,'20080319 - KP NCAL - ORD / LLB CLEANUP IN PROD','EPICCARE',NULL,'DAVEY, DREW            ','Other','Other','Server Only',0,'Open','2008-03-20 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\~7034601.doc#',NULL,'250752',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1359,'KP NCAL HB BILLING UTILITIES','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ','Other','Fix','Server Only',0,'Open','2008-03-27 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1359 - KP NCAL HB Billing Utilities.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1362,'20080331 - KP NCAL - MERGE SMARTBLOCK MACRO RULES TO NCAL EQUIVALENT SMARTBLOCKS','EPICCARE',NULL,'DAVEY, DREW            ','Other','Other','Server Only',0,'Open','2008-03-31 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080331 - KP NCAL - MERGE SMARTBLOCK MACRO RULES TO NCAL EQUIVALENT SMARTBLOCKS - V2.doc#',NULL,'269048',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1363,'2008-03-24 RESTORE LQL DATA ON CCM','EMFI/EMCI, CHART SYNC',NULL,'BUCHANAN, MICHAEL            ',' ',' ',' ',0,'Open','2008-03-25 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\2008-03-24 restore lql data on ccm rev 2.doc#',NULL,' ',NULL,' ','G336027','KP NATIONAL ',NULL,NULL),(1364,'KP NCAL - RX - CLEAR OPTIME ORDERS FROM RX VERIFY QUEUE','EPICRX',NULL,'SHARKEY, THOMAS            ','Other',' ','Server Only',0,'Open','2008-04-02 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1364 - 20080402 - Clear Optime orders from Rx Verify queue.doc#',NULL,'269446',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1370,'20080403 - KP NCAL - RUN PCP LINE COUNT CLEANUP','EPICCARE, REGISTRATION, TAPESTRY, CHART SYNC',NULL,'DAVEY, DREW            ','Data Corruption','Other','Server Only',0,'Open','2008-04-03 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080403 - KP NCAL - RUN PCP LINE COUNT CLEANUP.doc#',NULL,'255648',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1372,'PSE Search for Surgical Log Records Sharing ORM Records','OPTIME',NULL,'SAUDER, ADAM            ',' ','Not Applicable','Server Only',0,'Open','2008-04-03 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1372 - OpTime - PSE Search For Logs Sharing ORM Records.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1375,'OR, NCAL, REMOVE NON-EXISTENT CSN FROM EPT 3060','ANESTHESIA',NULL,'BRUVOLD, RYAN            ',' ','Fix','Server Only',0,'Open','2008-04-07 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1375 - OR,NCAL, Remove non-existent CSN from EPT 3060.doc#',NULL,'270393',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1377,'20080410 - KP NCAL - PSE SEARCH FOR HLV CONTENTION ISSUE','EPICCARE',NULL,'DAVEY, DREW            ','Patient Safety','Other',' ',0,'Open','2008-04-10 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080410 - KP NCAL - PSE SEARCH FOR HLV CONTENTION ISSUE.doc#',NULL,'269172',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1379,'KP TURN ON WBD IN N. CAL. INSTANCES','EPICRX, ORDERS, INPATIENT EMR',NULL,'SHARKEY, THOMAS            ',' ',' ',' ',0,'Open','2008-04-11 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\KP NCAL - ENABLE SPR07 ENHANCED WEIGHT BASED DOSING FUNCTIONALITY IN PRODUCTION.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1384,'ID - CLEAN UP ID TYPES, STORE BY INTERNAL ID (NCAL)','IDENTITY',NULL,'PODOLL, BRANDON            ','Data Corruption','Not Applicable','Server Only',0,'Open','2008-04-14 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1384 ID - CLEAN UP ID TYPES, STORE BY INTERNAL ID -NCAL.doc#',NULL,'271749',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1385,'041408 - RUN END DATE CLEANUP IN PRODUCTION','INPATIENT EMR',NULL,'REIMER, KRISTIE            ','Data Corruption','Fix','Server Only',0,'Open','2008-04-14 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\041408 - RA to run end date cleanup in PROD.doc#',NULL,'218777',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1386,'KP NCAL - FLAG ORDERS FOR SCHEDULE ORDERS GO LIVE','EPICCARE',NULL,'SMITH, JACKIE            ','Other','Fix and Enhancement','Server Only',0,'Open','2008-04-11 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1386 - Flag Orders for Schedule Orders Go Live.doc#',NULL,'233239',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1388,'PULL DCS CONVERSION 550 FROM NB',' ',NULL,'JENKINS, EMILY            ',' ',' ',' ',0,'Open','2008-04-18 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1388 Pull DCS Conversion 550 from NB.doc#',NULL,'272478',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1391,'HIM: WQ SORT BY NUID','HIM',NULL,'GANNON, KYLE            ','Other',' ','Server Only',0,'Open','2008-04-21 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1391 - NUID Column WQ Sort.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1394,'CLAIMS - CO-PAY UTILITY','CLAIMS',NULL,'KORALIK, RYAN            ','Loss of Revenue','Other','Server Only',0,'Open','2008-04-25 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA to Run Claims--Co-Pay Utility.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1395,'KP NCAL - MYCHART - MARK EMPTY WMG RECORD AS READ, REMOVE FROM MEMBER VIEW, NOTE ACTION IN SUBJECT','MYCHART',NULL,'PARK, KEVIN            ','Other',' ',' ',0,'Open','2008-04-25 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080425 - KP NCAL - MyChart - Clean up empty WMG record.doc#',NULL,'270850',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1400,'RE-ACTIVATE WRONGLY DELETED ALLERGIES ON REMOTE DEPLOYMENTS','CHART SYNC',NULL,'SHIMMIN, ROBERT            ','Patient Safety','Not Applicable',' ',0,'Open','2008-05-01 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\1400 - Clean up deleted patient allergies.doc#',NULL,'274241',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1402,'KP NCAL - 20080502 - RIS START ACCESSION COUNTING AT 10000000','RADIOLOGY',NULL,'EIKLEBERRY, DUANE            ','Other','Enhancement','Server Only',0,'Open','2008-05-02 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA1402 - 20080502 - RIS Start Accessions at 10000000.doc#',NULL,'274799',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1403,'525_20080505 -EDI - 898702 - SCAN OF OUTBOUND MESSAGE QUEUE TO OBTAIN SUMMARY INFORMATION FOR PR1 CLEANUP','EDI',NULL,'LOEWENSTEIN, DANIEL\rGIAM, PAUL            ','Other','Other','Server Only',0,'Open','2008-05-06 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\525_20080506 -EDI - 898702 - SCAN OF OUTBOUND MESSAGE QUEUE TO OBTAIN SUMMARY INFORMATION FOR PR1 CLEANUP.doc#',NULL,'274108',NULL,'139404','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1405,'KP NCAL - MYCHART - REPLACES RA 1395 TO MARK EMPTY WMG READ, REMOVE FROM MEMBER VIEW, NOTE ACTION IN SUBJECT','MYCHART',NULL,'PARK, KEVIN            ','Other',' ',' ',0,'Open','2008-05-06 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080506 - KP NCAL - MyChart - Clean up empty WMG record.doc#',NULL,'270850',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1406,'KP NCAL - LGQ TO PRL CONVERSION IN PRODUCTION','INPATIENT EMR, EPICRX',NULL,'SHARKEY, THOMAS            ',' ','Enhancement','N/A',0,'Open','2008-05-06 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\KP NCAL PRL CONVERSION IN PRODUCTION.doc#',NULL,'275528',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1408,'RA 1408 - KP NCAL COMBINE ACCOUNT CLARITY CLEAN UP','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ',' ','Fix','Server Only',0,'Open','2008-05-07 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1408 - KP NCAL Combine Account Clarity Clean Up.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1409,'CLEAN UP CHARACTER <3> FROM PATIENT RECORDS','INTERCONNECT',NULL,'SHIMMIN, ROBERT            ',' ','Fax #:','Server Only',0,'Open','2008-05-08 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\1409 - remove ascii 3.doc#','No RFC generated, late notification…neeed to create catch RFC to document change','218549',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1410,'EXPORT LPF DATA FROM PSUP',' ',NULL,'REIMER, KRISTIE            ','Other',' ',' ',0,'Open','2008-05-08 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\Export LPF Data from PSUP.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1413,'DELETED ALLERGIES APPEAR IN HEADER CLEANUP','INPATIENT EMR, EPICCARE',NULL,'REIMER, KRISTIE            ',' ',' ',' ',0,'Open','2009-01-06 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1413 KPNCAL - Deleted Allergies Appear in Header Cleanup.doc#',NULL,'259865, 308940',NULL,' ','F117112','KP N CALIFORNIA REGION ','report(fix)\r	d ^HUINIT\r	n lplID,siLPL3000,status,endline,statushx,c5,elgID,cnt\r	n bid,lock,statInfo,eptID,mrn,update,home,elgstatus,ln\r	n DtNoted,Reactions,Comments,RxType,UserID,Synonym,Priority,total\r	w !,\"Process ID: \",$j\r	s c5=$c(5)\r	i fix d\r	.  w !!,\"PATIENT | PATIENT HOME | LPL ID | Current Status | Last Status History | DATE UPDATED | ELG ID | ELG Status\"\r	.  s bid=$$AuditBatch^EAETBT1()   ;open batch\r	.  s ZNOGRPTRK=1   ;turn off ChartSync\r	.  s lplID=\"\"\r	.  f  s lplID=$o(^XLPLTEMPGLO(lplID)) q:lplID=\"\"  d\r	.  .  d dots^HUFILE(.cnt,1000,10000)\r	.  .  s lock=$$zlock^%Zefnlid(\"LPL\",lplID)  ;grab lock on LPL\r	.  .  i \'lock w !,\"Cannot lock allergy record \",lplID q\r	.  .  s siLPL3000=$$zgetbll^EAXLIB(\"LPL\",lplID,3000,99999)\r	.  .  s statInfo=^XLPLTEMPGLO(lplID)\r	.  .  s eptID=$$getidin^%Zefnlib($$getn^EAXLIB(\"LPL\",lplID,1,\"1;10\"),\"EPT\")\r	.  .  s mrn=$$zDnxVs^EAXLIB(\"EPT\",eptID,2060,50140,2061)\r	.  .  s home=$$zgetnp^EAXLIB11(\"EPT\",eptID,9,1,99999)\r	.  .  s status=$p(statInfo,c5,1)\r	.  .  s statushx=$p(statInfo,c5,2)\r	.  .  s elgID=$p(statInfo,c5,3)\r	.  .  s update=($$getn^EAXLIB(\"LPL\",lplID,1,\"1;12\"))\r	.  .  s update=$$dout^%ZeUDT(update/86400)_\" \"_$$tout^%ZeUDT(update)\r	.  .  s elgstatus=$$zgetnp^EAXLIB11(\"ELG\",elgID,5,1,99999)  ;status of ELG\r	.  .  s DtNoted=$$zgetpcl^EAXLIB(siLPL3000,3,1)\r	.  .  s Comments=$$zgetpcl^EAXLIB(siLPL3000,2,1)\r	.  .  s RxType=$$zgetpcl^EAXLIB(siLPL3000,8,1)\r	.  .  s UserID=$$zgetpcl^EAXLIB(siLPL3000,6,1)\r	.  .  s Synonym=$$zgetpcl^EAXLIB(siLPL3000,10,1)\r	.  .  s Priority=$$zgetpcl^EAXLIB(siLPL3000,11,1)\r	.  .  s total=$$zgetpcl^EAXLIB(siLPL3000,9,0)\r	.  .  f ln=1:1:total  d\r	.  .  .  s Reactions=Reactions_$$zgetpcl^EAXLIB(siLPL3000,9,ln)\r	.  .  .  s:ln<total Reactions=Reactions_\",\"\r	.  .  w !,mrn_\" | \"_home_\" | \"_lplID_\" | \"_status_\" | \"_statushx_\" | \"_update_\" | \"_elgID_\" | \"_elgstatus\r	.  .  d UpdateLPL^LMIALG5(lplID,elgID,status,DtNoted,Reactions,Comments,RxType,UserID,Synonym,Priority)\r	.  .  s %=$$zunlock^%Zefnlid(\"LPL\",lplID)  ;release lock\r	.  d EndBatch^EAETBT1(bid)  ;close batch\r	e  d\r	.  k ^XLPLTEMPGLO\r	.  f  s lplID=$$zoID^EA1LIB2(\"LPL\",lplID) q:lplID=\"\"  d\r	.  .  q:$$zgetnp^EAXLIB11(\"LPL\",lplID,30,1,99999)\'=2  ;quit if not allergy\r	.  .  s siLPL3000=$$zgetbll^EAXLIB(\"LPL\",lplID,3000,99999)\r	.  .  s elgID=$$zgetpcl^EAXLIB(siLPL3000,1,1)   ;LPL 3000\r	.  .  s status=$$zgetpcl^EAXLIB(siLPL3000,4,1)         ;LPL 3030\r	.  .  i status=\"\" w !,lplID_\" | Status is null\" q\r	.  .  s endline=$$getn^EAXLIB(\"LPL\",lplID,0,\"3100;4;1\")   ;LPL 3130\r	.  .  i endline=\"\" w !,lplID_\" | \"_status_\"| There is no allergy history\" q\r	.  .  s statushx=$$getn^EAXLIB(\"LPL\",lplID,endline,\"3100;4;1\")\r	.  .  i statushx=\"\" w !,lplID_\" | \"_status_\" | Status History is null\" q\r	.  .  i status\'=statushx s ^XLPLTEMPGLO(lplID)=status_c5_statushx_c5_elgID\r	q\r',NULL),(1415,'KP NCAL AFTER HOURS CLEANUP OF MAR LOCK','INPATIENT EMR',NULL,'JENSEN, SHANNON            ',' ','Fix','Server Only',0,'Open','2008-05-10 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\KP NCAL after hours cleanup of MAR lock.doc#',NULL,'276878',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1416,'HIM: EXPORT SPECIFIC ROI AND EAR RECORDS FROM PRODEBM','HIM',NULL,'GANNON, KYLE            ','Other',' ','Server Only',0,'Open','2008-05-13 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1416 - Extract Specific ROI and EAR Records.doc#',NULL,'277383',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1420,'TRANSFER SPECIFIED BALANCES BETWEEN INSURANCE AND PATIENT BUCKET','RESOLUTE',NULL,'GONZALEZ, RYAN            ',' ',' ','Server Only',0,'Open','2008-05-28 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1420 - Transfer specified balances between insurance and PT Bucket.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1422,'CLEAN UP MISFORMATTED GI NODES - NCAL','CHART SYNC',NULL,'JENKINS, EMILY            ',' ','Fax #:','608-216-9843',0,'Open','2008-05-29 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\1422 - generation index cleanup.doc#',NULL,'279654',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1423,'KP NCAL - SUSPENDED MEDS UTILITY CLEAN UP','INPATIENT EMR',NULL,'REIMER, KRISTIE            ',' ','Fax #:',' ',0,'Open','2008-05-29 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\KP NCAL - Suspended Meds Utility Cleanup.doc#',NULL,'218777',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1428,'KP NCAL CLEANUP OF DEFECTIVE LDAS','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Data Corruption','Fix','Server Only',0,'Open','2008-06-10 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1428 - Inpatient, KP NCAL Defective LDA Clean Up.doc#',NULL,'274329',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1431,'KP NCAL 2ND PRL PRODUCTION CONVERSION','INPATIENT EMR',NULL,'REIMER, KRISTIE            ',' ','Fax #:',' ',0,'Open','2008-06-04 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\KP NCAL 2ND PRL PRODUCTION CONVERSION.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1432,'KP NCAL RESTORE PSUP LSD SETTING 2525 TO 2','INPATIENT EMR, ORDERS',NULL,'REIMER, KRISTIE            ','Other','Other','Server Only',0,'Open','2008-06-05 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\KP NCAL rESTORE PSUP LSD SETTING 2525 to 2.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1433,'FIX DCS CIDS','CHART SYNC',NULL,'JENKINS, EMILY            ',' ','Fix','Server Only',0,'Open','2008-06-10 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1433 - Fix DCS CIDs.doc#',NULL,'272478',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1434,'20080611 - KP NCAL - Purge ADT In Basket Messages','EPICCARE',NULL,'DAVEY, DREW            ','Other','Other','Server Only',0,'Open','2008-06-11 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080611 - KP NCAL - Purge ADT In Basket Messages.doc#',NULL,'272863',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1435,'CLEAR LOCK ON LOM 1400920068','INPATIENT EMR',NULL,'REIMER, KRISTIE            ','Other',' ',' ',0,'Open','2008-06-18 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\CLEAR LOCKS.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1436,'SWAP NAVIGATOR SECTIONS IN WITS2 - GGM','ORDERS, EPICCARE, INPATIENT EMR',NULL,'REIMER, KRISTIE            ','Other',' ','Server Only',0,'Open','2008-06-25 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\SWAP NAVIGATOR SECTIONS IN WITS2 - GGM.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1437,'KP NCAL - MYCHART - REMOVE MESSAGES FROM MEMBER VIEW','MYCHART',NULL,'PARK, KEVIN            ','Other',' ',' ',0,'Open','2008-06-25 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080625 - KP NCAL - MyChart - Remove Messages from Member View and Add Explanatory Text.doc#',NULL,'286087',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1446,'KP NCAL CLEANUP OF UNACKNOWLEDGED ORDER INP ITEM 20070','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Data Corruption','Other','Server Only',0,'Open','2008-07-11 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1446 - Inpatient, KP NCAL Unacknowledged Order INP Item Cleanup org.doc#',NULL,'289500',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1447,'RESOLVE EPT 132 CONFLICTS ON OLD DATS','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ','Fax #:','608-216-9843',0,'Open','2008-07-21 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\1447 - Conflict cleanup on EPT-132.doc#',NULL,'268808',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1449,'KP NCAL - REMOVE STUCK ORDERS FROM VERIFICATION QUEUE','EPICRX',NULL,'SHARKEY, THOMAS            ',' ',' ','Server Only',0,'Open','2008-07-14 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\KP NCAL - verification queue clean up.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1453,'KPHC NCAL - RA1453 - cleanup allergen records in PSUPGGM',NULL,NULL,NULL,NULL,NULL,NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(1454,'20080729- KP NCAL - Run Allergy Cleanup in PROD environments','EPICCARE, INPATIENT EMR',NULL,'DAVEY, DREW            ',' ','Other','Server Only',0,'Open','2008-07-29 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080729 - KP NCAL - Run Allergy Cleanup in PROD environments.doc#',NULL,'293027',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1456,'PRL CONVERSION IN STGN','INPATIENT EMR, ORDERS, EPICCARE',NULL,'REIMER, KRISTIE            ','Other',' ','Server Only',0,'Open','2008-07-31 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\PRL CONVERSION IN STGN.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1457,'ENABLE CSSCONFMAN FOR GROUP EPT-805','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ',' ','Server Only',0,'Open','2008-07-31 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA1457 - ENABLE CSSCONFMAN.doc#',NULL,'235868',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1460,'RIS, KP-NCAL, SET ACCESSION NUMBER GENERATION GLOBAL','RADIOLOGY',NULL,'KAMATH, SUJATA            ',' ','Not Applicable','Server Only',0,'Open','2008-08-06 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1460-RIS,NCAL,Set Accession number generation global.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1462,'20080812 - KP NCAL - Run RAR Medication DC Cleanup in non-Prod','EPICCARE',NULL,'DAVEY, DREW            ','Other','Other','Server Only',0,'Open','2008-08-12 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080812 - KP NCAL - Run RAR Medication DC Cleanup in non-Prod.doc#',NULL,'250696',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1463,'20080812 - KP NCAL - Chronic Diagnosis Cleanup in non-Prod','EPICCARE',NULL,'DAVEY, DREW            ','Clean Up Activity','Other','Server Only',0,'Open','2008-08-12 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080812 - KP NCAL - Chronic Diagnosis Cleanup in non-Prod.doc#',NULL,'288103',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1464,'KPNCAL - IP LOCK CLEAN UP','INPATIENT EMR',NULL,'YUNKE, JEFF            ',' ','Other','Server Only',0,'Open','2008-08-13 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1464 - Terminate stray locks.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1465,'CS - REMEDIATE BAD DOB FROM PATIENT LOOKUP','CHART SYNC',NULL,'JENKINS, EMILY            ',' ','Fix','Server Only',0,'Open','2008-09-17 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\1465 - CS - Remediate bad DOB from patient lookup.doc#',NULL,'305887',NULL,' ','F117112','KP S CALIFORNIA REGION ',NULL,NULL),(1466,'PRL CONVERSION (2ND) STGN','ORDERS',NULL,'REIMER, KRISTIE            ',' ','Fax #:',' ',0,'Open','2008-08-20 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\2nd PRL CONVERSION IN STGN.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1467,'KP NCAL REMOVE EXTRA PARENTHESIS FROM DEMOGRAPHICS E2N','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Other','Fix','Server Only',0,'Open','2008-08-21 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1467 - Inpatient, KP NCAL Remove Extra Parenthesis from Demographics E2N.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1468,'Conversion to New ADT Linking Configuration','OPTIME',NULL,'SAUDER, ADAM            ',' ','Enhancement','Server Only',0,'Open','2008-08-21 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1469,'KP NCAL - COPAY WAIVE CLEAN UP','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ',' ','Enhancement','Server Only',0,'Open','2008-08-24 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1469 - KP NCAL Copay Waive Clean Up.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1470,'KP NCAL REMOVE CORRUPTED CONSULT NOTE','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Data Corruption','Other','Server Only',0,'Open','2008-09-09 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1470 - Inpatient, KP NCAL Remove Corrupted HNO from INP.doc#',NULL,'288231',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1472,'20080826 - KP NCAL - CHRONIC DIAGNOSIS CLEANUP IN PROD','EPICCARE',NULL,'DAVEY, DREW            ',' ','Other','Server Only',0,'Open','2008-08-26 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080826 - KP NCAL - Chronic Diagnosis Cleanup in Prod.doc#',NULL,'288103',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1473,'544 - 20080828 - 600 - LOG WARNING MESSAGE IF DC TRIGGERED BEFORE NW','EDI',NULL,'LOEWENSTEIN, DANIEL            ','Other','Other','Server Only',0,'Open','2008-08-28 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\544_20080828 - 600 - LOG WARNING MESSAGE IF DC TRIGGERED BEFORE NW1.doc#',NULL,'258655',NULL,'143472','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1474,'REFILE CER MSR MESSAGES','CHART SYNC',NULL,'JENKINS, EMILY            ',' ','Fax #:','608-216-9843',0,'Open','2008-09-02 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1474 - Refile CER MSR messages.doc#',NULL,'302697',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1475,'NCAL - Reroute All Followup Records','RESOLUTE',NULL,'GONZALEZ, RYAN            ','Data Corruption','Other','Server Only',0,'Open','2008-09-04 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\NCAL - RA to Reroute All Followup Records_090808.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1476,'KP NCAL INPATIENT USAGE STATISTICS SEARCHES','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ',' ','Not Applicable','Server Only',0,'Open','2008-09-05 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1476 - Inpatient, KP NCAL Search for Inpatient Usage Statistics.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1477,'RA 1477: HIM - FIX EPT CSN-ORDER TYPE INDEX FOR ROI REPORT','HIM',NULL,'GANNON, KYLE            ',' ','Fix','Server Only',0,'Open','2008-09-08 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1477 - HIM - Fix EPT CSN-Order Type Index for ROI Report.doc#',NULL,'296605',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1479,'KP NCAL - DISABLE OLD WEIGHT BASED UNITS IN WITS3',' ',NULL,'SHARKEY, THOMAS            ',' ','Enhancement','Server Only',0,'Open','2008-09-10 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1479 KP NCAL - DISABLE OLD WEIGHT TYPE UNITS IN WITS3.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1481,'ENABLE ORD 310 FOR CSSCONFMAN','CHART SYNC',NULL,'JENKINS, EMILY            ',' ','Other','Server Only',0,'Open','2008-09-10 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1481 - Enable ORD 310 for CSSCONFMAN.doc#',NULL,'304692',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1482,'KPNCAL - HELP NITRIC OXIDE CHARGES FILE MORE QUICKLY','CHARGE ROUTER',NULL,'BEGLINGER, MATT            ',' ','Fix','Server Only',0,'Open','2008-09-10 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1482 - Help Nitric Oxide Charges File More Quickly.doc#',NULL,' ',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1484,'CS - REMEDIATE BAD DOB FROM PATIENT LOOKUP','CHART SYNC',NULL,'JENKINS, EMILY            ',' ','Fix','Server Only',0,'Open','2008-09-17 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\1484 - CS - Remediate bad DOB from patient lookup.doc#',NULL,'305896',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1487,'ADD PATIENT TYPE (I EPT 101) VALUE OF TEST PATIENT TO 120 RECORDS','REGISTRATION',NULL,'VER BURG, JEFF            ','Other','Fix','Server Only',0,'Open','2008-09-22 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1487 - ADD PATIENT TYPE I EPT 101 VALUE OF TEST PATIENT TO 120 RECORDS.doc#',NULL,'306521',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1488,'KP NCAL - FLAG RADIOLOGY ORDERS FOR SCHEDULE ORDERS GO LIVE','EPICCARE',NULL,'SMITH, JACKIE            ','Other','Fix and Enhancement','Server Only',0,'Open','2008-09-22 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1488 - Flag Radiology Orders for Schedule Orders Go Live.doc#',NULL,'233239',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1489,'KP NCAL - PRL SECONDARY CONVERSION IN PRODUCTION',' ',NULL,'SHARKEY, THOMAS            ',' ','Enhancement','Server Only',0,'Open','2008-09-23 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\KP NCAL - PRL Secondary conversion in production.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1490,'KP NCAL - FLAG RADIOLOGY ORDERS FOR SCHEDULE ORDER GO LIVE','EPICCARE',NULL,'SMITH, JACKIE            ','Other','Fix and Enhancement','Server Only',0,'Open','2008-09-23 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1490 - Flag Radiology Orders for Schedule Orders Go Live.doc#',NULL,'233239',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1493,'KP NCAL - FLAG LAB ORDERS FOR SCHEDULE ORDER GO LIVE','EPICCARE',NULL,'DAVEY, DREW            ','Other','Fix and Enhancement','Server Only',0,'Open','2008-09-25 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1493 - Flag Lab Orders for Schedule Orders Go Live.doc#',NULL,'233239',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1494,'KP NCAL - CONVERT A SINGLE LGQ RECORD NOT CONVERTED ORIGINALLY',' ',NULL,'SHARKEY, THOMAS            ',' ',' ',' ',0,'Open','2008-09-25 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\~4095494.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1495,'RIS KP NCAL, BARCODE STYLE SETUP','RADIOLOGY',NULL,'KAMATH, SUJATA            ',' ','Other','Server Only',0,'Open','2008-09-30 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1495 - RIS, Barcode style setup.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1496,'20080930 - KP NCAL - RUN RAR MEDICATION DC CLEANUP IN PROD','EPICCARE',NULL,'DAVEY, DREW            ','Other','Other','Server Only',0,'Open','2008-09-30 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\20080930 - KP NCAL - RUN RAR MEDICATION DC CLEANUP IN PROD.doc#',NULL,'298370',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1498,'KP NCAL TEMPORARY FLO IN LVN LIMIT INCREASE (EVERYWHERE ELSE)','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Other','Other','Server Only',0,'Open','2008-09-30 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1498 - Inpatient, KP NCAL Temporary FLO Limit Increase - everywhere else.doc#',NULL,'278694',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1499,'REROUTE RESULTS NOT PREVIOUSLY ROUTED DUE TO XDM RACE CONDITION','CROSS DEPLOYMENT ACCESS',NULL,'SHIMMIN, ROBERT            ',' ','Fax #:','608-216-9843',0,'Open','2008-10-01 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\1499 - reroute results previously missed by XDM.doc#',NULL,'308698',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1500,'DAYLIGHT SAVINGS TIME TOLERANCE SETTINGS NCAL','INTERCONNECT',NULL,'JENKINS, EMILY            ',' ','Fix','Server Only',0,'Open','2008-10-02 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1500 - Daylight Savings Time Tolerance Settings NCAL.doc#',NULL,'202466',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1501,'RIS, KP NCAL, TURN ON RADIANT LICENSE - 20081002','RADIOLOGY',NULL,'KAMATH, SUJATA            ',' ','Other','Server Only',0,'Open','2008-10-02 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA1501 - RIS, KP NCAL, Turn on Radiant license in PSUP and Stage.doc#',NULL,'237305',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1502,'RA, KP NCAL , TURN ON RADIANT LICENSE IN PRODUCTION-20081002','RADIOLOGY',NULL,'KAMATH, SUJATA            ',' ','Other','Server Only',0,'Open','2008-10-02 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA1502 - RIS, KP NCAL, Turn on Radiant license in production.doc#',NULL,'237305',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1506,'DST KPNCAL FALL 2008',' ',NULL,'SPINOZZI, MARIA            ','Other','Fix','Server Only',0,'Open','2008-10-08 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\DST KPNCAL Fall 2008.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1508,'KP NCAL - REPROPAGATE ORDERS FOR SCHEDULE ORDERS GO LIVE','EPICCARE',NULL,'SMITH, JACKIE            ','Other','Fix','Server Only',0,'Open','2008-10-10 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1508 - Repropagate Orders for Schedule Orders Go Live.doc#',NULL,'233239',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1514,'KP NCAL - RETRACT RX BILLING ERROR IN BASKET MESSAGES','EPICRX',NULL,'SHARKEY, THOMAS            ',' ','Not Applicable','Server Only',0,'Open','2008-10-22 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1514 Retract RX Billing error in Basket Message.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ','To retract messages:\r\nd ChgOver^HTSTAT2(ID,\"C812293\",5)\r\n\r\nBackout code:\r\nd ChgOver^HTSTAT2(ID,\"C812293\",2)\r',NULL),(1515,'NCAL - VERBAL ORDERS REMEDIATION FOR RW REPORTS AND CLARITY REPORTS',NULL,NULL,NULL,NULL,NULL,NULL,0,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(1518,'KP NCAL RETRACT VO MESSAGES SENT FOR D/C PTA MEDS','INPATIENT EMR',NULL,'SPINOZZI, MARIA            ','Data Corruption','Fix','Server Only',0,'Open','2008-10-30 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA1518-10302008-KPNCAL Retract Verbal Order Messages Sent for DC of PTA Meds.doc#',NULL,'297557',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1521,'ADD TEST PATIENT FLAG TO 12 PATIENTS IN PROD','Prelude',NULL,'VER BURG, JEFF            ','Other','Fix','Server Only',0,'Open','2008-11-04 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1521 - Add Test Patient flag to 12 patient records in PROD.doc#',NULL,'306521',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1524,'KP NCAL ANOTHER CLEANUP OF I INP 20070','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Data Corruption','Other','Server Only',0,'Open','2008-11-12 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1524 - Inpatient, KP NCAL Unacknowledged Order INP Item Cleanup.doc#',NULL,'289500',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1526,'HB - ADD COVERAGE TO SELF PAY HARS','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ','Loss of Revenue','Fix','Server Only',0,'Open','2008-11-12 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1526 - HB Add Coverage to Self Pay Accounts.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1531,'KP NCAL - FLAG EXISTING RELEASED STANDING CHILD ORDERS AS SCHEDULED','EPICCARE, CADENCE',NULL,'SMITH, JACKIE            ','Other','Fix','Server Only',0,'Open','2008-11-24 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1531 - Flag existing released standing child orders as scheduled.doc#',NULL,'320875',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1534,'2008-12-02 INFECTION CONTROL DATA','ADT',NULL,'BUCHANAN, MICHAEL            ',' ','Other','Server Only',0,'Open','2008-12-02 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1534 2008-12-02 infection control data.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1538,'OVERRIDE IMPORT SPEC INVESTIGATION - NCAL PROD JOURNAL FILE REQUEST','EPICRX',NULL,'BRIES, MICHAEL            ','Other',' ',' ',0,'Open','2008-12-05 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1538 OVERRIDE IMPORT SPEC INVESTIGATION - NCAL PROD JOURNAL FILE REQUEST.doc#',NULL,'293224',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1539,'KP NCAL CLEAN ASCII <9> FROM ORD ITEMS','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Data Corruption','Other','Server Only',0,'Open','2008-12-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1539 - Inpatient, KP NCAL Clean up ORD items for one record.doc#',NULL,'326796',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1540,'HB - ADD STOP BILL AND CONTESTED FLAG','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ',' ','Fix','Server Only',0,'Open','2008-12-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1540 - HB Add Stop Bill and Contested Flag.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1542,'12172008 - TURN ON UCW IN WITS2CA','Inpatient',NULL,'SPINOZZI, MARIA            ','Other','Other','Server Only',0,'Open','2008-12-11 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\KPNCAL 12172008 - Turn on UCW in WITS2CAM.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1543,'SET BASE DEPLOYMENT FOR MANY EMP RECORDS','CROSS DEPLOYMENT ACCESS',NULL,'JENKINS, EMILY            ','Other','Other','Server Only',0,'Open','2008-12-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1543 - Set Base Deployment for Many EMP Records.doc#',NULL,'329666',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1544,'CLEAR DIRTY FLAG IN OPTIME QUICKFORMS','OPTIME',NULL,'SAUDER, ADAM            ',' ','Fix','Server Only',0,'Open','2008-12-17 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1544 - OpTime - Clear Dirty Flag in OpTime QuickForms.doc#',NULL,'330085',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1545,'REMOVE GHOST CASE FROM THE SCHEDULE','OPTIME',NULL,'SAUDER, ADAM            ',' ','Fix','Server Only',0,'Open','2008-12-18 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1545 - OpTime - Remove Ghost Case From the Schedule.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1546,'SET MISSING GI NODES','CHART SYNC',NULL,'JENKINS, EMILY            ','Other','Fix','Server Only',0,'Open','2008-12-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1546 - Set Missing GI nodes.doc#',NULL,'330779',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1547,'KP NCAL - HB RESET FIRST STATEMENT FOR AGING','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ','Other','Fix','Server Only',0,'Open','2008-12-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1547 - HB Reset First Statement Date for Aging.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1549,'RIS, KP NCAL, DE-ACTIVATE STANDARD RECOMMENDATION CATEGORY VALUES','RADIOLOGY',NULL,'KAMATH, SUJATA            ',' ','Other','Server Only',0,'Open','2008-12-22 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1549 - RIS, KP NCAL, deactivate standard recommendation values.doc#',NULL,'327328',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1550,'KP NCAL - FLAG EXISTING RELEASED STANDING CHILD ORDERS AS SCHEDULED ON ALL DEPLOYMENTS','CADENCE, EPICCARE',NULL,'SMITH, JACKIE            ','Other','Fix','Server Only',0,'Open','2008-12-23 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1550 - Flag Existing Released Standing Child Orders as Scheduled on all Deployments.doc#',NULL,'320875',NULL,' ','F117112','KP N CALIFORNIA REGION ','parentinfo()\r\n	n ordid,cid,si600,exp,actdep\r\n	d ^HUINIT\r\n	s actdep=$$zgtActDp^LNODROP1()\r\n	f  s ordid=$$znxIxID(\"ORD\",157,1,ordid) q:ordid=\"\"  d  				;Only care about unscheduled parents, ORD 157=1\r\n	. q:$$zgetnp(\"ORD\",ordid,9,1,99999)\'=actdep\r\n	. s si600=$$zgetbll(\"ORD\",ordid,600,99999) \r\n	. q:$$zgetpcl(si600,1,1)\'=1		     					;ORD 600 is not standing (1)\r\n	. s exp=$$zgetpcl(si600,2,1)        						;ORD 610 - Standing Expiration Date \r\n	. q:(exp]\"\")&(+$H>exp) 			   					;Expiration date exists and has passed \r\n	. q:$$getn(\"ORD\",ordid,1,\"34010;13\")\'=1  	    				;ORD 34090 is not OP \r\n	. q:$$zgetnp(\"ORD\",ordid,90,1,99999)=4			     			;Order Status is canceled\r\n	. s cid=$$zgetnp(\"ORD\",ordid,11,1,99999)					;cid\r\n	. w !,cid									;display	\r\n	q\r\n	;\r\nupdatechild(change)\r\n	n cid,ZNOGRPTRK,cnt,ordid,childcnt,chldid,chgcnt,exit,bid,ln\r\n	n endtime,tottime,endglo,endlines,stglo,stlines,sttime\r\n	d ^HUINIT\r\n	k ^XCHLDORD\r\n	s:change bid=$$AuditBatch^EAETBT1(),%EA(\"E\",\"DELAY CLARITY EXTRACTION\")=1,ZNOGRPTRK=1\r\n	s sttime=$$time^%Zefnlib(),stglo=$zu(67,9,$J),stlines=$zu(67,8,$J)\r\n	s cid=^XLASTCID(\"Last ID\")\r\n	f  s cid=$o(^XPARENTORD(cid)) q:(cid=\"\")  d  q:(exit=1)\r\n	. w $$scrdots(.cnt,10000,100000) \r\n	. i (cnt#1000)=0 d\r\n	. . i (^%Zdown)!(^XLASTCID(\"STOP\")=1) s exit=1,^XLASTCID(\"Last ID\")=cid w !,\"Utility has been manually stopped.  Please restart again tomorrow.\"	\r\n	. s ordid=$$zCIDgtID^LARSCH01(\"ORD\",cid)					\r\n	. q:ordid=\"\"									;Order doesn\'t exist on this deployment	\r\n	. s childcnt=$$zgetnp(\"ORD\",ordid,660,0,99999)      				;Child order line count \r\n	. q:+childcnt=0	 								;No child orders\r\n	. f ln=1:1:childcnt d \r\n	. . s chldid=$$zgetnp(\"ORD\",ordid,660,ln,99999)      				;Child order ID \r\n	. . q:$$zgetnp(\"ORD\",chldid,157,1,99999)=2       				;Child order has been scheduled \r\n	. . i change]\"\" d  i 1\r\n	. . . i \'$$zlock^%Zefnlid(\"ORD\",chldid,3) w !,\"Lock for order \"_chldid_\" could not be obtained.\"  s ^XLASTCID(\"Lock Issues\",chldid)=\"\" q   \r\n	. . . s %=$$insrti^LNODROP(157,2,\"\",\"\",\"\",chldid,99999,\"ORD\")			;Mark child as scheduled	\r\n	. . . s %=$$zunlock^LULOCK(\"ORD\",chldid)					;Unlock order record\r\n	. . s chgcnt=chgcnt+1,^XCHLDORD(chldid)=\"\"				\r\n	. i (change]\"\"),((chgcnt#100)=0) d FlushBatch^EAETBT1(bid)\r\n	d:change EndBatch^EAETBT1(bid)\r\n	k %EA(\"E\",\"DELAY CLARITY EXTRACTION\"),ZNOGRPTRK\r\n	;\r\n	;Reporting\r\n	;\r\n	s endtime=$$time^%Zefnlib(),endglo=$zu(67,9,$J),endlines=$zu(67,8,$J)\r\n	s tottime=endtime-sttime\r\n	q:cnt=\"\"\r\n	w !!,\"Process Statistics\",!\r\n	w !,\"Total Orders Processed: \"_+cnt\r\n	w !,\"Total Orders Flagged: \"_+chgcnt\r\n	w !,\"Start time: \",$$dm^%Zefnlib(sttime)\r\n	w !,\"End time: \",$$dm^%Zefnlib(endtime)\r\n	w !,\"Total time: \",$$zSecOut^%Zefnlib(tottime)\r\n	w !,\"Total global refs: \",endglo-stglo,\" (\",$J((endglo-stglo)/cnt,\"\",2),\" per order)\"\r\n	w !,\"Total lines: \",endlines-stlines,\" (\",$J((endlines-stlines)/cnt,\"\",2),\" per order)\"\r\n	i \'$$yn^%Zefnlic(\"Would you like to view a summary report\") q\r\n	d RTN^%ZeUSU \r\n	d rep\r\n	q\r\n	;\r\nrep	n oid,ordername,padid,patmrn,repcnt,stop\r\n	s:$d(^XCHLDORD(\"repcnt\"))=1 oid=^XCHLDORD(\"repcnt\") k ^XCHLDORD(\"repcnt\")\r\n	f  s oid=$o(^XCHLDORD(oid)) q:(oid=\"\")!(stop=1)  d\r\n	. s ordername=$$rpad($$znam(\"EAP\",$$zgetnp(\"ORD\",oid,40,1,99999)),40)\r\n	. s padid=$$^HUIDFN($$getn(\"ORD\",oid,1,\"1;1\"),\"EPT\")\r\n	. s patmrn=$$mpiGetID^LSSO(\"EPT\",padid,-1,50140,\"\",\"\",1,1)\r\n	. w !,\"Order ID|\"_oid_\"|Order:|\"_ordername_\"|MRN:|\"_patmrn\r\n	. s repcnt=repcnt+1	\r\n	. i repcnt>65524 s ^XCHLDORD(\"repcnt\")=oid w !!,\"Max displayed. Save to Excel & restart by typing d rep from your current Cache session.\" s stop=1\r\n	q	\r\n	;\r\nscrdots(cnt,dot,num,BKG) \r\n	s cnt=cnt+1\r\n        q:BKG \"\"\r\n        w:$X>70 !\r\n        i +num\'=0,cnt#num=0 w cnt\\num i 1\r\n        e  w:(+dot\'=0)&(cnt#dot=0) \".\"\r\n        q \"\"\r',NULL),(1551,'KP NCAL RE-POPULATE DIAGNOSIS I EPT 18400','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Data Corruption','Other','Server Only',0,'Open','2009-01-22 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking GA\\GA RA Docs\\RA 1551 - Inpatient, KP NCAL Re-Populate Diagnosis in I EPT 18400.doc#',NULL,'330754',NULL,' ','G336027','KP N CALIFORNIA REGION ',';******\r\n;run in CAM\r\n;set line 2 of I EPT 18400 to EDG record 41607\r\n;******\r\nept18400Reset() n INI,bid,eptID,eptDAT,BLU\r\n d ^HUINIT\r\n s INI=\"EPT\"\r\n s eptID=\"   1038682\"\r\n s eptDAT=60784\r\n i \'$$zlock^%Zefnlid(\"INI\",eptID) w !,\"No lock on EPT \"_eptID q  ;try to obtain lock EPT; if no lock, write EPT\r\n s bid=$$AuditBatch^EAETBT1()                     ;open batch\r\n s BLU=$$zputpcu^EAXLIB9(BLU,1,41607)                                                  \r\n s %=$$zputblu^EAXLIB9(\"EPT\",eptID,18400,2,eptDAT,BLU)                                    \r\n d %zIndex^EAXLIB4(\"EPT\",eptID,18400,\"\",41607,,,.TWR,,,eptDAT)\r\n d trigChronUpdate^CSSUPTRG(\"INI\",eptID)        ;trigger the update\r\n s %=$$zunlock^%Zefnlid(\"INI\",eptID)            ;Unlock EPT record\r\n d EndBatch^EAETBT1(bid)\r\n q\r\n\r\n\r\n______________Back Out____________\r\n\r\n\r\n;******\r\n;run in CAM\r\n;back out plan: delete line 2 of I EPT 18400\r\n;******\r\nept18400Delete() n INI,bid,eptID,eptDAT,BLU\r\n d ^HUINIT\r\n s INI=\"EPT\"\r\n s eptID=\"   1038682\"\r\n s eptDAT=60784\r\n i \'$$zlock^%Zefnlid(\"INI\",eptID) w !,\"No lock on EPT \"_eptID q  ;try to obtain lock EPT; if no lock, write EPT\r\n s bid=$$AuditBatch^EAETBT1()                     ;open batch\r\n s %=$$zdelLnGr^EALIB6(\"EPT\",eptID,18400,2,eptDAT)\r\n s BLU=$$zputpcu^EAXLIB9(BLU,1,2)                                                  \r\n s %=$$zputblu^EAXLIB9(\"EPT\",eptID,18400,0,eptDAT,BLU)                                    \r\n d %zIndex^EAXLIB4(\"EPT\",eptID,18400,1,0,,,.TWR,,,eptDAT)\r\n d trigChronUpdate^CSSUPTRG(\"INI\",eptID)        ;trigger the update\r\n s %=$$zunlock^%Zefnlid(\"INI\",eptID)            ;Unlock EPT record\r\n d EndBatch^EAETBT1(bid)\r\n q\r',NULL),(1552,'ENABLE ORD 140 FOR CSSCONFMAN',' ',NULL,'JENKINS, EMILY            ',' ',' ',' ',0,'Open','2009-01-10 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1552 - Enable ORD grp 140 for CSSCONFMAN.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ','addgroup^CSSCONFMAN\r',NULL),(1553,'PROBLEM LIST (LPL) RECORD CLEAN-UP FOR NCAL','EPICRX',NULL,'BRIES, MICHAEL            ','Other','Other','Server Only',0,'Open','2009-01-07 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\PROBLEM LIST CLEAN-UP FOR KP NCAL.doc#',NULL,'313866',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1554,'CHANGE PAST LOG STATUSES TO COMPLETE','OPTIME',NULL,'SAUDER, ADAM            ',' ','Other','Server Only',0,'Open','2009-01-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1554 - OpTime - Change Past Log Statuses to Complete.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ','ra1554 n orlID,bid,batchCnt\r\n	d %zidrule^EALIB6(\"ORL\")\r\n	s bid=$$AuditBatch^EAETBT1()\r\n	f  s orlID=$$zoID^EAXLIB2(\"ORL\",orlID) q:orlID=\"\"  d\r\n	. Q:$$getn^EAXLIB(\"ORL\",orlID,1,\"40;1\")\'<+$H\r\n	. Q:$$getn^EAXLIB(\"ORL\",orlID,1,\"412;24\")\'=3\r\n	. i \'$$zlock^%Zefnlid(\"ORL\",orlID) w !,\"Record locked: \"_orlID Q\r\n	. s %=$$updstat^ORLIB2(\"ORL\",orlID,5)\r\n	. s %=$$zunlock^%Zefnlid(\"ORL\",orlID)\r\n	. s batchCnt=batchCnt+1\r\n	. d:(batchCnt#100=0) FlushBatch^EAETBT1(bid)\r\n	d EndBatch^EAETBT1(bid)\r\n	Q\r',NULL),(1555,'KP NCAL RELEASE FLO RECORDS IN BULK','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Other','Other','Server Only',0,'Open','2009-02-05 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1555 - Inpatient, KP NCAL Release FLO records.doc#',NULL,'304709',NULL,' ','f117112','KP N CALIFORNIA REGION ',NULL,NULL),(1556,'INVALIDATE OLD REMOTE ADMISSION REPORTS','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ','Fax #:','608-216-9843',0,'Open','2009-01-12 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\1556 - Invalidate old remote admission reports.doc#',NULL,'338912',NULL,' ','F117112','KP N CALIFORNIA REGION ','zr\r\nzl\r\nclear24032(fix)  \r\n                n hno\r\n                f  s hno=$o(^EX(\"EPT\",24030,hno)) q:hno=\"\"  d\r\n                . k ept,dat\r\n                . s ept=$o(^EX(\"EPT\",24030,hno,ept))\r\n                . f  s dat=$$zoDTap^CSSLPP1(\"EPT\",ept,24030,dat) q:dat=\"\"  d\r\n                . . s lnCnt=$$getr^CSSISYNC2(\"EPT\",ept,0,dat,\"24030;2;1\")\r\n                . . q:lnCnt\']\"\"\r\n                . . f ln=1:1:lnCnt d\r\n                . . . i fix d  i 1\r\n                . . . . s clear=$$putr^CSSISYNC2(\"EPT\",ept,ln,dat,\"24030;2;1\",\"\")\r\n                . . . . i clear w !,\"EPT \",ept,\", dat \",dat,\", ln \",ln,\" cleared\"\r\n                . . . . e  w !,\"EPT \",ept,\", dat \",dat,\", ln \",ln,\" FAILED\"\r\n                . . . e  w !,\"EPT \",ept,\", dat \",dat,\", ln \",ln,\" will be attempted\"\r\n                q\r\n\r\nd clear24032(0) ; for read-only\r\n\r\n\r\n\r\n\r\n\r\n\r\n; d clear24032(1) ; to actually do it\r',NULL),(1557,'KP NCAL - FLAG EXISTING RELEASED STANDING CHILD ORDERS W/O CANCEL FILTER','CADENCE, EPICCARE',NULL,'SMITH, JACKIE            ','Other','Fix','Server Only',0,'Open','2009-01-12 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\~1000941.doc#',NULL,'320875',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1559,'CR - DII 114B - RE-EXTRACT OF ERRANT DATE COLUMNS','CLARITY',NULL,'PILLAI, KARTHIK            ','Data Corruption','Fix','Server Only',0,'Open','2009-01-15 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1559 - CR - DII 114B - RE-EXTRACT OF ERRANT DATE COLUMNS.doc#',NULL,'282152',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1560,'KPNCAL - ECQIGGM - REMOVE INCOMPLETE PATIENTS AND TELEPORT IN CORRECTED PATIENT FILES',' ',NULL,'SPINOZZI, MARIA            ','Data Corruption','Fix','Server Only',0,'Open','2009-01-16 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1560 ECQIGGM - Teleporter Issue.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1562,'RA - 1562 - CR - RE-EXTRACT MISSING DATA','CLARITY',NULL,'PILLAI, KARTHIK            ',' ','Fix','Server Only',0,'Open','2009-01-21 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA - 1562 - CR - RE-EXTRACT MISSING DATA.doc#',NULL,'304805',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1563,'KP NCAL REMOVE TRANSCRIPTION ATTACHED TO INCORRECT PATIENT','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Other','Not Applicable','Server Only',0,'Open','2009-01-23 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1563 - Inpatient, KP NCAL Remove Transcription from Incorrect Patient.doc#',NULL,'345211',NULL,' ','F117112','KP N CALIFORNIA REGION ','inpHNOErase(inpID,ln,hnoID) n INI,bid,hno2,eptID,eptCSN,TWR\r\n q:inpID=\"\"!(ln=\"\"!(hnoID=\"\"))\r\n d ^HUINIT\r\n s INI=\"INP\"\r\n s hno2=$$getn^EAXLIB(INI,inpID,ln,\"5000;4;1\")\r\n i hnoID\'=hno2 w !,\"Passed in HNO (\"_hnoID_\") doesn\'t match HNO on line \"_ln_\" (\"_hno2_\")\" q   ;quit if HNO passed in isn\'t same as HNO in specified line\r\n i \'$$zlock^%Zefnlid(INI,inpID) w !,\"No lock on INP \"_inpID q   ;try to obtain lock INP; if no lock, write INP\r\n s bid=$$AuditBatch^EAETBT1()                     		;open batch\r\n s %=$$zdelLnGr^EALIB6(INI,inpID,5000,ln,99999)\r\n d trigChronUpdate^CSSUPTRG(INI,inpID)        		;trigger the update\r\n s %=$$zunlock^%Zefnlid(INI,inpID)            		;Unlock INP record\r\n w !,\"HNO \"_hnoID_\" removed from INP \"_inpID\r\n i \'$$zlock^%Zefnlid(\"HNO\",hnoID) d  q   		;try to obtain lock HNO; if no lock, write HNO and quit\r\n . w !,\"No lock on HNO \"_hnoID\r\n . d EndBatch^EAETBT1(bid)\r\n s %=$$zkillnp^EAXLIB11(\"HNO\",hnoID,34020,99999,.TWR)	   		;delete I HNO 34020 - INP ID\r\n d %zIndex^EAXLIB4(\"HNO\",hnoID,34020,inpID,\"\",\"\",\"\",.TWR)\r\n s eptID=$$zgetnp^EAXLIB11(\"HNO\",hnoID,505,1,99999)\r\n s %=$$zkillnp^EAXLIB11(\"HNO\",hnoID,505,99999,.TWR)	   		;delete I HNO 505 - EPT ID\r\n d %zIndex^EAXLIB4(\"HNO\",hnoID,505,eptID,\"\",\"\",\"\",.TWR)\r\n s eptCSN=$$zgetnp^EAXLIB11(\"HNO\",hnoID,508,1,99999)\r\n s %=$$zkillnp^EAXLIB11(\"HNO\",hnoID,508,99999,.TWR)	   	;delete I HNO 508 - EPT CSN\r\n d %zIndex^EAXLIB4(\"HNO\",hnoID,508,eptCSN,\"\",\"\",\"\",.TWR)\r\n s %=$$zunlock^%Zefnlid(\"HNO\",hnoID)           				 ;Unlock HNO record\r\n w !,\"INP \"_inpID_\", EPT ID \"_eptID_\", and EPT CSN \"_eptCSN_\" have been removed from HNO \"_hnoID\r\n d EndBatch^EAETBT1(bid)\r\n q\r',NULL),(1567,'KP NCAL - HB ADD STOP TO ACCOUNTS WITH NON COVERED CHARGES','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ',' ','Fix','Server Only',0,'Open','2009-02-04 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1567 - Add Stop Bill to HARs with Non Covered Charges.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1568,'20090204 - KP NCAL - REMOVE HNO 40 INDEX FROM REGNNCM',' ',NULL,'AGARWAL, APOORVA            ','Data Corruption','Not Applicable','Server Only',0,'Open','2009-02-04 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1568.doc#',NULL,'324159',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1570,'KP NCAL - CLEAN UP PATIENT ON VERIFICATION QUEUE PRODCAM',' ',NULL,'SHARKEY, THOMAS            ',' ','Fix','Server Only',0,'Open','2009-02-10 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\KP NCAL - RA 1570 - Clean up verification queue.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ','\r221\rDelPatient(PatID,PatDAT,uid,moveFlag)   ;*CX add moveFlag\r\r \r\r222\r  n depID,eptID,changeFlag,OrderID  ;*CX 51655 add OrderID\r\r \r\r223\r  n moveString  ;*CX 51655\r\r \r\r224\r  s eptID=$$getidout(PatID,\"EPT\")  ; *dtw I754917 Changed $$strip to $$getidout\r\r \r\r225\r  q:eptID=\"\"\r\r \r\r226\r  i moveFlag=1 s moveString=\"VERIFY\"  i 1  ;*CX+1 51655\r\r \r\r227\r  e  s moveString=\"DISCHARGE\"\r\r \r\r228\r  s depID=\"\"  ;*CX 51655 comment out ,changeFlag=0\r\r \r\r229\r  f  s depID=$O(^RXQ(moveString,depID))  q:depID=\"\"  d\r\r \r\r230\r  . s OrderID=\"\",changeFlag=0  ;*CX+8 51655\r\r \r\r231\r  . f  s OrderID=$O(^RXQ(moveString,depID,eptID,OrderID))  q:OrderID=\"\"  d\r\r \r\r232\r  . . q:$$getiC(\"ORD\",OrderID,220,1,99999)\'=PatDAT\r\r \r\r233\r  . . k ^RXQ(moveString,depID,eptID,OrderID)\r\r \r\r234\r  . . i moveFlag\'=1,^RXQ(\"VERIFY\",depID,eptID,OrderID)]\"\" k ^RXQ(\"VERIFY\",depID,eptID,OrderID)\r\r \r\r235\r  . . s changeFlag=1\r\r \r\r236\r  . i moveFlag=1,changeFlag=1 d VQStatusUpdated(depID,eptID)\r\r \r\r237\r;. i $D(^RXQ(\"VERIFY\",depID,eptID))>0  k ^RXQ(\"VERIFY\",depID, eptID)  s changeFlag=1\r\r \r\r238\r;d:changeFlag=1 d VQStatusUpdated(depID,eptID) ;*MK 54528\r\r \r\r239\r  q\r\r \r\r',NULL),(1572,'UPDATE OPTIME EDIT TRAIL TO TRACK MORE ITEMS','OPTIME',NULL,'SAUDER, ADAM            ',' ','Enhancement','Server Only',0,'Open','2009-02-12 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1572 - OpTime - Update Edit Trail to Track More Items.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1573,'KP NCAL - TURN ON RESPONSE TIME TRACKING','CHRONICLES',NULL,'AGARWAL, APOORVA            ',' ','Fax #:','608-410-5963',0,'Open','2009-02-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1573 02192009 - KP NCAL Turn on response time tracking in EBM.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1575,'KP NCAL - MYCHART - ANNOTATE MESSAGES AND REMOVE FROM MEMBER VIEW','MYCHART',NULL,'PARK, KEVIN            ','Other',' ',' ',0,'Open','2009-03-04 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\20090304 - KP NCAL - MyChart - Annotate messages and remove from member view.doc#',NULL,'357495',NULL,' ','F117112','KP N CALIFORNIA REGION ',';The code associated with this RA is meant to only be shared with appropriate API engineers.\r\rzr\rzl\rtemp\r n wmgID,eptIDint,eptIDext,INI,ACCS,SET,OPT,LIST,bid,ok,NEW,homehere,name,text,line,linenum,ok,eptIDs,numEPTs,control,wprID,subject\r s INI=\"WMG\",ACCS=\"NR\",SET=1\r d ^EAINISET(INI,.ok,1) \r q:\'ok  \r d ^EAREC \r q:(LIST=\"\"!OPT)  \r s bid=$$AuditBatch^EAETBT1() \r w:bid\']\"\" !,\"Unable to open batch. Quitting...\" \r q:bid\']\"\"\r s NEW=1  \r f  s wmgID=$$nextID^WPLICCNT() q:wmgID=\"\"  d  \r . i \'$$zlock^WPLIB(\"WMG\",wmgID) d  q \r . . w !,\"Unable to obtain a lock on WMG record \",wmgID,\". Skipping...\"\r . s eptIDext=$$geti^EAXLIB1(\"WMG\",wmgID,40,1,99999)\r . s eptIDint=$$getidin^%ZefnliX(eptIDext,\"EPT\")\r . s name=$$znam^EAXLIB2(\"EPT\",eptIDint)\r . s wprID=$$geti^EAXLIB1(\"EPT\",eptIDint,28800,1,99999)\r . s homehere=($$zgtActDp^WPMSGLST()=$$zGetLOwn^WPMSGLST(\"EPT\",eptIDint))\r . w !\r . w:\'homehere !,\"For WMG record \",wmgID,\": EPT record \'\",eptIDint,\"\' (\",name,\")\",!,\"is not homed on this deployment.\",!,\"Skipping...\"\r . q:\'homehere\r . w !,\"For WMG record \",wmgID,\", EPT record \'\",eptIDint,\"\' (\",name,\"):\"\r . w !,\"Enter each line of text for the message. Press PageDown or NextScreen to quit.\"\r . s linenum=1\r . k text\r . f  d  q:(control=\"NSC\")\r . . w !,\"Line \"_linenum_\": \"\r . . s line=$$rd^LXUINICV(0,.control)\r . . s:((line]\"\")!(control\'=\"NSC\")) text(linenum)=line,linenum=linenum+1\r . s text(0)=linenum-1\r . i $$yn^WPMSGUTL(\"Replace text in WMG record \"_wmgID,0,1) d  \r . . s %=$$insrti^WPLIB(100,.text,1,,,wmgID,99999,\"WMG\")\r . . i $d(eptIDs(eptIDint))\'=1 d  \r . . . s eptIDs(eptIDint)=1\r . . . s numEPTs=numEPTs+1\r . i $$yn^WPMSGUTL(\"Replace subject in WMG record \"_wmgID,0,1) d  \r . . r !,\"New subject: \",subject\r . . s %=$$putn^EAXLIB(\"WMG\",wmgID,1,\"98;1\",subject)\r . . i $d(eptIDs(eptIDint))\'=1 d  \r . . . s eptIDs(eptIDint)=1\r . . . s numEPTs=numEPTs+1\r . i $$yn^WPMSGUTL(\"Mark WMG record \"_wmgID_\" as read by member\",0,1) d  \r . . d updateSt^WPUTMSG2(eptIDint,wmgID,1,$$time^%Zefnlib(2),eptIDext,wprID)\r . . i $d(eptIDs(eptIDint))\'=1 d  \r . . . s eptIDs(eptIDint)=1\r . . . s numEPTs=numEPTs+1\r . i $$yn^WPMSGUTL(\"Remove WMG record \"_wmgID_\" from member view\",0,1) d  \r . . d updateSt^WPUTMSG2(eptIDint,wmgID,2,$$time^%Zefnlib(2),eptIDext,wprID)\r . . i $d(eptIDs(eptIDint))\'=1 d  \r . . . s eptIDs(eptIDint)=1\r . . . s numEPTs=numEPTs+1\r . i $$yn^WPMSGUTL(\"Repopulate patient ID \'\"_eptIDext_\"\' (\"_name_\") into WMG record \"_wmgID,0,1) d  \r . . s %=$$insrti^WPLIB(40,eptIDext,,,,wmgID,99999,\"WMG\")\r . . i $d(eptIDs(eptIDint))\'=1 d  \r . . . s eptIDs(eptIDint)=1\r . . . s numEPTs=numEPTs+1\r . s %=$$zunlock^WPLIB(\"WMG\",wmgID)\r . d:numEPTs#100=0 FlushBatch^EAETBT1(bid)\r d EndBatch^EAETBT1(bid) \r w:numEPTs>0 !,!,\"Triggering Chart Sync messages...\"\r s eptIDint=\"\" \r f  s eptIDint=$o(eptIDs(eptIDint)) q:eptIDint=\"\"  d  \r . w !,\"Triggering update for \'\",eptIDint,\"\'.\"\r . d genTrigger^CSSGENTRG(\"EPT\",eptIDint,\"Manual clean-up of MyChart message(s)\")\r w !,\"Done.\"\r q\r\rd temp\r',NULL),(1577,'0225-NCAL-AllVersions-SLG357679','PC SYSTEMS',NULL,'FUGATE, CHRIS            ',' ','Enhancement','Client Only',0,'Open','2009-02-24 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0225-NCAL-AllVersions-SLG357679.doc#',NULL,' ',NULL,'144215','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1578,'0226-NCAL-SPR07SLG356704','REGISTRATION, TAPESTRY',NULL,'DE BOISBLANC, PIERRE            ','Data Corruption','Fix','Server Only',0,'Open','2009-02-26 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1578 0226-NCAL-Spr07SLG356704.doc#',NULL,'356704',NULL,' ','F117112','KP N CALIFORNIA REGION ','; Resolution code for RA 1578 / SLG 356704\r\n; The code associated with this RA is meant to be run only by Epic.\r\n; The code associated with this RA is meant to only be shared with appropriate API engineers.\r\n; It will be run on a subset of coverages created beforehand using the Programmer Utilities\r\n\r\nInitialize Code:\r\n\r\ns zbid=$$AuditBatch^EAETBT1() s %EA(\"E\",\"Delay Clarity Extraction\")=1 s %=$$DisableRegEDITrigger^PASETIT6(\"\",\"\",\"\",zbid)\r\n\r\nMain: \r\n\r\ni $$zlock^NXPLCNV2(\"CVG\",ID) s %=$$zputnp^PGACTCR(\"CVG\",ID,470,1,99999,6) s %=$$zunlock^NXPLCNV2(\"CVG\",ID) s cnt=cnt+1  i cnt#1000=0 D FlushBatch^EAETBT1(zbid) \r\n\r\nEnd: \r\n\r\nd EndBatch^EAETBT1(zbid)\r',NULL),(1579,'0227-NCAL-Spr07SLG357496','INPATIENT EMR',NULL,'PINGEL, ROBYN            ','Other','Enhancement','Server Only',0,'Open','2009-02-25 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 0227-NCAL-Spr07SLG357496.doc#',NULL,'357496',NULL,' ','F117112','KP N CALIFORNIA REGION ','The code associated with this RA is meant to be shared with Frank Bellah from NCAL.\r\n\r\n$p($$FloData^JEDCEN(FLOID),\"[\",1)\r',NULL),(1580,'BARCODE MODIFY PROGRAMMING POINT TO FORMAT ZIMMER BARCODES','OPTIME',NULL,'SAUDER, ADAM            ',' ','Fix','Server Only',0,'Open','2009-02-25 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1580 - OpTime - Barcode Modify Programming Point to Format Zimmer Barcodes.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1582,'0227-NCAL-Spr07SLG359578','ADT',NULL,'Jeff Ver Burg           ','Custom Code','Other','Server',0,'Open','2009-02-26 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1582 0227-NCAL-Spr07SLG359578.doc#',NULL,'359578',NULL,' ','F117112','Kaiser Northern California','The code associated with this RA is meant to only be shared with appropriate API engineers.\r\n===========================================================================================\r\nThis code should be run on each of the 6 \"baby\" instances.\r\n\r\nOnce in Chronicles > DEP > Programmer Option > Selected Records, the fields should be completed as folows:\r\n\r\n\r\nInstructions? N//\r\nInitialization code: s zbid=$$AuditBatch^EAETBT1()\r\nMain code: s %=$$putn^PACDB(\"DEP\",ID,1,\"7000;9\",2,\"\",24605),cnt=cnt+1  i cnt#100=0 D FlushBatch^EAETBT1(zbid)\r\nTermination code: d EndBatch^EAETBT1(zbid)\r\nWhich Effective Dates: 1-Stop after variable \"GOT\" is defined\r\nDepartments: set <set name>                                                          \r\n\r\n\r\n\r\n\r\n\r\nBackout Procedure\r\n=================\r\nReplace the Main code entry with:\r\ns %=$$putn^PACDB(\"DEP\",ID,1,\"7000;9\",\"\",\"\",24605),cnt=cnt+1  i cnt#100=0 D FlushBatch^EAETBT1(zbid)\r\n\r',NULL),(1583,'0303-NCAL-SPR07SLG346728','INPATIENT EMR',NULL,'SPINOZZI, MARIA            ','Other','Enhancement',' ',0,'Open','2009-02-27 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0303-NCAL-SPR07SLG346728.doc#',NULL,'346728',NULL,' ','F117112','KP N CALIFORNIA REGION ',';The code associated with this RA is meant to be shared with Aditi Vakil from NCAL.\r\rReference SLG 346728\r\rFigure 1. Inclusive Case Single\rs ZER=$S($$getr^EALIB2(\"EPT\",PATID,1,PATDAT,\"10100;1\")=xxx:0,1:1)\r\rFigure 2. Inclusive Case  Mulitple\rs ZER=$S(\"^xxx^xxx^\"[(\"^\"_$$getr^EALIB2(\"EPT\",PATID,1,PATDAT,\"10100;1\")_\"^\"):0,1:1)\r\rFigure 3. Exclusive Case Single\rs ZER=$S($$getr^EALIB2(\"EPT\",PATID,1,PATDAT,\"10100;1\")=xxx:1,1:0)\r\rFigure 4. Exclusive Case Multiple\rs ZER=$S(\"^xxx^xxx^\"[(\"^\"_$$getr^EALIB2(\"EPT\",PATID,1,PATDAT,\"10100;1\")_\"^\"):1,1:0)\r\rFigure 5. Inclusive Example A\rs ZER=$S($$getr^EALIB2(\"EPT\",PATID,1,PATDAT,\"10100;1\")=4:0,1:1)\r\rFigure 6. Inclusive Example B\rs ZER=$S(\"^3^9^\"[(\"^\"_$$getr^EALIB2(\"EPT\",PATID,1,PATDAT,\"10100;1\")_\"^\"):0,1:1)\r\rFigure 7. Exclusive Example A\rs ZER=$S($$getr^EALIB2(\"EPT\",PATID,1,PATDAT,\"10100;1\")=1:1,1:0)\r\rFigure 8. Exclusive Example B\rs ZER=$S(\"^1^9^\"[(\"^\"_$$getr^EALIB2(\"EPT\",PATID,1,PATDAT,\"10100;1\")_\"^\"):1,1:0)\r',NULL),(1586,'UPDATE SHADOW GRP ETR 80 LINE COUNTS','RESOLUTE',NULL,'GONZALEZ, RYAN            ',' ',' ','Server Only',0,'Open','2009-03-02 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\UPDATE SHADOW GRP ETR 80 LINE COUNTS.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1587,'KP NCAL IP - ORD REC DUPLICATE NAVIGATOR RECORDS','INPATIENT EMR',NULL,'SPINOZZI, MARIA            ','Other',' ',' ',0,'Open','2009-03-03 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\KP NCAL IP - Ord Rec Duplicate Navigator Records.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1588,'INPATIENT, KP NCAL REMOVE BAD LOCKS FOR DOC FLOWSHEETS','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Other','Other','Server Only',0,'Open','2009-03-03 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1588 - Inpatient, KP NCAL Remove Bad Locks for Doc Flowsheets.doc#',NULL,'361627',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1591,'0305-NCAL-SPR07SLG324072','CHART SYNC',NULL,'JENKINS, EMILY            ',' ',' ','Server Only',0,'Open','2009-03-05 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1591 0306-NCAL-Spr07SLG324072.doc#',NULL,'324072',NULL,' ','F117112','KP N CALIFORNIA REGION ',';Intended for Margaret Lin from N CAL\r\rs fix=0\rzr\rzl\rhospital(fix)\r	k ept,dat,text,si10100,it10115,it18852,uci,status,cnt,bid \r	s s=\"|\"\r	w !,\"EPT ID|CID|DAT|UCI|status|status comment\"\r	s text=\"will be\"\r	i fix s text=\"has been\",bid=$$AuditBatch^EAETBT1()\r	s actdep=$$zgtActDp^CSSAPPLY()\r	f  s ept=$$znxCxID^CSSISYNC3(\"EPT\",30,3,ept) q:ept=\"\"  d\r	. k update\r	. f  s dat=$$znxCxDt^CSSISYNC3(\"EPT\",30,3,ept,dat) q:dat=\"\"  d\r	. . s cOwn=$$zGetCOwn^CSSCMND(\"EPT\",ept,dat)\r	. . q:cOwn\'=actdep\r	. . s si10100=$$zgetbll^EAXLIB(\"EPT\",ept,10100,dat)\r	. . s it10115=$$zgetpcl^EAXLIB(si10100,2,1)\r	. . q:it10115]\"\"\r	. . s it18852=$$zgetpcl^EAXLIB(si10100,3,1)\r	. . s cid=$$zGtCID^CSSAPPLY(\"EPT\",ept)\r	. . s uci=$$zDAT2UCI^EAXLIB(\"EPT\",ept,dat)\r	. . i it18852=1 d  q\r	. . . s status=1\r	. . . i fix d  i 1\r	. . . . s %=$$insrti^CSSCONFLAUTO(10115,3,\"\",\"\",\"\",ept,dat,\"EPT\")\r	. . . . s cnt=cnt+1\r	. . . . s update=1\r	. . . . d FlushBatch^EAETBT1(bid)\r	. . . w !,ept,s,cid,s,dat,s,uci,s,status,s,\"item 10115 \",text,\" set to 3\"\r	. . i it18852=4 d  q\r	. . . s status=2\r	. . . i fix d  i 1\r	. . . . s %=$$insrti^CSSCONFLAUTO(10115,6,\"\",\"\",\"\",ept,dat,\"EPT\")\r	. . . . s cnt=cnt+1\r	. . . . s update=1\r	. . . . d FlushBatch^EAETBT1(bid)\r	. . . w !,ept,s,cid,s,dat,s,uci,s,status,s,\"item 10115 \",text,\" set to 6\"\r	. . i it18852]\"\" d  q                            ; 18852 has an unexpected value\r	. . . s status=4\r	. . . w !,ept,s,cid,s,dat,s,uci,s,status,s,\"item 18852 is invalid, no change\"\r	. . s ADTcount=$$getADTEvents^JRPTADT(.ADTEvents,ept,dat) ; both 10115 and 18852 are null, try to find the ADT event\r	. . i ADTcount>0 d  i 1\r	. . . s status=5\r	. . . w !,ept,s,cid,s,dat,s,uci,s,status,s,\"ADT events found, requires further analysis\"\r	. . e  d                ;no ADT event, should be set as a cancelled HOV visit\r	. . . s status=3\r	. . . i fix d  i 1\r	. . . . s %=$$insrti^CSSCONFLAUTO(10115,6,\"\",\"\",\"\",ept,dat,\"EPT\")\r	. . . . s %=$$insrti^CSSCONFLAUTO(18852,3,\"\",\"\",\"\",ept,dat,\"EPT\")\r	. . . . s cnt=cnt+1\r	. . . . s update=1\r	. . . . d FlushBatch^EAETBT1(bid)\r	. . . w !,ept,s,cid,s,dat,s,uci,s,status,s,\"item 10115 \",text,\" set to 6 and item 18852 \",text,\" set to 3\"\r	. i fix,update d trigUpdate^CSSUPTRG(\"EPT\",ept)\r	i fix d EndBatch^EAETBT1(bid)\r	q\r\rd hospital(fix)\r',NULL),(1594,'ADD TEST PATIENT FLAG TP 22 PATIENTS','REGISTRATION',NULL,'VER BURG, JEFF            ','Other      ','Fix','Server Only',0,'Open','2009-03-13 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0316-NCAL-Spr07SLG306521.doc#',NULL,'306521',NULL,' ','F117112','KP N CALIFORNIA REGION ',';The code associated with this RA is meant to be shared with Mary Sears / Susan Gall Pfeifer from KP NCAL.\r \r\r\r\rCode to be run using the Programmer Options in Chronicles:\r==========================================================\r\rInitialization code: \rd ^HUINIT s batchID=$$AuditBatch^EAETBT1()\rMain code:\rs %=$$zlock^PAUHOVBT(\"EPT\",ID),v(0)=1,v(1)=103,%=$$insrti^PASETITM(101,.v,2,\"\",\"\",ID,99999,\"EPT\"),%=$$zunlock^PAUHOVBT(\"EPT\",ID)\rTermination code: \rd EndBatch^EAETBT1(batchID)\r\r',NULL),(1595,'Add ADT Linking Setting to Allow Scheduling Cases Across Revenue Locations','OPTIME',NULL,'SAUDER, ADAM            ',' ','Other','Server Only',0,'Open','2009-03-13 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1595 - OpTime - Add ADT Linking Setting to Allow Scheduling Cases Across Rev Locations.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1596,'ORDER VALIDATION LPP FOR PREVENTING SIGN AND HOLD OF OP MODE ORDERS','OPTIME',NULL,'SAUDER, ADAM            ',' ','Fix','Server Only',0,'Open','2009-03-17 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1596 - OpTime - Order Validation LPP For Preventing Sign and Hold of OP Mode Orders.doc#',NULL,'361607',NULL,' ','f117112','KP N CALIFORNIA REGION ',NULL,NULL),(1597,'2009-03-20 INFECTION LOADING FOR NCAL','ADT',NULL,'BUCHANAN, MICHAEL            ',' ','Other','Server Only',0,'Open','2009-03-27 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\2009-03-27 infection historical data load.doc#',NULL,'368383',NULL,' ','F117112','KP N CALIFORNIA REGION ','***********************************************************************************************\r* The code associated with this RA is meant to only be shared with appropriate API engineers. *\r***********************************************************************************************\r\rPBINFCNLD ;; ;Mon Mar 30, 2009 12:02 PM\r	;;#lib#HULIB/CSULIB\r	; Copyright (C) 2009-2009 Epic Systems Corporation\r	;*********************************************************************\r	; TITLE:   PBINFCNLD\r	; PURPOSE: Infection item load tool\r	; AUTHOR:  ME Buchanan\r	; CALLABLE TAGS:\r	;    infectionLoad - Tag to load infection information\r	; REVISION HISTORY:\r	; *MEB 2/4/09 I7511693 - Created\r	;\r	;---------\r	; NAME:         infectionLoad (PUBLIC)\r	; DESCRIPTION:  Set items in no-add table 10460\r	; KEYWORDS:     infection\r	; CALLED BY:    Humans\r	; PARAMETERS:\r	;  Name (I/O/IO,REQ/OPT,DEFAULT:default value)-<Parameter Description>\r	;  file (I/REQ): File name holding the interesting data, fields separated by commas in the file\r	;  user (I/REQ): The user to associate as setting the infection data\r	;  iit (I/OPT): An identity type used to specify patients\r	;  COMMIT (I/OPT): If null, just check the file, if true then set the data\r	;  throttleRecord (I/OPT): If committing a large set, throttle using this E1J\r	; RETURNS:\r	; ASSUMES:\r	; SIDE EFFECTS: EPT items 10460-6\r	; Format of \"file\":\r	;   First field is the EPT id, specified by MRN (has to match the IIT given to the function below) or by unpadded ID.\r	;   Second field is the infection.  This is a category entry in EPT-10460.\r	;   Third field is a date.  This is the starting date for the infection.  $$ din is called to parse it.\rinfectionLoad(file,user,iit,COMMIT,throttleRecord) n jobInfo,isPaused,test,bid,count,fHndl,err,line,extid,inf,date,intid,lock,din,dininst,OK ; canSync\r	;\r	d ^EAINISET(\"EPT\",.OK)\r	i \'OK d  q\r	. w !,\"You do not have permission to access the patient master file.\"\r	;\r	d fileCheck(file,.OK) q:\'OK\r	d userCheck(user,.OK) q:\'OK\r	i iit]\"\" d iitCheck(iit,.OK) q:\'OK\r	i throttleRecord d throttleCheck(throttleRecord,.OK) q:\'OK\r	;\r	;;;s canSync=$s($$ isCSynON():$d(^ED3(\"EPT\",10460)),1:0)\r	;\r	w !,\"This will read infection information from the file named:\",!,?5,file\r	i COMMIT d  i 1\r	. w !,\"and set it for no-add the infection table in the patient charts specified.\"\r	e  d\r	. w !,\"and test to see if it is correct and acceptable.\"\r	w !,\"The patients will be specified according to \"\r	i iit]\"\" w \"identity type \",iit,\"-\",$$znam^EAXLIB2(\"IIT\",iit) i 1\r	e  w \"the record number.  Note that you\",!,\"can use identity types instead.\"\r	i COMMIT d\r	. w !,\"The infection will be listed as set by user \",user,\"-\",$$znam^EAXLIB2(\"EMP\",$$getidin^AIE(user,\"EMP\")),\".\"\r	;\r	i COMMIT d\r	. s OK=$$yn^AIE(\"You have checked this file with commit mode turned off\",0)\r	. q:OK\r	. s test=$$yn^AIE(\"Check the file now without setting data\",1)\r	. i test k COMMIT\r	;\r	i COMMIT d\r	. s OK=$$yn^AIE(\"Proceed with the import\")\r	. i \'OK w !,\"No import performed\" k COMMIT\r	;\r	s fHndl=$$fopen^AICONV(file,\"R\",.err)\r	i err]\"\" w !,err q\r	;\r	i COMMIT d\r	. s bid=$$AuditBatch^EAETBT1()\r	. d:\'%EA(\"E\",\"HUINIT\") ^HUINIT ;ZQN 728448\r	. s %EA(\"E\",\"DELAY CLARITY EXTRACTION\")=1\r	. s %=$$DisableRegEDITrigger^HULIB2() ; Daniel asked that I turn off triggers in case of a future version.\r	;\r	f  u fHndl s line=$$fread^AICONV(.err) u 0 q:err]\"\"  d  g:isPaused done\r	. s extid=$p(line,\",\",1) q:extid=\"\"\r	. s intid=$$findEpt(extid,iit) q:intid=\"\"\r	. s inf=$p(line,\",\",2)\r	. i inf\'?1N.N s inf=$o(^ED(\"EPT\",10375,\"A\",inf,\"\")) ; look up the abbreviation for Peter\r	. q:\'$$isInfctnValid(inf)\r	. s date=$p(line,\",\",3,10)\r	. s din=$$din^AIHLFMTS(date)\r	. s dininst=din*86400\r	. ;\r	. i $$patUnrslvdInf(intid,inf) d  q\r	. . w !,\"* Unresolved infection \"_inf_\" already present in patient \"_extid_\".\"\r	. ;\r	. q:\'COMMIT  ;Finished testing phase\r	. ;\r	. s lock=$$zlock^AIE(\"EPT\",intid,\"\",\"REG\") i \'lock w !,\"* No lock available on patient \"_extid_\".\" q\r	. ;;;s %=$$addInfPat^ASLIFN14(inf,intid,dininst,user)\r	. s %=$$addInfPat(inf,intid,dininst,user)\r	. s %=$$zunlock^AIE(\"EPT\",intid,\"REG\")\r	. ;\r	. s count=count+1\r	. i count>100 d\r	. . d FlushBatch^EAETBT1(bid)\r	. . i throttleRecord]\"\" s %=$$zThrottl^AIOUTQ(\"E1J\",throttleRecord,.jobInfo,\"\",1,.isPaused)\r	. . s count=0\rdone i COMMIT d EndBatch^EAETBT1(bid)\r	i err]\"\" w !,err\r	s %=$$fclose^AICONV(fHndl)\r	i isPaused d\r	. w !,\"The tool has stopped prematurely because the environment was set to pause.\"\r	. w !,\"You may restart it when appropriate.\"\r	q\r	;\r	; NAME:         addInfPat (PUBLIC)\r	; DESCRIPTION:  adds one patient level infection\r	; KEYWORDS:     infection,table,add,patient\r	; CALLED BY:    addInf,infectionLoad^PBINFCNLD\r	; PARAMETERS:\r	;  cat (I,REQ) - infection category value from EPT-10375\r	;  eptID (I,REQ) - internal ID of patient to add infection for\r	;  inst (I,OPT,DEFAULT:null) - instant to mark infection as added\r	;  user (I,OPT,DEFAULT:null) - external ID of user to mark as adding infection\r	; RETURNS:      1 if successful, 0 otherwise\r	; ASSUMES:      you have checked the category subnode to determine infection type\r	; SIDE EFFECTS: none\r	; *dpr 02/09 I7511281 - created\raddInfPat(cat,eptID,inst,user)\r	q:(cat=\"\")!(eptID=\"\") 0\r	n line,bl,bl0,pc\r	s bl0=$$zgetblu^EAXLIB9(\"EPT\",eptID,10460,0)\r	s line=$$zmaxunl^EAXLIB9(bl0)+1  ;get a new line from itm EPT 10460\r	s bl=$$zputpcu^EAXLIB9(bl,1,cat)   ; EPT-10460\r	s bl=$$zputpcu^EAXLIB9(bl,2,inst)  ; EPT-10461\r	s bl=$$zputpcu^EAXLIB9(bl,3,user)  ; EPT-10462\r	s %=$$zputblu^EAXLIB9(\"EPT\",eptID,10460,line,99999,bl)\r	; update line counts and index\r	f pc=1:1:3 s bl0=$$zputpcu^EAXLIB9(bl0,pc,line)\r	s %=$$zputblu^EAXLIB9(\"EPT\",eptID,10460,0,99999,bl0)\r	d %zIndex^JCAREPLN2(\"EPT\",eptID,10462,\"\",user)  ; only EPT-10462 is indexed\r	q 1\r	;\r	;---------\r	; NAME:         userCheck (PRIVATE)\r	; DESCRIPTION:  Make sure the user is valid\r	; KEYWORDS:\r	; CALLED BY:    infectionLoad\r	; PARAMETERS:\r	;  user (I/REQ)  unpadded id\r	;  ok (O)  1 if the user is fine, 0 if the user is bad or undefined\ruserCheck(user,ok) n userin\r	s ok=0\r	i user=\"\" d userError q\r	s userin=$$getidin^AIE(user,\"EMP\")\r	i \'$$zisR^AIF(\"EMP\",userin) d userError q\r	s ok=1\r	q\r	;---------\r	; NAME:         userError (PRIVATE)\r	; DESCRIPTION:  Print an interesting message\r	; KEYWORDS:\r	; CALLED BY:    userCheck\ruserError w !,\"You must specify a valid user.\" q\r	;---------\r	; NAME:         iitCheck (PRIVATE)\r	; DESCRIPTION:  Make sure the iit is valid\r	; KEYWORDS:\r	; CALLED BY:    infectionLoad\r	; PARAMETERS:\r	;  iit (I/REQ)  identity type id\r	;  ok (O)  1 if the user is fine, 0 if the user is bad or undefined\riitCheck(iit,ok) s ok=0\r	i \'$$zisR^AIF(\"IIT\",iit) w !,\"There is no IIT (Identity type) record number \",iit,\".\" q\r	i $$zgetnp^EAXLIB11(\"IIT\",iit,27,1)\'=1 w !,\"The identity type \",iit,\"-\",$$znam^EAXLIB2(\"IIT\",iit),\" is not for patients.\" q  ;IIT-27\r	s ok=1\r	q\r	;---------\r	; NAME:         throttleCheck (PRIVATE)\r	; DESCRIPTION:  Make sure the E1J is valid\r	; KEYWORDS:\r	; CALLED BY:    infectionLoad\r	; PARAMETERS:\r	;  iit (I/REQ)  identity type id\r	;  ok (O)  1 if the user is fine, 0 if the user is bad or undefined\rthrottleCheck(e1j,ok) s ok=0\r	i \'$$zisR^AIF(\"E1J\",e1j) w !,\"There is no E1J (throttling) record number \",e1j,\".\" q\r	s ok=1\r	q\r	;---------\r	; NAME:         fileCheck (PRIVATE)\r	; DESCRIPTION:  Make sure the file name is valid\r	; KEYWORDS:\r	; CALLED BY:    infectionLoad\r	; PARAMETERS:\r	;  filename (I/REQ)  file name\r	;  ok (O)  1 if the user is fine, 0 if the user is bad or undefined\rfileCheck(filename,ok) n test,err\r	s ok=0\r	i filename=\"\" w !,\"You must specify a file name.\" q\r	i \'$$fsyntax^%Zefnlib(filename,1) w !,\"You must specify a valid file name.\" q\r	s test=$$fopen^AICONV(filename,\"R\",.err)\r	i err]\"\" w !,\"An attempt to access the file named:\",!,?4,filename,!,\"produced the error: \",err,\".\" q\r	s %=$$fclose^AICONV(test)\r	s ok=1\r	q\r	;---------\r	; NAME:         findEpt (PRIVATE)\r	; DESCRIPTION:  Translate external id to padded internal id\r	; KEYWORDS:\r	; CALLED BY:    infectionLoad\r	; PARAMETERS:\r	;  extid (I/REQ)  external identifier\r	;  iit (I)  Identity type (if null, assume it is the unpadded .1 in extid)\r	;  canSync (I/OPT) if group 10460 is enabled for chart synch\r	; RETURNS: Padded internal ID or null\rfindEpt(extid,iit,canSync) n intid,err\r	i iit=\"\" d  q intid\r	. s intid=$$getidin^AIE(extid,\"EPT\")\r	. i \'$$zisR^AIF(\"EPT\",intid) d  q\r	. . w !,\"There is no patient record identified by \",extid,\".\"\r	. . s intid=\"\"\r	. i canSync,\'$$zisLHome^CSSSRVC(\"EPT\",intid) d  q\r	. . w !,\"The patient identified by \",extid,\" is remote and won\'t be updated here.\"\r	. . s intid=\"\"\r	s intid=$$mpiIntID^ASLILPP1(\"EPT\",-1,iit,extid,.err,+$H,0,\"\")\r	i err]\"\" d\r	. w !,\"The identifier \",extid,\" does not correspond to a patient record.\"\r	. s intid=\"\"\r	q intid\r	;---------\r	; NAME:         isInfctnValid (PRIVATE)\r	; DESCRIPTION:  Make sure the infection is in list EPT 10460\r	; KEYWORDS:\r	; CALLED BY:    infectionLoad\r	; PARAMETERS:\r	;  inf (I/REQ)  infection category value\r	; RETURNS: 1 if valid, 0 if not\r	; The subnode of the category identifies whether it is meant for no-add or encounter-level infection reporting.\r	; 1 is encounter level, 2 is patient level\risInfctnValid(inf) i \'$$zisCat^AIWAIV(inf,\"EPT\",10460) d  q 0\r	. w !,\"The infection category value \",inf,\" does not exist.\"\r	i $$zgetCat^AIGMSG2(inf,1,\"EPT\",10375,\"\",\"\",1)\'=2 d  q 0\r	. w !,\"The infection category value \",inf,\" is meant for encounters only.\"\r	q 1\r	;---------\r	; NAME:         patUnrslvdInf (PRIVATE)\r	; DESCRIPTION:  Make sure the infection is not listed as unresolved already\r	; KEYWORDS:\r	; CALLED BY:    infectionLoad\r	; PARAMETERS:\r	;  pat (I/REQ)  patient ID, padded\r	;  inf (I/REQ)  infection category value\r	; RETURNS: 1 if already present, \"\" if not\rpatUnrslvdInf(pat,inf) n list,line,already\r	s %=$$getInfection^JFSPPT4(pat,\"\",\"\",1,\"\",.list)\r	f line=1:1:list(0) i list(line)=inf s already=1 q\r	q already\r	;\r	; Backout plan:\r	; 1. Make a table of all the charts with infections.  Store that into the global ^XPBINFCN\r	;    to make recovery easy.  Just store the number of lines.\r	;    d prepareBackout()\r	; 2. Do the load.\r	; 3. If you don\'t like the results, call a tag to remove any lines that go beyond the line\r	;    count stored in ^XPBINFCN.\r	;    d backout(commit,user)\r	; 4. When everything is fine, erase the global.\r	;    d noBackout\r	;\r	; List the current infection holders\rcurrentList(fileName,noIndex,saveCounts) ;\r	s noIndex=1 ; In ic-dev I can\'t trust the index\r	n id,INI,emp,fHndl,error,bl0,line\r	i fileName]\"\" d  q:error\r	. s fHndl=$$fopen^CSMUMNU(fileName,\"W\",.error)\r	. i error w !,\"Error: \",error\r	i fHndl]\"\" u fHndl\r	d ^EAINISET(\"EPT\",\"\",1)\r	i noIndex d  i 1\r	. f  s id=$$zoID^EAXLIB2(\"EPT\",id) q:id=\"\"  d\r	. . s bl0=$$zgetblu^EAXLIB9(\"EPT\",id,10460,0) q:bl0=\"\"\r	. . s line=$$zmaxunl^EAXLIB9(bl0)\r	. . q:+line=0\r	. . i saveCounts s ^XPBINFCN(id)=line\r	. . s idout=$$getidout^ASMIFL7(id,\"EPT\")\r	. . f i=1:1:line d\r	. . . s bl=$$zgetblu^EAXLIB9(\"EPT\",id,10460,i)\r	. . . d infPrint(bl,idout)\r	e  d\r	. f  s emp=$$znxIx^EAXLIB5(\"EPT\",10462,emp) q:emp=\"\"  d\r	. . s id=$$znxIxID^EAXLIB5(\"EPT\",10462,emp,id) q:id=\"\"  d\r	. . . s idout=$$getidout^ASMIFL7(id,\"EPT\")\r	. . . s bl0=$$zgetblu^EAXLIB9(\"EPT\",id,10460,0)\r	. . . s line=$$zmaxunl^EAXLIB9(bl0)\r	. . . f i=1:1:line d\r	. . . . s bl=$$zgetblu^EAXLIB9(\"EPT\",id,10460,i)\r	. . . . q:$$zgetpcu^EAXLIB9(bl,3)\'=emp\r	. . . . d infPrint(bl,idout)\r	i fHndl]\"\" u 0 s %=$$fclose^CSMUMNU(fHndl)\r	q\r	;\rinfPrint(si,idOut)\r	w !,idOut,\",\"\r	w $$zgetpcu^EAXLIB9(bl,1),\",\" ; infection type\r	w $$zgetpcu^EAXLIB9(bl,2),\",\" ; added instant\r	w $$zgetpcu^EAXLIB9(bl,3),\",\" ; added user\r	w $$zgetpcu^EAXLIB9(bl,4),\",\" ; resolved instant\r	w $$zgetpcu^EAXLIB9(bl,5),\",\" ; resolved user\r	w $$zgetpcu^EAXLIB9(bl,6) ; comment\r	q\r	; Backout:\r	; If we know how many lines there are at the start, we can just scan for where\r	; the number of lines grew.  Then erase those extra lines.\rprepareBackout() ;\r	k ^XPBINFCN\r	d currentList(\"\",1,1)\r	q\r	; Erase the new lines, but be sure to report what is being erased.\r	; Since someone could have set the data outside the tool, confirm through the user in the loader.\r	; Should it be allowed to proceed if user is empty?\rbackout(commit,user,file) n id,newlines,bl0,line,idout,bl,fHndl,error,emp,NOKILL,bid\r	i file]\"\" d  q:error\r	. s fHndl=$$fopen^CSMUMNU(fileName,\"W\",.error)\r	. i error w !,\"Error: \",error\r	;\r	i commit d\r	. s bid=$$AuditBatch^EAETBT1()\r	. d:\'%EA(\"E\",\"HUINIT\") ^HUINIT ;ZQN 728448\r	. s %EA(\"E\",\"DELAY CLARITY EXTRACTION\")=1\r	. s %=$$DisableRegEDITrigger^HULIB2() ; Daniel asked that I turn off triggers in case of a future version.\r	;\r	i fHndl]\"\" u fHndl\r	f  s id=$o(^XPBINFCN(id)) q:id=\"\"  d\r	. s newlines=^XPBINFCN(id)\r	. s bl0=$$zgetblu^EAXLIB9(\"EPT\",id,10460,0) q:bl0=\"\"\r	. s line=$$zmaxunl^EAXLIB9(bl0)\r	. i line=newlines q\r	. s idout=$$getidout^ASMIFL7(id,\"EPT\")\r	. f i=newlines+1:1:line d\r	. . s bl=$$zgetblu^EAXLIB9(\"EPT\",id,10460,i)\r	. . d infPrint(bl,idout)\r	. i commit d\r	. . s lock=$$zlock^AIE(\"EPT\",id,\"\",\"REG\") i \'lock w !,\"* No lock available on patient \"_extid_\".\" q\r	. . f i=line:-1:newlines+1 d ; reverse order makes erasing faster\r	. . . s emp=$$geti^EALIB(\"EPT\",id,10462,i)\r	. . . q:emp\'=user  ; Someone else set this data, don\'t touch it.\r	. . . s %=$$zdelLnGr^EALIB6(\"EPT\",id,10460,i,99999)\r	. . s %=$$zunlock^AIE(\"EPT\",id,\"REG\")\r	; Now the case where the EPT was not in the list:\r	; We know the EMP index for those is up to date.\r	s id=\"\"\r	f  s id=$$znxIxID^EAXLIB5(\"EPT\",10462,user,id) q:id=\"\"  d\r	. q:$d(^XPBINFCN(id))  ; Already set\r	. s idout=$$getidout^ASMIFL7(id,\"EPT\")\r	. s bl0=$$zgetblu^EAXLIB9(\"EPT\",id,10460,0)\r	. s line=$$zmaxunl^EAXLIB9(bl0)\r	. f i=1:1:line d\r	. . s bl=$$zgetblu^EAXLIB9(\"EPT\",id,10460,i)\r	. . d infPrint(bl,idout)\r	. i commit d\r	. . s lock=$$zlock^AIE(\"EPT\",id,\"\",\"REG\") i \'lock w !,\"* No lock available on patient \"_extid_\".\" q\r	. . s NOKILL=0\r	. . f i=line:-1:1 d  ; reverse order makes erasing faster\r	. . . s emp=$$geti^EALIB(\"EPT\",id,10462,i)\r	. . . i emp\'=user s NOKILL=1 q ; Someone else set this data, don\'t touch it.\r	. . . s %=$$zdelLnGr^EALIB6(\"EPT\",id,10460,i,99999)\r	. . i \'NOKILL s %=$$zdelLnGr^EALIB6(\"EPT\",id,10460,0,99999)\r	. . s %=$$zunlock^AIE(\"EPT\",id,\"REG\")\r	i fHndl]\"\" u 0 s %=$$fclose^CSMUMNU(fHndl)\r	i commit d EndBatch^EAETBT1(bid)\r	q\r	;\rnoBackout k ^XPBINFCN q\r	;\r	q  ;;#eor#\r',NULL),(1598,'20090324-NCAL-SPR07SLG359346','EPICCARE AMBULATORY',NULL,'DAVEY, DREW            ','Other','Other','Server Only',0,'Open','2009-03-24 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1598 0325-NCAL-SPR07SLG359346.doc#',NULL,'359346',NULL,' ','F117112','KP N CALIFORNIA REGION ',';The code associated with this RA is meant to only be shared with appropriate API engineers.\r;\r;\r;\r; A cut-and-paste style utility which mimics the end-of-day EOW purge process which is\r; run through PurgeEOW^HTPURGE. Instead of hard-deleting the EOWs, this utility queues them\r; up in subsets, which can be fed manually through the Chronicles delete option.\r;\r; Parameters:\r;   - subprefix (I,REQ): the prefix of the subset name, which will be appended with a number\r;                        for form a unique subset. Allows the utility to roll-over to new subsets\r;                        once the \"maxpersubset\" number of EOWs have been added to a given subset.\r;   - maxpersubset (I,REQ): the maximum number of EOWs which can be put in a single subset. Once\r;                        this cap has been reached, the utility will generate a new subset using\r;                        the \"subprefix\" parameter, appended with an incrementing number.\r;   - max (I,OPT):       the maximum number of EOWs which will be put in to subsets via this utility. \r;\rzr\rzl\rEOWsubsets(subprefix,maxpersubset,max)\r	n numDays,date,killInst,ID,shutdown,total,stat,lastLn,bl,lastInst,syncInst,done,stop,found,uid,num,subary\r	;\r	s subprefix=$$strip^HULIB6(subprefix)\r	i subprefix=\"\" w !,\"Missing a subset prefix. Quitting...\" q\r	;\r	i +maxpersubset=0 w !,\"Missing a maximum number of EOWs per subset. Quitting...\" q\r	; \r	d ^HUINIT\r	s uid=$$gtUserID^HULIB1()\r	i uid=\"\" w !,\"Unable to obtain user ID. Quitting...\" q\r	s uid=$$getidout^%Zefnlib(uid,\"EMP\")\r	;\r	s numDays=$$zgetnp^EAXLIB11(\"HDF\",1,10240,1,99999)\r	i numDays=\"\" w !,\"Purge Days not set in I HDF 10240. Quitting...\" q\r	;\r	s stdate=$H-numDays  ;60 days ago @ NCAL\r	s date=0  ;loop from oldest to most recent sent instants\r	s killInst=(86400*stdate)-1  ;any DONE\'s before this will be retracted\r	;\r	f  s date=$$znxIx^HTPURGE(\"EOW\",145,date)  q:(date=\"\")!(date>stdate)  d  q:done!stop\r	. s ID=\"\"\r	. f  s ID=$$znxIxID^HTPURGE(\"EOW\",145,date,ID)  q:ID=\"\"  d  q:done!stop\r	. . i ^%Zdown s stop=1 q\r	. . w $$scrdots(.total,1000,10000)  ;dot per every 1000, number every 10,000\r	. . s stat=$$zgetnp^EAXLIB11(\"EOW\",ID,210,1,99999)\r	. . q:stat<4\r	. . s lastLn=$$zmaxunl^HTPURGE($$zgetblu^HTPURGE(\"EOW\",ID,70,0))\r	. . s bl=$$zgetblu^HTPURGE(\"EOW\",ID,70,lastLn)\r	. . s lastInst=+$$zgetpcu^HTPURGE(bl,2)\r	. . s syncInst=+$$zgetpcu^HTPURGE(bl,7)\r	. . s:syncInst>lastInst lastInst=syncInst\r	. . q:lastInst>killInst    ;old msg but status audit is recent\r	. . s found=found+1\r	. . s:found=max done=1  ;hit the max we want to search for\r	. . d addOne(ID,.subary,subprefix,maxpersubset,uid)\r	;\r	w !,\"Search Results\"\r	w !,+found,\" EOW records identified out of \",+total,\" searched.\"\r	w !!,\"Subsets Created\"\r	f num=1:1:subary w !,?(6-$L(num)),num,\". \",subary(num)\r	q\raddOne(ID,subary,subprefix,maxpersubset,uid)\r	n subname,subnum,flg\r	s subname=subary(+subary)\r	i subname]\"\",$P(^SUBSET(subname),\"_\",7)=maxpersubset s subname=\"\"  ;create new subset when previous one gets full\r	i subname=\"\" d\r	. s subname=subprefix_$I(subary) w !,subname\r	. s flg=\'$$create^ECB1(subname,\"EOW\",uid,\"Y\",+$H,$H+30,subname_\" for EOW purge.\")\r	i flg w !,\"Unable to create subset. Quitting.\"\r	i flg=0 w !,\"Created subset # \",+subary s subary(+subary)=subname\r	s %=$$addTo^ECB1(subname,\"_\"_ID,\"_1:9999999999\")\r	q\rscrdots(cnt,dot,num,BKG)\r	s cnt=cnt+1\r	q:BKG \"\"\r	w:$X>70 !\r	i +num\'=0,cnt#num=0 w cnt\\num i 1\r	e  w:(+dot\'=0)&(cnt#dot=0) \".\"\r	q \"\"\r\rd EOWsubsets(<subprefix>,<maxpersubset>,<max>)\r',NULL),(1601,'RE-AUTHORIZE SURGEONS FOR THE APPROPRIATE PROCEDURES','OPTIME',NULL,'SAUDER, ADAM            ',' ','Fix','Server Only',0,'Open','2009-03-31 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1601 - OpTime - Re-Authorize Surgeons for the Appropriate Procedures.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1604,'FIX SPELLING OF I EPT 10315 CATEGORY VALUE 3','ADT',NULL,'VER BURG, JEFF            ','Other','Fix','Server Only',0,'Open','2009-04-16 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1604.doc#',NULL,'372967',NULL,'146180','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1606,'0422-NCAL-SPR07SLG347940','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ',' ','Server Only',0,'Open','2009-04-21 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0422-NCAL-Spr07SLG347940.doc#',NULL,'347940',NULL,' ','F117112','KP N CALIFORNIA REGION ','; Resolve conflicts on group EPT-415\r; SLG 347940\r; HD0000004307098\r;\r; This utility is for use by IntraConnect support personnel in NCAL\r; and SCAL regions. \r;\r; Background:\r;\r; Items EPT 17220-17224 contain the instant, SER ID, CSN, and reviewed \r; medications for the last time a provider marked the patient\'s meds as\r; reviewed. Items EPT 17225-17229 are a related group containing the same\r; information for every time a provider has marked the patient\'s meds as\r; reviewed. \r;\r; Items EPT 17224 and 17229 are packed strings of the format: \r; med count ^ ORD ID : med status ^ ORD ID : med status ^ etc...\r;\r; We want to take the EPT 17220-17224 data with the more recent timestamp.\r;\r; We want to merge the incoming and current lists for the EPT 17225-17229\r; data. This effort is hampered because the some of the ORD IDs in item\r; 17229 can be null, because the file PP tried to map the ORD CID to a local\r; ID before we had a local copy of the ORD record to map it to (for example,\r; because the patient was admitted on the other deployment and the inpatient\r; ORDs had not yet been synched). So if the patient has a remote admission,\r; the following script will not resolve their EPT 415 conflicts until after\r; they have been discharged, in the hopes that we will have less null data\r; in EPT 17229 then.\r;\r; If the patient is not remotely admitted, and we still have null ORD IDs\r; in EPT 17229 (and this will happen), we do the best we can with what we\r; have and merge any two lines of 17229 that match in terms of timestamp,\r; provider, encounter, and non-null medication data.\r;\r; Example use:\r;\r; d resolveEPT415(0) ; report-only, print current, incoming, and merged data\r; d resolveEPT415(1) ; resolve conflicts, print current, incoming, and merged data\r; d resolveEPT415(2) ; resolve conflicts, but just print a summary\r\rzl\rresolveEPT415(FIXMODE)\r  n e1lcnt,UID,here,bid,ept,remAdmit,cnode,e1l,status,dat,i\r  n curData,inData,mergeData,mrgRG,item,val,lncnt,ln,inst,ser,csn,medlist\r  s UID=$$GetUID^CSSRECV()\r  s here=$$zgtActDp^EAXLIB() \r  i FIXMODE>0 s bid=$$AuditBatch^EAETBT1() i bid=\"\" d\r  . s FIXMODE=0\r  . w !,\"Could not open audit batch. Proceeding in search-only mode.\",!\r  w !,\"Index\",?11,\"E1L ID\",?22,\"EPT ID\",?38,\"Resolution\"\r  f  s ept=$o(^CSSCONFLICT(\"GroupIndex\",\"EPT\",ept)) q:ept=\"\"  d\r  . s remAdmit=\"\"\r  . f  s cnode=$o(^CSSCONFLICT(\"GroupIndex\",\"EPT\",ept,99999,415,cnode)) q:cnode=\"\"  d\r  . . i ^CSSCONFLICT(cnode,\"IsOwner\")\'=1 q  ; Only resolve conflicts owned here\r  . . s e1l=^CSSCONFLICT(cnode,\"E1LID\") q:e1l=\"\"\r  . . s status=$$getn^CSSCONFLC2(\"E1L\",e1l,1,\"1000;5\")\r  . . i status=5 q  ; The conflict has already been resolved\r  . . i remAdmit=\"\" d\r  . . . s remAdmit=0,dat=\"\"\r  . . . f  s dat=$$znxCxDt^CSEUMRG1(\"EPT\",30,3,ept,dat) q:dat=\"\"  d  q:remAdmit=1\r  . . . . i ($$zGetCOwn^CSSAPPLY(\"EPT\",ept,dat)\'=here),($$IsAdmitted^CSSPHOOK(ept,dat)=1) s remAdmit=1 q\r  . . i remAdmit=1 d  q  ; Don\'t resolve these conflicts while the patient is remotely admitted\r  . . . w !,cnode,?11,e1l,?22,ept,?38,\"Not resolved - patient is remotely admitted\"\r  . . ; retrieve current data\r  . . k curData,inData,mergeData,mrgRG\r  . . f item=17220,17222,17223,17224 d\r  . . . s val=$$geti^EAXLIB(\"EPT\",ept,item,1,99999)\r  . . . s curData(item,1)=val\r  . . . i val[\"[\" s curData(item,1,\"comment\")=$p(val,\"[\",2)\r  . . f item=17225,17227,17228,17229 d\r  . . . s lncnt=$$geti^EAXLIB(\"EPT\",ept,item,0,99999)\r  . . . s curData(item,0)=lncnt\r  . . . f ln=1:1:lncnt d\r  . . . . s val=$$geti^EAXLIB(\"EPT\",ept,item,ln,99999)\r  . . . . s curData(item,ln)=val\r  . . . . i val[\"[\" s curData(item,ln,\"comment\")=$p(val,\"[\",2)\r  . . ; retrieve incoming data\r  . . m inData=^CSSCONFLICT(cnode,\"InData\")\r  . . ; choose more recent single-response data\r  . . i +curData(17220,1)>+inData(17220,1) f item=17220,17222,17223,17224 m mergeData(item)=curData(item)\r  . . e  f item=17220,17222,17223,17224 m mergeData(item)=inData(item)\r  . . ; merge related-group data\r  . . s lncnt=0 f item=17225,17227,17228,17229 s ln=inData(item,0) i ln>lncnt s lncnt=ln\r  . . f ln=1:1:lncnt d\r  . . . s inst=inData(17225,ln) i inst=\"\" s inst=\"NULL\"\r  . . . s ser=inData(17227,ln) i ser=\"\" s ser=\"NULL\"\r  . . . s csn=inData(17228,ln) i csn=\"\" s csn=\"NULL\"\r  . . . s medlist=inData(17229,ln)\r  . . . d mergeSI17225(inst,ser,csn,medlist)\r  . . s lncnt=0 f item=17225,17227,17228,17229 s ln=curData(item,0) i ln>lncnt s lncnt=ln\r  . . f ln=1:1:lncnt d\r  . . . s inst=curData(17225,ln) i inst=\"\" s inst=\"NULL\"\r  . . . s ser=curData(17227,ln) i ser=\"\" s ser=\"NULL\"\r  . . . s csn=curData(17228,ln) i csn=\"\" s csn=\"NULL\"\r  . . . s medlist=curData(17229,ln)\r  . . . d mergeSI17225(inst,ser,csn,medlist) \r  . . s inst=\"\",ser=\"\",csn=\"\",ln=0\r  . . f  s inst=$o(mrgRG(inst)) q:inst=\"\"  d  \r  . . . f  s ser=$o(mrgRG(inst,ser)) q:ser=\"\"  d  \r  . . . . f  s csn=$o(mrgRG(inst,ser,csn)) q:csn=\"\"  d  \r  . . . . . s lncnt=mrgRG(inst,ser,csn,0)\r  . . . . . f i=1:1:lncnt d\r  . . . . . . s medlist=mrgRG(inst,ser,csn,i)\r  . . . . . . s ln=ln+1\r  . . . . . . s mergeData(17225,ln)=$s(inst=\"NULL\":\"\",1:inst)\r  . . . . . . i inst[\"[\" s mergeData(17225,ln,\"comment\")=$p(inst,\"[\",2)\r  . . . . . . s mergeData(17227,ln)=$s(ser=\"NULL\":\"\",1:ser)\r  . . . . . . s mergeData(17228,ln)=$s(csn=\"NULL\":\"\",1:csn)\r  . . . . . . s mergeData(17229,ln)=medlist\r  . . f item=17225,17227,17228,17229 s mergeData(item,0)=ln\r  . . i FIXMODE<2 d\r  . . . w !,cnode,?11,e1l,?22,ept,?38,\"See resolution details below\"\r  . . . w !,\"Current data:\",! zw curData\r  . . . w !,\"Incoming data:\",! zw inData\r  . . . w !,\"Resolved (merged) data:\",! zw mergeData\r  . . i FIXMODE>0 d\r  . . . s e1lcnt=e1lcnt+1\r  . . . m ^CSSCONFLICT(cnode,\"InDataPreJoin\")=inData\r  . . . k ^CSSCONFLICT(cnode,\"InData\")\r  . . . m ^CSSCONFLICT(cnode,\"InData\")=mergeData\r  . . . s %=$$resolve^CSSCONFLC4(e1l,UID,1)\r  . . . s %=$$insrti^CSSCONFLCT(1050,\"Resolved by Command Line Utility\",\"\",\"\",\"\",e1l,99999,\"E1L\")\r  . . . i FIXMODE=2 w !,cnode,?11,e1l,?22,ept,?38,\"Resolved\"\r  . . . i e1lcnt#100=0 d FlushBatch^EAETBT1(bid)\r  i FIXMODE>0 d EndBatch^EAETBT1(bid)\r  q\rmergeSI17225(inst,ser,csn,medlist2)\r  n medcnt2,lncnt,ln,merge,medlist1,medcnt1,pc,med1,med2,i\r  s medcnt2=$p(medlist2,\"^\",1)\r  s lncnt=mrgRG(inst,ser,csn,0)\r  f ln=1:1:lncnt d  q:merge=1\r  . s merge=1\r  . s medlist1=mrgRG(inst,ser,csn,ln)\r  . s medcnt1=$p(medlist1,\"^\",1)\r  . i medcnt1\'=medcnt2 s merge=0 q  ; med count mismatch\r  . f pc=2:1:(medcnt2+1) d  q:merge=0\r  . . s med1=$p(medlist1,\"^\",pc),med2=$p(medlist2,\"^\",pc)\r  . . i $p(med1,\":\",2)\'=$p(med2,\":\",2) s merge=0 q  ; med status code mismatch\r  . . s med1=$p(med1,\":\",1),med2=$p(med2,\":\",1)\r  . . i (med1]\"\"),(med2]\"\"),(med1\'=med2) s merge=0 q  ; ord id mismatch\r  i merge=1 d  i 1\r  . f pc=2:1:(medcnt2+1) d\r  . . s med1=$p(medlist1,\"^\",pc),med2=$p(medlist2,\"^\",pc)\r  . . i $p(med1,\":\",1)=\"\" s $p(medlist1,\"^\",pc)=med2\r  . s mrgRG(inst,ser,csn,ln)=medlist1\r  e  d\r  . s lncnt=lncnt+1\r  . s mrgRG(inst,ser,csn,0)=lncnt\r  . s mrgRG(inst,ser,csn,lncnt)=medlist2\r  q\r',NULL),(1609,'KP NCAL - ANNOTATE MORE MESSAGES AND REMOVE FROM MEMBER VIEW','MYCHART',NULL,'PARK, KEVIN            ','Other',' ',' ',0,'Open','2009-04-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\20090429 - KP NCAL - MyChart - Annotate more messages and remove from member view.doc#',NULL,'375436',NULL,' ','F117112','KP N CALIFORNIA REGION ',';The code associated with this RA is meant to only be shared with appropriate API engineers.\r\rzr\rzl\rtemp\r n wmgID,eptIDint,eptIDext,INI,ACCS,SET,OPT,LIST,bid,ok,NEW,homehere,name,text,line,linenum,OK,eptIDs,numEPTs,control,wprID,subject,prvprtxt,prvprsub,ASK,X,ln,lncnt\r s INI=\"WMG\",ACCS=\"NR\",SET=1\r d ^EAINISET(INI,.ok,1) \r q:\'ok  \r d ^EAREC \r q:(LIST=\"\"!OPT)  \r s bid=$$AuditBatch^EAETBT1() \r w:bid\']\"\" !,\"Unable to open batch. Quitting...\" \r q:bid\']\"\"\r s NEW=1  \r f  s wmgID=$$nextID^WPLICCNT() q:(wmgID=\"\"!OPT)  d  \r . i \'$$zlock^WPLIB(\"WMG\",wmgID) d  q \r . . w !,\"Unable to obtain a lock on WMG record \",wmgID,\". Skipping...\"\r . s eptIDext=$$geti^EAXLIB1(\"WMG\",wmgID,40,1,99999)\r . s eptIDint=$$getidin^%ZefnliX(eptIDext,\"EPT\")\r . s name=$$znam^EAXLIB2(\"EPT\",eptIDint)\r . s wprID=$$geti^EAXLIB1(\"EPT\",eptIDint,28800,1,99999)\r . s homehere=($$zgtActDp^WPMSGLST()=$$zGetLOwn^WPMSGLST(\"EPT\",eptIDint))\r . w !\r . w:\'homehere !,\"For WMG record \",wmgID,\": EPT record \'\",eptIDint,\"\' (\",name,\")\",!,\"is not homed on this deployment.\",!,\"Skipping...\"\r . q:\'homehere\r . w !,\"For WMG record \",wmgID,\", EPT record \'\",eptIDint,\"\' (\",name,\"):\"\r . w !\r . i $d(prvprtxt) d  \r . . w !,\"For the last message you prepended the following text to the message body:\"\r . . f ln=1:1:prvprtxt(0) w !,prvprtxt(ln)\r . . w !\r . s ASK(1)=\"Prepend a new text to the message body.^1\"\r . s ASK(2)=\"Replace the message body with a completely new text.^2\"\r . S ASK=2\r . i $d(prvprtxt) d  \r . . s ASK(3)=\"Prepend the same text to the message body as for the last message.^3\"\r . . s ASK=3\r . f ln=1:1:ASK w !,ln,\".  \",$p(ASK(ln),\"^\")\r . W !\r . f  r !,\"Choice: \",X d ^EAC q:(OK!OPT)\r . q:OPT\r . w !    \r . i (X=1)!(X=2) d  \r . . w !,\"Enter new lines of text for the message. Press PageDown or NextScreen to quit.\"\r . . s linenum=1\r . . k text\r . . f  d  q:(control=\"NSC\")\r . . . w !,\"Line \"_linenum_\": \"\r . . . s line=$$rd^LXUINICV(0,.control)\r . . . s:((line]\"\")!(control\'=\"NSC\")) text(linenum)=line,linenum=linenum+1\r . . s text(0)=linenum-1\r . . k prvprtxt\r . . w !\r . i X=1 m prvprtxt=text\r . i X=3 d\r . . k text\r . . m text=prvprtxt\r . i (X=1)!(X=3) d  \r . . s lncnt=$$getn^EAXLIB(\"WMG\",wmgID,0,\"100;1;1\")\r . . f ln=1:1:lncnt s text(prvprtxt(0)+ln)=$$getn^EAXLIB(\"WMG\",wmgID,ln,\"100;1;1\")\r . . s text(0)=text(0)+lncnt\r . i $$yn^WPMSGUTL(\"Change message body text in WMG record \"_wmgID,0,1) d  \r . . s %=$$insrti^WPLIB(100,.text,1,,,wmgID,99999,\"WMG\")\r . . i $d(eptIDs(eptIDint))\'=1 d  \r . . . s eptIDs(eptIDint)=1\r . . . s numEPTs=numEPTs+1\r . w !,!\r . i prvprsub]\"\" d  \r . . w !,\"For the last message you prepended the following text to the message subject:\"\r . . w !,\"\'\"_prvprsub_\"\'\"\r . . w !\r . s ASK(1)=\"Prepend a new text to the message subject.^1\"\r . s ASK(2)=\"Replace the message subject with a completely new text.^2\"\r . S ASK=2\r . i prvprsub]\"\" d  \r . . s ASK(3)=\"Prepend the same text to the message subject as for the last message.^3\"\r . . s ASK=3\r . f ln=1:1:ASK w !,ln,\".  \",$p(ASK(ln),\"^\")\r . w !\r . f  r !,\"Choice: \",X d ^EAC q:(OK!OPT)\r . q:OPT\r . w !  \r . i (X=1)!(X=2) d  \r . . r !,\"New subject text: \",subject\r . . w ! \r . i X=1 s prvprsub=subject\r . i X=2 s prvprsub=\"\"\r . i (X=1)!(X=3) s subject=prvprsub_$$getn^EAXLIB(\"WMG\",wmgID,1,\"98;1\")\r . i $$yn^WPMSGUTL(\"Change subject text in WMG record \"_wmgID,0,1) d  \r . . s %=$$putn^EAXLIB(\"WMG\",wmgID,1,\"98;1\",subject)\r . . i $d(eptIDs(eptIDint))\'=1 d  \r . . . s eptIDs(eptIDint)=1\r . . . s numEPTs=numEPTs+1\r . W !,!\r . i $$yn^WPMSGUTL(\"Mark WMG record \"_wmgID_\" as read by member\",0,1) d  \r . . d updateSt^WPUTMSG2(eptIDint,wmgID,1,$$time^WPUTMSG2(2),eptIDext,wprID)\r . . i $d(eptIDs(eptIDint))\'=1 d  \r . . . s eptIDs(eptIDint)=1\r . . . s numEPTs=numEPTs+1\r . W !,!\r . i $$yn^WPMSGUTL(\"Remove WMG record \"_wmgID_\" from member view\",0,1) d  \r . . d updateSt^WPUTMSG2(eptIDint,wmgID,2,$$time^WPUTMSG2(2),eptIDext,wprID)\r . . i $d(eptIDs(eptIDint))\'=1 d  \r . . . s eptIDs(eptIDint)=1\r . . . s numEPTs=numEPTs+1\r . W !,!\r . i $$yn^WPMSGUTL(\"Repopulate patient ID \'\"_eptIDext_\"\' (\"_name_\") into WMG record \"_wmgID,0,1) d  \r . . s %=$$insrti^WPLIB(40,eptIDext,,,,wmgID,99999,\"WMG\")\r . . i $d(eptIDs(eptIDint))\'=1 d  \r . . . s eptIDs(eptIDint)=1\r . . . s numEPTs=numEPTs+1\r . s %=$$zunlock^WPLIB(\"WMG\",wmgID)\r . d:numEPTs#100=0 FlushBatch^EAETBT1(bid)\r . w !,!\r d EndBatch^EAETBT1(bid) \r w:numEPTs>0 !,!,\"Triggering Chart Sync messages...\"\r s eptIDint=\"\" \r f  s eptIDint=$o(eptIDs(eptIDint)) q:eptIDint=\"\"  d  \r . w !,\"Triggering update for \'\",eptIDint,\"\'.\"\r . d genTrigger^CSSGENTRG(\"EPT\",eptIDint,\"Manual clean-up of MyChart message(s)\")\r w !,\"Done.\"\r q\r\rd temp\r',NULL),(1610,'0501-NCAL-Spr07SLG374575','EPICCARE AMBULATORY',NULL,'BUCKINGHAM, ADAM            ',' ',' ','Server Only',0,'Open','2009-04-30 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0501-NCAL-Spr07SLG374575.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',';The code below is meant to only be shared with appropriate API engineers.\r\r\r.\rzr\rzl\rPatSrch(startID)  \r          n eptID,eptDAT,cown,eptDAT2stop,eptDAT2,found,idx,eptDts\r          n cntFound\r          s:startID]\"\" startID=$$znxCxID^EA0LIB8(\"EPT\",30,109,startID,-1)  ;need to start one before the start ID\r          s eptID=startID\r          f  s eptID=$$znxCxID^EA0LIB8(\"EPT\",30,109,eptID) q:eptID=\"\"  d  \r          . q:\'$$zisLHome^EALIB40(\"EPT\",eptID,\"\",\"\",9)  ;only srch locally owned patient\r          . s eptDAT=$$znxCxDt^EA0LIB8(\"EPT\",30,109,eptID,\"\")\r          . q:eptDAT\']\"\"\r          . s found=\"\"\r          . s cown=$$zGetCOwn^EALIB20(\"EPT\",eptID,eptDAT)\r          . s eptDAT2stop=((eptDAT+.99)\\1)  ;stop at the beginning of the day for this dat\r          . q:eptDAT2stop=eptDAT            ;no multiple contacts\r          . s eptDAT2=eptDAT                ;we already know the most recent\r          . s idx=1\r          . k eptDts\r          . s eptDts(0)=eptDAT\r          . f  s eptDAT2=$$znxCxDt^EA0LIB8(\"EPT\",30,109,eptID,eptDAT2) q:eptDAT2=\"\"!(eptDAT2>eptDAT2stop)  d\r          . . s eptDts(idx)=eptDAT2\r          . . s idx=idx+1\r          . . i cown\'=$$zGetCOwn^EALIB20(\"EPT\",eptID,eptDAT2) s found=1\r          . i found d  ;since contacts from different deployments exist on the same date, ept 21906 must be populated\r          . . q:($$getr^EA0LIB(\"EPT\",eptID,1,eptDAT,\"21905;2\")]\"\")  ;quit - already populated\r          . . s cntFound=cntFound+1\r          . . w !,$$zGtCID^EALIB20(\"EPT\",eptID)\r          w !,!,\"Found \",cntFound,\" Records\"\r          q\r\rd PatSrch()\r',NULL),(1612,'NCAL Recall Bad Debt Accounts','RESOLUTE',NULL,'GONZALEZ, RYAN            ',' ',' ','Server Only',0,'Open','2009-05-01 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\NCAL Recall Bad Debt Accounts.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1613,'KPNCAL - PAUSE AND RE-SET APPLCORE DAILY QUEUE TO RESUME ','EPICCARE AMBULATORY',NULL,'DAVEY, DREW            ','Other','Other','Server Only',0,'Open','2009-05-05 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1613 - KPNCAL - PAUSE AND RE-SET APPLCORE DAILY QUEUE TO RESUME TOMORROW.doc#',NULL,'359346',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1615,'CLEAN UP PATIENT RECORD TO INCLUDE CORRECT USER DATA IN EPT ITEM 20816','OPTIME',NULL,'SAUDER, ADAM            ',' ','Fix','Server Only',0,'Open','2009-05-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1615 - OpTime - Clean Up Patient Record Data When Long QuickForm Comment Created.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ','; resolve ORD 10 conflicts\r; HD0000004485316 \r; SLG 360870\r; intended for NCAL and SCAL IntraConnect support\r\r\r; Resolves ORD 10 conflicts \r; take data over no data for items 46 and 47, and older timestamp for item 49\r; cases where items 46 and 47 have different values on both sides are skipped\r; cases where item 49 is timestamp vs no timestamp (null), timestamp is taken\r; this code will not resolve cases where items 46/47 take a different side than item 49,\r; these cases will require further evaluation\r\r\rzr\rzl\rresolveORD10(fix)	\r	n UID,ord,cnode,cnt\r	s UID=$$GetUID^CSSRECV()\r	i fix=1 s bid=$$AuditBatch^EAETBT1() i bid=\"\" d\r	. s fix=0\r	. w !,\"Could not open audit batch.  Proceeding in scan mode.\"\r	w !,\"Index\",?11,\"E1L ID\",?22,\"Resolved?\",?33,\"Comments\"  ;include a flag for those that can\'t be resolved for either not fitting the pattern or having 46/47 issues\r	f  s ord=$o(^CSSCONFLICT(\"GroupIndex\",\"ORD\",ord)) q:ord=\"\"  d\r	. f  s cnode=$o(^CSSCONFLICT(\"GroupIndex\",\"ORD\",ord,99999,10,cnode)) q:cnode=\"\"  d\r	. . k resolve,set46,set47,set49\r	. . i ^CSSCONFLICT(cnode,\"IsOwner\")\'=1 q\r	. . s e1l=^CSSCONFLICT(cnode,\"E1LID\") q:e1l=\"\"\r	. . s status=$$getn^CSSCONFLC2(\"E1L\",e1l,1,\"1000;5\") q:status=5  ; Already resolved\r	. . s cur46=$$zgetnp^CSSAPPLY(\"ORD\",ord,46,1,99999)\r	. . s cur47=$$zgetnp^CSSAPPLY(\"ORD\",ord,47,1,99999)\r	. . s cur49=$$zgetnp^CSSAPPLY(\"ORD\",ord,49,1,99999)\r	. . s in46=^CSSCONFLICT(cnode,\"InData\",46,1)\r	. . s in47=^CSSCONFLICT(cnode,\"InData\",47,1)\r	. . s in49=^CSSCONFLICT(cnode,\"InData\",49,1)\r	. . i cur46=in46,(cur47=in47),(cur49=in49) w !,cnode,?11,e1l,?22,\"No\",?33,\"Items 46,47 and 49 are consistent\" q\r	. . i cur46]\"\",(in46]\"\"),(cur46\'=in46) w !,cnode,?11,e1l,?22,\"No\",?33,\"Item 46 not equal, not null\" q\r	. . i cur47]\"\",(in47]\"\"),(cur47\'=in47) w !,cnode,?11,e1l,?22,\"No\",?33,\"Item 47 not equal, not null\" q\r	. . i cur46\'=in46 d  i 1\r	. . . i cur46]\"\" s set46=0 q\r	. . . i in46]\"\" s set46=1 q\r	. . i cur47\'=in47 d  i 1\r	. . . i cur47]\"\" s set47=0 q\r	. . . i in47]\"\" s set47=1 q\r	. . i set46]\"\",(set47]\"\"),(set46\'=set47) w !,cnode,?11,e1l,?22,\"No\",?33,\"Values from items 46 and 47 are from different deployments\" q\r	. . i cur49>in49 d  i 1\r	. . . i in49=\"\" s set49=0\r	. . . e  s set49=1\r	. . i in49>cur49 d  i 1\r	. . . i cur49=\"\" s set49=1\r	. . . e  s set49=0\r	. . i set46=1,(set49\'=0) s resolve=1\r	. . i set46=0,(set49\'=1) s resolve=0\r	. . i set46=\"\" s resolve=set49 \r	. . i resolve=\"\" w !,cnode,?11,e1l,?22,\"No\",?33,\"Item 49 and items 46/47 need separate resolutions.  resolve:\"_\", set46:\"_set46_\", set49:\"_\", cur49:\"_cur49_\", in49:\"_in49_\",\"	q\r	. . e  w !,cnode,?11,e1l,?22,\"Yes\",?33,\"Resolve \"_resolve\r	. . i fix d\r	. . . s cnt=cnt+1\r	. . . s %=$$resolve^CSSCONFLC4(e1l,UID,resolve)\r	. . . s %=$$^EAINSRTF(1050,\"Resolved by command line utility\",\"\",\"\",\"\",e1l,99999,\"E1L\")\r	. . . i cnt#100=0 d FlushBatch^EAETBT1(bid)\r	i fix=1 d EndBatch^EAETBT1(bid)\r	q\r\rd resolveORD10()\r',NULL),(1616,'DEFAULT ORDERS IN ORDER RECONCILIATION NAVIGATORS','INPATIENT EMR',NULL,'REIMER, KRISTIE            ','Debug Code','Debug Code','Server Only',0,'Open','2009-05-13 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1616 - Debug Code for Default Admission Orders.doc#',NULL,'382146',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1617,'582_NCAL_20090514 – 999,898713 – Adjust REG_UPDATE trigger and use standard profile variable settings for ‘Return Mail’ configuration','EDI',NULL,'LOEWENSTEIN, DANIEL            ','Other','Fix','Server Only',0,'Open','2009-05-13 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\582_NCAL_20090514_-_999,898713_-_Adjust_REG_UPDATE_trigger_and_use_standard_profile_variable_settings_for_\'Return_Mail\'_configuration.doc#',NULL,'377415',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1618,'0514-NCAL-Spr07SLG360870','CHART SYNC',NULL,'JENKINS, EMILY            ',' ','Fax #:','Server Only',0,'Open','2009-05-13 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0514-NCAL-Spr07SLG360870.doc#',NULL,'360870',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1619,'KP NCAL CLEANUP OF INP ORDER ACKNOWLEDGMENT ITEMS 20070 AND 20080','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Data Corruption','Other','Server Only',0,'Open','2009-05-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1619 - Inpatient, KP NCAL Unacknowledged Order INP Item Cleanup part 3.doc#',NULL,'289500',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1621,'KP NCAL FLOWSHEET TEMPLATE REMOVAL/REPLACEMENT UTILITY','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Other','Other','Server Only',0,'Open','2009-05-28 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1621 - Inpatient, KP NCAL Flowsheet Template Removal Utility.doc#',NULL,'351983',NULL,' ','F117112','KP N CALIFORNIA REGION ','; The code associated with this RA is meant to be shared with Susan Gall from NCAL.\r;\r;---------\r; NAME: FltReplacer\r; AUTHOR: Shaun Farrelly, 5/18/09\r; DESCRIPTION:  Replaces or removes flowsheet templates\r; PARAMETERS:\r;  searchFLT (I,REQ)- FLT to remove or replace\r;  replaceFLT (I,OPT)- FLT with which to replace the searchFLT. leave null to remove searchFLT.\r;  editMode (I,OPT)- true to edit stuff. false to just report.\r;---------\rFltReplacer(searchFLT,replaceFLT,editMode)\r 	  i searchFLT=\"\" w !,\"Please enter a template to search on.\" q\r	  n empID,value,c10,c7,replaceFLTname,FLT,userName,replaceFLTdisp,i,p,justRemove,fltID,done,anyEMP,bid,batchCount\r	  d:\'%EA(\"E\",\"HUINIT\") ^HUINIT\r	  s c10=$c(10),c7=$c(7)\r	  s FLT=c10_searchFLT  ;this is what we\'re looking for\r	  w !,$s(\'editMode:\"***Report Mode***\",replaceFLT:\"***Replacing Template***\",1:\"***Removing Template***\"),!\r	  i replaceFLT]\"\"  d\r	  . s replaceFLTname=$$znam^EAXLIB2(\"FLT\",replaceFLT)\r	  . s replaceFLTdisp=$$getFltDispName^JULIB7(replaceFLT)\r	  w !,\"USER ID|USER NAME\" w:replaceFLT]\"\" \"|HAS \"_replaceFLT_\" WRENCHED IN ALREADY?\"\r	  s bid=$$AuditBatch^EAETBT1()                     ;open batch ;*CJR 5/19/09: added batch lines\r	  f  s empID=$o(^EUR(\"U\",empID)) q:empID=\"\"  d\r	  . s value=c10_^EUR(\"U\",empID,\"IPFLOWSHEET\",\"TEMPLATEORDER\")\r	  . q:value\'[FLT  ;they don\'t have it wrenched in\r	  . s anyEMP=1\r	  . s userName=$$NameOut^HUNETNM(\"EMP\",empID)\r	  . s justRemove=(replaceFLT=\"\")!(value[(c10_replaceFLT))  ;if they don\'t want to replace it, or the replacement is already wrenched in, just remove searchFLT\r	  . w !,empID,\"|\",userName\r	  . w:replaceFLT]\"\" \"|\",$s(justRemove:\"Yes\",1:\"No\")\r	  . q:\'editMode\r	  . s done=\"\"\r	  . f i=2:1:$l(value,c10)-1 d  q:done  ;account for leading and trailing c10\'s\r	  . . s p=$p(value,c10,i)\r	  . . s fltID=$p(p,c7,1) q:fltID\'=searchFLT\r	  . . s done=1\r	  . . i justRemove s $p(value,c10,i)=\"\" q\r	  . . s $p(value,c10,i)=replaceFLT_c7_replaceFLTname_c7_$p(p,c7,3)_c7_replaceFLTdisp\r	  . s value=$$replace^%Zefnlif(value,c10_c10,c10)  ;take care of the floating delimiter\r	  . s value=$e(value,2,$l(value))  ;strip off the leading c10\r	  . s ^EUR(\"U\",empID,\"IPFLOWSHEET\",\"TEMPLATEORDER\")=value\r	  . s batchCount=batchCount+1  ;batch counter  ;*CJR+3 5/19/09: added batch lines\r	  . d:(batchCount#100=0) FlushBatch^EAETBT1(bid)\r	  d EndBatch^EAETBT1(bid)   \r	  w:\'anyEMP !,\"No users have template \"_searchFLT\r	  w !\r	  q\r','D112011'),(1622,'KP NCAL CHECK ADMITTING FOR SPECIALTY DEPARTMENT SYSTEM LISTS','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Other','Other','Server Only',0,'Open','2009-06-05 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1622 - Inpatient, KP NCAL Cleanup for Specialty Department System Lists.doc#',NULL,'296705',NULL,' ','F117112','KP N CALIFORNIA REGION ','; The code associated with this RA is meant to be shared with Susan Gall from NCAL.\r;\r;---------\r; NAME:         xSetAdmitOnPAC (PUBLIC)\r; AUTHOR:	Chris Russell\r; DESCRIPTION:  delete non human providers and mark providers as \"admitting\"\r;               if not already checked in Specialty Department System Lists\r; PARAMETERS:\r;  editMode (I,OPT)- true to edit. false to report\r;  delRes (I,OPT)- true to delete non-human providers.\r;  addAdm (I,OPT)- true to add the Admitting relationship to providers\r;---------\rxSetAdmitOnPAC(delRes,addAdm,editMode) n ersID,pacID,numSER,LN,serID,serType,serRelation,anyType,anyRel,bid,batchCount,invalid\r	i editMode d  \r	. d ^HUINIT \r	. s bid=$$AuditBatch^EAETBT1()                   	;open batch\r	. i bid=\"\" w !,\"Unable to open batch.  Quitting.\" s invalid=1\r	q:invalid\r	f  s ersID=$$zoID^EAXLIB2(\"ERS\",ersID) q:ersID=\"\"  d\r	. q:$$znam^EAXLIB2(\"ERS\",ersID)\'[\"SPECIALTY DEPARTMENT\"\r	. w !!,\"System List Type: \"_$$znam^EAXLIB2(\"ERS\",ersID)\r	. f  s pacID=$$znxIxID^EAXLIB5(\"PAC\",34000,ersID,pacID) q:pacID=\"\"  d\r	. . s numSER=$$getn^EAXLIB(\"PAC\",pacID,0,\"34300;1;1\")\r	. . s:numSER=\"\" numSER=0\r	. . w !,\"  System List: \"_pacID_\" - \"_$$znam^EAXLIB2(\"PAC\",pacID)_\" (\"_numSER_\" providers)\"\r	. . q:numSER=0   		;*CJR 5/28 - quit if the system list has no providers\r	. . i \'editMode d\r	. . . f LN=1:1:numSER d\r	. . . . d xPACHelper(pacID,LN,.serID,.serType,.serRelation)\r	. . . . i serType\'=1 w !,\"    Non-human provider: \"_$$xWriteSER(serID) s anyType=1\r	. . . . i serType=1,$p(serRelation,\"|\",1)\'=1 w !,\"    Provider without Admitting relationship: \"_$$xWriteSER(serID) s anyRel=1   ;*CJR 5/28 - add serType check\r	. . . i \'anyType w !,\"    No non-human providers found\"\r	. . . i \'anyRel w !,\"    All providers have Admitting relationship\"\r	. . e  d\r	. . . i \'$$zlock^%Zefnlid(\"PAC\",pacID) w !,\"No lock on PAC \"_pacID q  ;try to obtain lock on PAC; if no lock, write PAC\r	. . . i delRes d\r	. . . . f LN=numSER:-1:1 d   		;*CJR 5/28 - reverse loop\r	. . . . . d xPACHelper(pacID,LN,.serID,.serType,.serRelation)\r	. . . . . i serType\'=1,serID]\"\" w !,\"    Removing non-human provider: \"_$$xWriteSER(serID) s ^XCJR(\"non-human\",pacID,serID)=serType,%=$$zdelLnGr^EALIB6(\"PAC\",pacID,34300,LN,99999),anyType=1\r	. . . s numSER=$$getn^EAXLIB(\"PAC\",pacID,0,\"34300;1;1\")\r	. . . i addAdm d\r	. . . . f LN=1:1:numSER d\r	. . . . . d xPACHelper(pacID,LN,.serID,.serType,.serRelation)\r	. . . . . i serType=1,$p(serRelation,\"|\",1)=\"\" w !,\"    Adding Admitting relationship to: \"_$$xWriteSER(serID) s ^XCJR(\"admitting\",pacID,serID)=1,serRelation=\"1\"_serRelation,%=$$zputLine^EALIB6(\"PAC\",pacID,34301,LN,99999,serRelation),anyRel=1   ;*CJR 5/28 - add serType check, set serRelation more correctly\r	. . . i \'anyType,delRes w !,\"    No non-human providers found\"\r	. . . i \'anyRel,addAdm w !,\"    All providers have Admitting relationship\"\r	. . . s batchCount=batchCount+1  ;batch counter  ;*CJR+2 5/19/09: flush batch\r	. . . d:(batchCount#100=0) FlushBatch^EAETBT1(bid)\r	. . . s %=$$zunlock^%Zefnlid(\"PAC\",pacID)            ;Unlock PAC record\r	w:numSER=\"\" !,\"No Specialty Department System Lists exist.\"   		;*CJR 5/28 - added\r	d:editMode EndBatch^EAETBT1(bid)\r	q\r	;\rxPACHelper(pacID,LN,serID,serType,serRelation)\r	i pacID=\"\"!(LN=\"\") q\r	s serID=\"\",serType=\"\",serRelation=\"\"  			;*CJR 5/28 - set variables to null\r	s serID=$$getn^EAXLIB(\"PAC\",pacID,LN,\"34300;1;1\")\r	q:serID=\"\"  						;*CJR 5/28 - quit if no SER ID\r	s serID=$$getidin^%ZefnliX(serID,\"SER\")\r	s serType=$$zgetnp^EAXLIB11(\"SER\",serID,30,1,99999)\r	s serRelation=$$getn^EAXLIB(\"PAC\",pacID,LN,\"34300;2;1\")\r	q\r	;\rxWriteSER(serID) q:serID=\"\" \"No SER ID passed in.\"\r	q $$getidout^%ZefnliX(serID,\"SER\")_\" - \"_$$znam^EAXLIB2(\"SER\",serID)\r',NULL),(1623,'ADD ADT LINKING FILTER TO PREVENT LOGS FROM LINKING TO ADMISSIONS IN HDU DEPARTMENTS','OPTIME',NULL,'SAUDER, ADAM            ',' ','Not Applicable','Server Only',0,'Open','2009-05-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1623 - OpTime - Add ADT Linking Filter to Prevent Logs From Linking to Admissions in HDU Departments.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1626,'0529-NCAL-SPR07SLG391580','EDI',NULL,'GIAM, PAUL            ','Other','Enhancement','Server Only',0,'Open','2009-05-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0529-NCAL-580_20090501-898311-Skip_PID_fields_to_stop_superfluous_error_logging.doc#',NULL,'391580',NULL,' ','F117112','KP N CALIFORNIA REGION ',';The code associated with this RA is meant to be shared with Arne Paulsen from NCAL.\r\rInstall Instructions\r1) From Bridges (d ^AI)\r2) 5. Interface Specifications\r3) 1. Enter/Edit a Specification\r4) 898705 and ENTER.\r5) Page down to the Interface Specification - Start, Stop and Error Code screen.\r6) Add a new line in the Error Screening Code file with the following:\ri %AIErCd=200&(dod=11111111111111) s %AInofile=1\r7) SHIFT+F7 to exit the record.\r\r\rBack out Instructions\r1) From Bridges (d ^AI)\r2) 5. Interface Specifications\r3) 1. Enter/Edit a Specification\r4) 898705 and ENTER.\r5) Page down to the Interface Specification - Start, Stop and Error Code screen.\r6) Remove the line of Error Screening Code that was entered per the Install Instructions.\r7) SHIFT+F7 to exit the record.\r',NULL),(1627,'0601-NCAL-SPR07SLG360870','CHART SYNC',NULL,'JENKINS, EMILY            ',' ',' ',' ',0,'Open','2009-05-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0601-NCAL-Spr07SLG360870.doc#',NULL,'360870',NULL,' ','F117112','KP N CALIFORNIA REGION ','; resolve ORD 10 conflicts\r; HD0000004485316 \r; SLG 360870\r; intended for NCAL and SCAL IntraConnect support\r; v 2.0, sent in RA 0529-NCAL-Spr07SLG360870\r\r\r; Resolves ORD 10 conflicts \r; takes the non null side of null vs not null in item 33 (disregards further logic after this)\r; if item 33 is not a null vs not null conflict,\r; take data over no data for items 46 and 47, and older timestamp for item 49\r; cases where items 46 and 47 have different values on both sides are skipped\r; cases where item 49 is timestamp vs no timestamp (null), timestamp is taken\r; this code will not resolve cases where items 46/47 take a different side than item 49,\r; these cases will require further evaluation\r\rs fix=0\rzr\rzl\rresolveORD10(fix)	\r	n UID,ord,cnode,cnt\r	s UID=$$GetUID^CSSRECV()\r	i fix=1 s bid=$$AuditBatch^EAETBT1() i bid=\"\" d\r	. s fix=0\r	. w !,\"Could not open audit batch.  Proceeding in scan mode.\"\r	w !,\"Index\",?11,\"E1L ID\",?22,\"Resolved?\",?33,\"Comments\"  ;include a flag for those that can\'t be resolved for either not fitting the pattern or having 46/47 issues\r	f  s ord=$o(^CSSCONFLICT(\"GroupIndex\",\"ORD\",ord)) q:ord=\"\"  d\r	. f  s cnode=$o(^CSSCONFLICT(\"GroupIndex\",\"ORD\",ord,99999,10,cnode)) q:cnode=\"\"  d\r	. . k resolve,set46,set47,set49\r	. . i ^CSSCONFLICT(cnode,\"IsOwner\")\'=1 q\r	. . s e1l=^CSSCONFLICT(cnode,\"E1LID\") q:e1l=\"\"\r	. . s status=$$getn^CSSCONFLC2(\"E1L\",e1l,1,\"1000;5\") q:status=5  ; Already resolved\r	. . s cur33=$$zgetnp^CSSAPPLY(\"ORD\",ord,33,1,99999)\r	. . s in33=^CSSCONFLICT(cnode,\"InData\",33,1)\r	. . i cur33=in33 d  i 1\r	. . . s cur46=$$zgetnp^CSSAPPLY(\"ORD\",ord,46,1,99999)\r	. . . s cur47=$$zgetnp^CSSAPPLY(\"ORD\",ord,47,1,99999)\r	. . . s cur49bll=$$zgetbll^CSSCONFLC3(\"ORD\",ord,1,99999)\r	. . . s cur49=$$zgetpcl^CSSCONFLC3(cur49bll,30,1)\r	. . . s in46=^CSSCONFLICT(cnode,\"InData\",46,1)\r	. . . s in47=^CSSCONFLICT(cnode,\"InData\",47,1)\r	. . . s in49=^CSSCONFLICT(cnode,\"InData\",49,1)\r	. . . i cur46=in46,(cur47=in47),(cur49=in49) w !,cnode,?11,e1l,?22,\"No\",?33,\"Items 46,47 and 49 are consistent\" q\r	. . . i cur46]\"\",(in46]\"\"),(cur46\'=in46) w !,cnode,?11,e1l,?22,\"No\",?33,\"Item 46 not equal, not null\" q\r	. . . i cur47]\"\",(in47]\"\"),(cur47\'=in47) w !,cnode,?11,e1l,?22,\"No\",?33,\"Item 47 not equal, not null\" q\r	. . . i cur46\'=in46 d  i 1\r	. . . . i cur46]\"\" s set46=0 q\r	. . . . i in46]\"\" s set46=1 q\r	. . . i cur47\'=in47 d  i 1\r	. . . . i cur47]\"\" s set47=0 q\r	. . . . i in47]\"\" s set47=1 q\r	. . . i set46]\"\",(set47]\"\"),(set46\'=set47) w !,cnode,?11,e1l,?22,\"No\",?33,\"Values from items 46 and 47 are from different deployments\" q\r	. . . i cur49>in49 d  i 1\r	. . . . i in49=\"\" s set49=0\r	. . . . e  s set49=1\r	. . . i in49>cur49 d  i 1\r	. . . . i cur49=\"\" s set49=1\r	. . . . e  s set49=0\r	. . . i set46=1,(set49\'=0) s resolve=1\r	. . . i set46=0,(set49\'=1) s resolve=0\r	. . . i set46=\"\" s resolve=set49 \r	. . . i resolve=\"\" w !,cnode,?11,e1l,?22,\"No\",?33,\"Item 49 and items 46/47 need separate resolutions.\" q\r	. . . e  w !,cnode,?11,e1l,?22,\"Yes\",?33,\"Resolve \"_resolve\r	. . e  d\r	. . . i in33=\"\" s resolve=0 w !,cnode,?11,e1l,?22,\"Yes\",?33,\"Resolve \"_resolve_\" per item 33\"\r	. . . i cur33=\"\" s resolve=1 w !,cnode,?11,e1l,?22,\"Yes\",?33,\"Resolve \"_resolve_\" per item 33\"\r	. . . i resolve=\"\" w !,cnode,?11,e1l,?22,\"No\",?33,\"Item 33 in conflict.\" q\r	. . i resolve=\"\" q\r	. . i fix d\r	. . . s cnt=cnt+1\r	. . . s %=$$resolve^CSSCONFLC4(e1l,UID,resolve)\r	. . . s %=$$^EAINSRTF(1050,\"Resolved by command line utility\",\"\",\"\",\"\",e1l,99999,\"E1L\")\r	. . . i cnt#100=0 d FlushBatch^EAETBT1(bid)\r	i fix=1 d EndBatch^EAETBT1(bid)\r	q\r\rd resolveORD10()\r',NULL),(1628,'NCAL - EDI - CHANGE EPT .1 TO CID IN THE INTERFACE SIDETRACK QUEUE','EDI',NULL,'LOEWENSTEIN, DANIEL            ','Patient Safety','Fix','Server Only',0,'Open','2009-05-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\NCAL - EDI - Fix sidetrack queue for 898611 and 898301 to have CID1.doc#',NULL,'395035',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1629,'0602-NCAL-SPR07SLG388351','EPICCARE AMBULATORY',NULL,'BUCKINGHAM, ADAM            ','Other','Enhancement','Server Only',0,'Open','2009-06-01 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0602-NCAL-SPR07SLG388351.doc#',NULL,'388351',NULL,' ','F117112','KP N CALIFORNIA REGION ','Associated with RA 1629\rThe code associated with this RA is meant to be shared with Lisa Pfeifer from NCAL.\r\r\r\r0,expiry=$$getn^EAXLIB(\"ORD\",OID,1,\"600;2\"),x=$s(expiry<+$h:1,1:0) s:expiry<+$h chkMsg=\"Order has expired, please re-order.\"\r',NULL),(1630,'SYNCHRONIZE RECORDS ATTACHED TO CANCELLED ADMISSIONS','CHART SYNC',NULL,'JENKINS, EMILY            ',' ',' ',' ',0,'Open','2009-06-01 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1630 - Synchronize Records attached to cancelled admissions.doc#',NULL,'367733',NULL,' ','F117112','KP N CALIFORNIA REGION ',';RA 1630 - Synchronize records attached to cancelled admissions	\r;FOR REVIEW ONLY\r; The code associated with this RA is meant to be shared with Margaret Lin\r\r;Search cancelled admits\rk status,conf,l,dep,typlist,ept,dat,csn,ord,cnt,inp,bl0,count,notecnt,ln,bl,type\rs status=2,conf=3,notes=1\rw \"DEP|EPT|DAT|CSN|ORD COUNT|LAB COUNT|HNO COUNT\"  s l=\"|\",dep=$$zgtActDp^EALIB20(),typlist=$$TypList^CSSFIINP() f  s ept=$o(^EX(\"EPT\",10115,status,ept)) q:ept=\"\"  f  s dat=$o(^EM(\"EPT\",ept,dat)) q:dat=\"\"  i $$geti^EAX(\"EPT\",ept,10115,1,dat)=status,$$geti^EAX(\"EPT\",ept,18852,1,dat)=3 s csn=$$geti^EAX(\"EPT\",ept,8,1,dat) k cnt f  { s ord=$o(^EX(\"ORD\",226,csn,ord)) q:ord=\"\"  i $$zgLGI2^CSSRECLK(\"EPT\",ept,\"ORD\",ord)\']\"\",$$IsORDSyn^CSSFIINP(ord) s cnt=cnt+1 i $$geti^EAX(\"ORD\",ord,40,1,99999)]\"\" s cnt(\"LAB\")=cnt(\"LAB\")+1 } s inp=$$GetInpPt^CSSFIINP(ept,dat) i inp]\"\",notes { s bl0=$$zgetblu^CSSFIINP(\"INP\",inp,5000,0),count=$$zmaxunl^CSSFIINP(bl0) i count>0 k notecnt f ln=1:1:count { s bl=$$zgetblu^CSSFIINP(\"INP\",inp,5000,ln),hno=$$zgetpcu^CSSFIINP(bl,4),type=$$zgetpcu^CSSFIINP(bl,3) i hno]\"\",$$zgLGI2^CSSRECLK(\"EPT\",ept,\"HNO\",hno)\']\"\",typlist[\"^\"_type_\"^\",notecnt(hno)<1 s notecnt=notecnt+1,notecnt(hno)=1 } s count=$$geti^EAX(\"EPT\",ept,19100,0,dat) f ln=1:1:count { s hno=$$geti^EAX(\"EPT\",ept,19100,ln,dat),type=$$geti^EAX(\"HNO\",hno,34033,1,99999) i $$zgLGI2^CSSRECLK(\"EPT\",ept,\"HNO\",hno)\']\"\",typlist[\"^\"_type_\"^\",notecnt(hno)<1 s notecnt=notecnt+1,notecnt(hno)=1 }} i cnt+notecnt>0,$d(^ER6(\"EPT\",ept,\"S\",dat)) w !,dep,l,ept,l,dat,l,csn,l,cnt,l,cnt(\"LAB\"),l,notecnt\r\r150|    Z34242|60603.99|82391383|2||\r\r;Search pre-admits\rk status,l,dep,typlist,ept,dat,csn,ord,cnt,inp,bl0,count,notecnt,ln,bl,type\rs status=1,notes=1\rw \"DEP|EPT|DAT|CSN|ORD COUNT|LAB COUNT|HNO COUNT\"  s l=\"|\",dep=$$zgtActDp^EALIB20(),typlist=$$TypList^CSSFIINP() f  s ept=$o(^EX(\"EPT\",10115,status,ept)) q:ept=\"\"  f  s dat=$o(^EM(\"EPT\",ept,dat)) q:dat=\"\"  i $$geti^EAX(\"EPT\",ept,10115,1,dat)=status s csn=$$geti^EAX(\"EPT\",ept,8,1,dat) k cnt f  { s ord=$o(^EX(\"ORD\",226,csn,ord)) q:ord=\"\"  i $$zgLGI2^CSSRECLK(\"EPT\",ept,\"ORD\",ord)\']\"\",$$IsORDSyn^CSSFIINP(ord) s cnt=cnt+1 i $$geti^EAX(\"ORD\",ord,40,1,99999)]\"\" s cnt(\"LAB\")=cnt(\"LAB\")+1 } s inp=$$GetInpPt^CSSFIINP(ept,dat) i inp]\"\",notes { s bl0=$$zgetblu^CSSFIINP(\"INP\",inp,5000,0),count=$$zmaxunl^CSSFIINP(bl0) i count>0 k notecnt f ln=1:1:count { s bl=$$zgetblu^CSSFIINP(\"INP\",inp,5000,ln),hno=$$zgetpcu^CSSFIINP(bl,4),type=$$zgetpcu^CSSFIINP(bl,3) i hno]\"\",$$zgLGI2^CSSRECLK(\"EPT\",ept,\"HNO\",hno)\']\"\",typlist[\"^\"_type_\"^\",notecnt(hno)<1 s notecnt=notecnt+1,notecnt(hno)=1 } s count=$$geti^EAX(\"EPT\",ept,19100,0,dat) f ln=1:1:count { s hno=$$geti^EAX(\"EPT\",ept,19100,ln,dat),type=$$geti^EAX(\"HNO\",hno,34033,1,99999) i $$zgLGI2^CSSRECLK(\"EPT\",ept,\"HNO\",hno)\']\"\",typlist[\"^\"_type_\"^\",notecnt(hno)<1 s notecnt=notecnt+1,notecnt(hno)=1 }} i cnt+notecnt>0,$d(^ER6(\"EPT\",ept,\"S\",dat)) w !,dep,l,ept,l,dat,l,csn,l,cnt,l,cnt(\"LAB\"),l,notecnt\r\r\r;Cleanup code.  Cut and paste output from above.  Run \"d cleanup()\" to cleanup orders only.  Once the fix is installed, run \"d cleanup(1)\" to cleanup any remaining orders & notes\rzl\rcleanup(notes)	\r	n input,l,actdp,INUPDCHK,dep,ept,eptdat,eptcsn,eptcid,curgen,newgen,ord,hno,notecnt\r	d ^HUINIT\r	s l=\"|\",actdp=$$zgtActDp^EALIB20,INUPDCHK=\"INUPDCHK\"\r	s typlist=$$TypList^CSSFIINP()\r	f  r !,input q:input=\"\"  d  \r	. s dep=$p(input,l),ept=$p(input,l,2),eptdat=$p(input,l,3),eptcsn=$P(input,l,4)\r	. s ept=$$^HUIDFN(ept,\"EPT\")\r	. q:dep\'=actdp\r	. i \'$$zisID^CSSFILEQ(\"EPT\",ept) w l,\"No EPT\" q\r	. s eptcid=$$zGtCID^CSSAPPLY(\"EPT\",ept)\r	. i eptcid=\"\" w l,\"No EPT CID\" q\r	. i \'$$zlockG^CSSLOCK(\"^CSSLOCK(INUPDCHK,\"\"EPT\"\",eptcid)\",1) w l,\"Failed CSSLOCK\" q\r	. i \'$$zlock^CSSLOCK(\"EPT\",ept,1) s %=$$zunlockG^CSSLOCK(\"^CSSLOCK(INUPDCHK,\"\"EPT\"\",eptcid)\") w l,\"Failed EPT Lock\" q\r	. s curgen=$p($$zgGen^CSSUPTRG2(\"EPT\",ept,99999,1),\"^\",2)\r	. s newgen=curgen+1\r	. f  s ord=$o(^EX(\"ORD\",226,eptcsn,ord)) q:ord=\"\"  d\r	. . q:\'$$IsORDSyn^CSSFIINP(ord)\r	. . s %=$$zpLGI^CSSUPTRG2(\"EPT\",ept,\"ORD\",ord,newgen)\r	. k notecnt\r	. i notes d\r	. . s inp=$$GetInpPt^CSSFIINP(ept,eptdat) \r	. . i inp]\"\" d  \r	. . . s bl0=$$zgetblu^CSSFIINP(\"INP\",inp,5000,0),count=$$zmaxunl^CSSFIINP(bl0)\r	. . . f ln=1:1:count d  \r	. . . . s bl=$$zgetblu^CSSFIINP(\"INP\",inp,5000,ln)\r	. . . . s hno=$$zgetpcu^CSSFIINP(bl,4),type=$$zgetpcu^CSSFIINP(bl,3)\r	. . . . i typlist[(\"^\"_type_\"^\"),notecnt(hno)<1 s notecnt=notecnt+1,notecnt(hno)=1\r	. . . i notecnt>1 s %=$$zpLGI^CSSUPTRG2(\"EPT\",ept,\"INP\",inp,newgen)\r	. . s count=$$geti^EAX(\"EPT\",ept,19100,0,eptdat)\r	. . f ln=1:1:count d  \r	. . . s hno=$$geti^EAX(\"EPT\",ept,19100,ln,eptdat),type=$$geti^EAX(\"HNO\",hno,34033,1,99999) \r	. . . i typlist[(\"^\"_type_\"^\"),notecnt(hno)<1 s notecnt=notecnt+1,notecnt(hno)=1\r	. . k hno\r	. . f  s hno=$o(notecnt(hno)) q:hno=\"\"  s %=$$zpLGI^CSSUPTRG2(\"EPT\",ept,\"HNO\",hno,newgen)\r	. s %=$$zpGen^CSSFILGEN(\"EPT\",ept,99999,1,actdp,newgen)\r	. s %=$$zunlockG^CSSLOCK(\"^CSSLOCK(INUPDCHK,\"\"EPT\"\",eptcid)\") \r	. s %=$$zunlock^CSSLOCK(\"EPT\",ept)\r	. d trigUpdate^CSSUPTRG(\"EPT\",ept,\"\",$$^HUIDFN(1,\"EMP\"),\"Cancelled Admission Cleanup\",\"\",\"\",\"\",1,\"\",\"\",4)\r	. w l,\"FIXED\"\r	q\r\rd cleanup()\r',NULL),(1633,'0604-NCAL-SPR07SLG376033','INPATIENT EMR',NULL,'REIMER, KRISTIE            ','Data Corruption',' ',' ',0,'Open','2009-06-03 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0604-NCAL-Spr07SLG376033.doc#',NULL,'376033',NULL,' ','F117112','KP N CALIFORNIA REGION ','The code associated with this RA is meant to be shared with Melanie Galvan from NCAL.\r\rReference SLG 376033.\r\rzr\rzl\rUpdateEndDate2(change) ;\r	n eptID,eptDAT,ordID,ln,twr17100,DCDate,endDate,bid,ptLck,mrn,cnt,ordLck,time,flag,kTime\r	k ^XFUTUREDC\r	s:change bid=$$AuditBatch^EAETBT1\r	f  s eptID=$$znxCxID^EAXLIB(\"EPT\",10102,2,eptID) q:eptID=\"\"  d \r	.s:change ptLck=\"\"\r	.f  s eptDAT=$$znxCxDt^EAXLIB(\"EPT\",10102,2,eptID,eptDAT) q:eptDAT=\"\"  d\r   	..s cnt=cnt+1\r	..s mrn=$$zDnxVs^EA0LIB8(\"EPT\",eptID,2060,50140,2061)\r	..f ln=1:1:$$geti^EAXLIB(\"EPT\",eptID,17100,0,99999,.twr17100) d\r	...s:change ordLck=\"\"\r	...s ordID=$$geti^EAXLIB(\"EPT\",eptID,17100,ln,99999,twr17100)\r	...q:$$getn^EAXLIB(\"ORD\",ordID,1,\"34010;13\")=2  ;ORD 34010-quit if Inpatient\r 	...i eptID\'=$$getidin^%Zefnlib($$getn^EAXLIB(\"ORD\",ordID,1,\"1;1\"),\"EPT\") q    ;if order doesn\'t belong to this patient\r	...s DCDate=$$getn^EAXLIB(\"ORD\",ordID,1,\"7056;3\")   ;DCInstant\r	...q:DCDate=\"\"\r	...s DCDate=$$gmt2li^HUDATE(DCDate)   ;convert to local time\r	...s DCDate=DCDate\\86400\r	...s endDate=$$getn^EAXLIB(\"ORD\",ordID,1,\"7;9\")  ;end date\r	...i endDate>DCDate d\r	....i change=1 d\r	.....s:ptLck\'=1 ptLck=$$zlock^LULOCK(\"EPT\",eptID)\r	.....i \'ptLck s ^XFUTUREDC(\"lock\",eptID)=\"|\"_mrn_\"|\"_ordID\r	.....s:(ordLck\'=1)&(ptLck=1) ordLck=$$zlock^LULOCK(\"ORD\",ordID)\r	.....i (ordLck\']\"\"),(ptLck=1) s ^XFUTUREDC(\"lock\",eptID)=\"|\"_mrn_\"|\"_ordID \r	....s ^XFUTUREDC(eptID,ordID)=\"|\"_mrn_\"|\"_ordID_\"|\"_endDate_\"|\"_DCDate\r	....q:(change\'=1)!(ptLck\'=1)!(ordLck\'=1)\r	....s %=$$putn^EAXLIB(\"ORD\",ordID,1,\"7;9\",DCDate)  ;save date\r	....s %=$$IndexMed^LMIUTIL1(ordID,1)   ;second param 1 - don\'t mess with encounter meds\r	...s:ordLck]\"\" %=$$zunlock^LULOCK(\"ORD\",ordID)  ;unlock order if locked\r	..d:(bid]\"\")&(cnt#100=0) FlushBatch^EAETBT1(bid)\r	.s:ptLck]\"\" %=$$zunlock^LULOCK(\"EPT\",eptID)  ;unlock patient if locked\r	d:bid]\"\" EndBatch^EAETBT1(bid)  ;close batch if one is open\r	s dollarH=$H   \r	s time=$p(dollarH,\",\",2)  ;piece out time\r	f  s kTime=$o(^XFUTUREDCT(kTime)) q:(flag!(kTime=\"\"))  d\r	. s flag=($$din^%Zefnlib(kTime)>(dollarH-30)) \r	. i \'flag k ^XFUTUREDCT(kTime)\r	s ^XFUTUREDCT($$dout^%Zefnlib(dollarH),$$tout^%Zefnlib(time))=1  ;Add the time since the run was successful\r	q\r\rd UpdateEndDate2(0)\r\r',NULL),(1634,'0721-SCAL-SPR07SLG413116','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ',' ','Server Only',0,'Open','2009-07-20 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0721-SCAL-Spr07SLG413116.doc#',NULL,'413116',NULL,' ','F117112','KP S CALIFORNIA REGION ',NULL,NULL),(1636,'0608-NCAL-Spr07SLG397896','RADIOLOGY',NULL,'CARTHEW, ROB            ',' ',' ','Server Only',0,'Open','2009-06-05 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0608-NCAL-Spr07SLG397896.doc#',NULL,'397896',NULL,' ','F117112','KP N CALIFORNIA REGION ',';The code associated with this RA is meant to be shared with Lisa Pfeifer and the Radiant team from NCAL.\r;RA #1636\r\rFront desk report code\ri $$risIsImagingOrd^RISLIB1(OrdId),($$getn^EA0LIB(\"ORD\",OrdId,1,\"34010;13\")=2) s %=$$putn^EAXLIB(\"ORD\",OrdId,1,\"7;9\",\"\",\"\",7070)\r\rMRMS Filter code\r$$getn^RISACCESSOR(\"ORD\",ordId,1,\"1;7\")\']\"\"\r\r',NULL),(1638,'20090609 - KPNCAL - RUN SEARCH FOR ACTIVE FUTURE AND STANDING LAB AND RAD ORDERS WITH QUANTITIES GREATER THAN ONE','EPICCARE AMBULATORY',NULL,'DAVEY, DREW            ',' ','Other','Server Only',0,'Open','2009-06-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\20090609 - KPNCAL - RUN SEARCH FOR ACTIVE FUTURE AND STANDING LAB AND RAD ORDERS WITH QUANTITIES GREATER THAN ONE.doc#',NULL,'398359',NULL,' ','F117112','KP N CALIFORNIA REGION ',';The code associated with this RA is meant to only be shared with appropriate API/SI engineers.\r;\r;This file is associated with SLG 398359 / HD 4552891. It provides a cut-and-paste search utility to identify active future\r;and standing lab and radiology orders which have invalid quantities.\r;\r;Parameters for the \"search\" tag at the end of this file:\r;    - subset: set to the name of the subset which will contain the identified ORD records\r;    - user: set to the EMP ID of the user running the search. This user requires security to create subsets.\r;    - lookback: set to the number of orders which should be searched. The search looks at homed orders in \r;                reverse-chronological order. Default value is 30,000,000.\rzr\rzl\rsearch(subset,user,lookback)\r	n depl,oid,bll,OK,dotscnt,fAry,rAry,rsn,stdSt\r	;\r	;initialize\r	;\r	d ^HUINIT,^EAINISET(\"ORD\",.OK,1)\r	i \'OK w !,\"Unable to switch to ORD masterfile. Quitting...\" q\r	s user=$$strip^HULIB6(user)\r	i user=\"\" w !,\"No user specified for subset creation. Quitting...\" q\r	s user=$$up^%Zdfnlic(user)\r	i \'$$zisID^EAXLIB2(\"EMP\",$$^HUIDFN(user,\"EMP\")) w !,\"Invalid user specified. Quitting...\" q\r	s user=$$getidout^%Zefnlib(user,\"EMP\")\r	s depl=$$zgtActDp^EALIB20()\r	s:+lookback=0 lookback=30000000\r	s oid=^ED0D(\"ORD\",\"LIDN1\")+1  ;seed ORD ID\r	;\r	;set up \"Reason\" array\r	;\r	s rAry(1)=\"Not lab / rad\"\r	s rAry(2)=\"Order Quantity 0 or 1\"\r	s rAry(3)=\"Child order\"\r	s rAry(4)=\"Not outpatient mode\"\r	s rAry(5)=\"Normal order\"\r	s rAry(6)=\"Standing / future order expired\"\r	s rAry(7)=\"Standing order with no remaining occurrences\"\r	s rAry(8)=\"Future order already released\"\r	s rAry(9)=\"Order cancelled.\"\r	s rAry(10)=\"Not filtered -> added to subset\"\r	;\r	;subset\r	;\r	s subset=$$strip^HULIB6(subset)\r	i subset=\"\" w !,\"No subset specified. Quitting...\" q\r	s subset=$$up^%Zdfnlic(subset)\r	i $$exists^ECB1(subset) q:\'$$yn^%Zefnlic(\"Subset \"\"\"_subset_\"\"\" already exists. Continuing will cause it to be deleted. Would you like to continue\")\r	s %=$$delete^ECB1(subset)\r	i \'$$create^ECB1(subset,\"ORD\",user,\"Y\",+$H,+$H+30,\"Std/fut lab/rad orders w/ quantity>1\") d  q\r	. w !,\"Unable to create subset. Quitting...\"\r	;\r	;start looping\r	f  s oid=$O(^EX(\"ORD\",9,depl,oid),-1) q:(oid=\"\")  d  q:\'(dotscnt<lookback)  ;limit to last 30,000,000 orders\r	. d dots(.dotscnt,100,1000)\r	. i $$zgetnp(\"ORD\",oid,90,1,99999)=4 s fAry(9)=fAry(9)+1 q  ;order is cancelled\r	. i \",5,1008,7,1033,1038,\"\'[(\",\"_$$zgetnp(\"ORD\",oid,30,1,99999)_\",\") s fAry(1)=fAry(1)+1 q  ;not lab/rad\r	. i (+$$zgetnp(\"ORD\",oid,170,1,99999))<2  s fAry(2)=fAry(2)+1 q  ;order quantity one or zero\r	. i $D(^EX(\"ORD\",660,oid)) s fAry(3)=fAry(3)+1 q  ;child order\r	. i \'($$getn(\"ORD\",oid,1,\"34010;13\")=1)  s fAry(4)=fAry(4)+1 q  ;not OP-mode\r	. s bll=$$zgetbll(\"ORD\",oid,600,99999)\r	. s stdSt=+$$zgetpcl(bll,1,1)\r	. i stdSt=0  s fAry(5)=fAry(5)+1 q  ; normal order\r	. i $$zgetpcl(bll,2,1)<+$H  s fAry(6)=fAry(6)+1 q  ;standing / future order are expired\r	. i (stdSt=1),(+$$zgetpcl(bll,5,1)=0)  s fAry(7)=fAry(7)+1 q  ;standing order with no standing occurrences remaining\r	. i (stdSt=2),(+$$zgetnp(\"ORD\",oid,660,0,99999)>0)  s fAry(8)=fAry(8)+1 q  ;future order already released\r	. d addTo^ECB1(subset,oid,\"_999999999\") s fAry(10)=fAry(10)+1\r	;\r	;stats\r	;\r	w !!,\"Reasons for order filtering\"\r	f  s rsn=$O(fAry(rsn)) q:rsn=\"\"  w !,rAry(rsn),\": \",+fAry(rsn)\r	w !!,+dotscnt,\" ORD records searched\"\r	w !,+$P(^SUBSET(subset),\"_\",7),\" ORD records identified.\"\r	q\rzgetbll(ini,id,si,dat) i dat=\"\"!(dat=99999) q ^EN(ini,id,si)\r	q ^EM(ini,id,dat,si)\rzgetnp(ini,id,itm,ln,dat,pd) s:dat=\"\" dat=99999\r	q ^ER1(ini,id,itm,dat,ln)\rzgetpcl(v,pc,ln) q $p($p(v,$c(1),pc),$c(2),ln+1)\rgetn(ini,id,ln,ip,pd) q $s($p(ip,\";\",3):$p(^ENU(ini,id,+ip,ln),$c(1),$p(ip,\";\",2)),1:$p($p(^EN(ini,id,+ip),$c(1),$p(ip,\";\",2)),$c(2),ln+1))\rdots(cnt,dot,num,BKG)\r	s cnt=cnt+1\r	q:BKG\r	w:$X>70 !\r	i +num\'=0,cnt#num=0 w cnt\\num i 1\r	e  w:(+dot\'=0)&(cnt#dot=0) \".\"\r	q\r\rsearch(\"\",\"\",\"\")\r',NULL),(1641,'0611-NCAL-SPR07SLG386977','INPATIENT EMR',NULL,'SPINOZZI, MARIA            ','General Help','Clean-Up','Server Only',0,'Open','2009-06-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0611-NCAL-Spr07SLG386977.doc#',NULL,'386977',NULL,' ','F117112','KP N CALIFORNIA REGION ','; The code associated with this RA is meant to be shared with Susan Gall from N CAL\r\r\rzr\rzl\rFindEOWs(retract)\r	n invalid,bid,batchcnt,total,oldExtrct,dep\r	i retract d\r	. r !,\"Enter user to list as Retracting User: \",user\r	. s user=$$^HUIDFN(user,\"EMP\")\r	. i \'$$zisID^EAXLIB2(\"EMP\",user) w !,\"You must enter a valid user.\"  s invalid=1 q\r	q:invalid\r	s dep=$$zgtActDp^LNOSEND  ;gets deployment number\r	i retract d\r	. d ^HUINIT\r	. s bid=$$AuditBatch^EAETBT1() d  ;open/obtain batch\r	. i bid=\"\" w !,\"Unable to open batch job. Quitting...\" s invalid=1\r	q:invalid\r	s:retract oldExtrct=%EA(\"E\",\"DELAY CLARITY EXTRACTION\"),%EA(\"E\",\"DELAY CLARITY EXTRACTION\")=1\r	w !!,\"Finding Referral Notices...\"\r	w !,\"Message ID|Sender|Sent On|Patient|Status|Retracted?\"\r	d Check(21,user,bid,.batchcnt,.total,dep)  ; find affected EOWs of type 21 (referral notices)\r	w !,\"Total Referral Notices: \",total\r	w !!,\"Finding Order Messages...\"\r	s total=\"\"\r	d Check(12,user,bid,.batchcnt,.total,dep)  ; find affected EOWs of type 12 (orders)\r	w !,\"Total Order Messages: \",total\r	d:retract EndBatch^EAETBT1(bid,.batchcnt)  ;close batch\r	s:retract %EA(\"E\",\"DELAY CLARITY EXTRACTION\")=oldExtrct\r	q\rCheck(type,user,bid,batchcnt,total,dep)\r	n eowid,regLines,ln,found,sender,sent,patient,stat\r	f  s eowid=$O(^EX(\"EOW\",30,type,eowid)) q:eowid=\"\"  d  ;loop through eows with type Referral Notice\r	. q:$$zgetnp^EAXLIB11(\"EOW\",eowid,210,1,99999)>3  ;ignore if done\'d, retracted, or Edited\r	. q:$$zgetnp^EAXLIB11(\"EOW\",eowid,17,1,99999)\'=dep\r	. s regLines=$$getn^EALIB2(\"EOW\",eowid,0,\"100;2;1\")\r	. s found=\"\"\r	. f ln=1:1:regLines d  q:found\r	. . s:$$getn^EALIB2(\"EOW\",eowid,ln,\"100;2;1\")=111124 found=1\r	. q:\'found\r	. s total=total+1\r	. ;collect & write out eow info\r	. ;140,145,120,210\r	. s sender=$$zgetnp^EAXLIB11(\"EOW\",eowid,140,1,99999)\r	. s sent=$$date^%Zdfnlib($$zgetnp^EAXLIB11(\"EOW\",eowid,145,1,99999),\"\",1)\r	. s patient=$$znam^JCENSUS(\"EPT\",$$getidin^%Zefnlib($$zgetnp^EAXLIB11(\"EOW\",eowid,120,1,99999),\"EPT\"))\r	. s stat=$$zgetCat^EALIB6($$zgetnp^EAXLIB11(\"EOW\",eowid,210,1,99999),1,\"EOW\",210)\r	. w !,eowid,\"|\",sender,\"|\",sent,\"|\",patient,\"|\",stat\r	. w:\'retract \"|Found\"\r	. d:retract Retract(eowID,user,bid,.batchcnt)\r	q\rRetract(eowid,user,bid,batchcnt)\r	s %=$$Retract^LOIMISC8(eowid,user,5)   ;locking is handled within function\r	i $$zgetnp^EAXLIB11(\"EOW\",eowid,210,1,99999)\'=5 w \" ...Could Not be Retracted. \" q\r	e  w \"|Retracted. \" s ret=1+ret\r	s batchcnt=batchcnt+1\r	i batchcnt>50 d  ;flush batch every ~50 eows changed.\r	. s batchcnt=0\r	. d FlushBatch^EAETBT1(bid)\r	q\r\rd FindEOWs\r',NULL),(1643,'0611-NCAL-Spr07SLG393673','EPICCARE AMBULATORY',NULL,'HABBLEY, RYAN            ',' ',' ','Server Only',0,'Open','2009-06-10 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1643 0611-NCAL-Spr07SLG393673.doc#',NULL,'393673',NULL,' ','F117112','KP N CALIFORNIA REGION ',';0611-NCAL-Spr07SLG393673\r\r;This file is associated with RA 1643, SLG 393673, and CHG000003661290.\r\r\rEnter this code into the run parameters of the menu (E2U) record:\rEMRWebApp75.MRPOST|d baseCnfg^LSSO(\"\",\"d baseGet^LYMTSLSSO(\"\"\"\",\"\"\"\",50140,\"\"https://ttg-qa03.har.ca.kp.org/php/showPhp\"\",\"\"param^ssoMRN^\"\"_$$getidout^%Zefnlib($$gtUserID^HULIB1(),\"\"EMP\"\"),\"\"?\"\",\"\" \"\")\",\"\",\"\",1,\"\")\r',NULL),(1644,'0617-NCAL-SPR07SLG402190','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ','Fax #:','608-216-9843',0,'Open','2009-06-17 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1644.doc#',NULL,'402190',NULL,' ','F117112','KP N CALIFORNIA REGION ','; The remediation code associated with this RA is meant to be shared only with Systems Integration.\r; SLG 402190\r; PR 4579319\r;\r; The remediation script cleargen takes as input a list of ORD CIDs and resets their\r; Chart Sync generations on all deployments except the ORD owning deployment. It should\r; be run in all deployments before pubgen is run anywhere.\r;\r; The remediation script pubgen takes as input the same list of ORD CIDs and marks\r; these orders\' Chart Sync generations to be rebuilt and resent the next time an\r; outgoing Chart Sync message for the associated patient is sent from the ORD owning deployment.\r\rzl\rcleargen\r  n here,cid,id,own\r  s here=$$zgtActDp^EAXLIB()\r  f  r !,cid q:cid=\"\"  d\r  . s id=$$zCIDgtID^ASMIFL2(\"ORD\",cid,\"\",12,11) q:id=\"\"\r  . s own=$$zGetLOwn^ASMIFL2(\"ORD\",id,.twr,9)\r  . i own\'=here d\r  . . k ^ER4N(\"ORD\",id),^ER4(\"ORD\",id),^ER6N(\"ORD\",id),^ER6(\"ORD\",id)\r  . . w \"|\",id,\"|CS data cleared\"\r  q\r\rd cleargen\r\rzl\rpubgen\r  n here,cid,id,own,rtarr,eptcid,ept\r  s here=$$zgtActDp^EAXLIB()\r  f  r !,cid q:cid=\"\"  d\r  . s id=$$zCIDgtID^ASMIFL2(\"ORD\",cid,\"\",12,11) q:id=\"\"\r  . s own=$$zGetLOwn^ASMIFL2(\"ORD\",id,.twr,9)\r  . i own=here d\r  . . k rtarr\r  . . s %=$$zgRtRecs^CSSBTCH2(\"ORD\",id,\"\",.rtarr)\r  . . s eptcid=$o(rtarr(\"EPT\",\"\"))\r  . . s ept=rtarr(\"EPT\",eptcid)\r  . . i ept=\"\" w \"|\",id,\"|Root EPT not identified\" q\r  . . k ^ER6N(\"ORD\",id,\"LPG\")\r  . . s ^ER4N(\"EPT\",ept,\"L\",\"ORD\",id)=\"\"\r  . . d trigUpdate^CSSUPTRG(\"EPT\",ept,\"\",UID,\"\",\"\",\"\",\"\",1,\"\",\"\",4)\r  . . w \"|\",id,\"|Generations marked for rebuild\"\r  q\r\rd pubgen\r\r\r\r\r\r\r\r',NULL),(1647,'CLEAR SETUP AND CLEANUP TIMES FROM PROCEDURES','OPTIME',NULL,'SAUDER, ADAM            ',' ','Enhancement','Server Only',0,'Open','2009-06-26 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1647 - OpTime - Clear Setup and Cleanup Times from Procedures.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1648,'KP NCAL - REMOVE PATIENT FROM VERIFY QUEUE','EPICRX',NULL,'SHARKEY, THOMAS            ',' ','Not Applicable','Server Only',0,'Open','2009-06-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1648 - Cleanup Patient Stuck on Verification Queue PRODCAM1.doc#',NULL,'405587',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1649,'TRANSFER COMPLETION UTILITY FOR MED REC CUTOVER','INPATIENT EMR, ORDERS',NULL,'SPINOZZI, MARIA            ','Other','Fix',' ',0,'Open','2009-06-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1649 NCAL Cutover IEV Utility1.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',';The code associated with this RA is meant to only be shared with appropriate API engineers.\r	;;---------\r	; NAME:         CompleteIEV (PUBLIC)\r	; DESCRIPTION:  To be run at NCAL/SCAL during cutover to\r	;               complete IEVs created and not completed during old med rec.\r	; CALLED BY  :  zr/zl\r	; PARAMETERS :  fix (I,OPT) - set to 1 to change the records,default is report mode only\r	;              patID (I,OPT) - set to a patient ID (internal) to run on a single patient contact.\r	;                  If set, patDAT must also be set\r	;              patDAT (I,OPT) - set to a patient DAT to run on a single patient contact.\r	;                  If set, patID must also be set.\rCompleteIEV(fix,patID,patDAT)\r	n ievID,CSN,invalid,dep,ievcount,success,EndDate,EndTime,mrn,ptname\r	n Edte,bid,instant,batchcnt\r	i patID\'=\"\" i patDAT=\"\" w !,\"Patient ID specified without a patient DAT. Quitting...\" q\r	i patDAT\'=\"\" i patID=\"\" w !,\"Patient DAT specified without a patient ID. Quitting...\" q\r	r !,\"Enter date new med rec went live (mm/dd/yyyy): \",EndDate\r	d ^EATD(EndDate,.Edte)  ;verify that date is valid, and get DTE\r	i Edte=\"\" w !,\"Invalid date.\" q  ;quit if no End date\r	r !,\"Enter time new med rec went live (hh:mm am/pm) such as \"\"10:13 am\"\": \",EndTime\r	s instant=$$mktime^HULIB41(Edte,$$tin^HULIB17(EndTime))\r	w !,\"instant: \",instant\r	w !,\"Patient ID|Patient DAT|IEV|Create Instant|MRN|Name|Completed?\"\r	s dep=$$zgtActDp^LNOSEND()  ;get deployment number\r	i fix d\r	. d ^HUINIT\r	. s bid=$$AuditBatch^EAETBT1() d  ;open/obtain batch\r	. i bid=\"\" w !,\"Unable to open batch job. Quitting...\" s invalid=1\r	q:invalid\r	s success=0\r	i patID\'=\"\" d\r	. s CSN=$$zgetnp^EAXLIB11(\"EPT\",patID,8,1,patDAT)\r	. f  s ievID=$$zTnxID^EALIB42(\"IEV\",28,CSN,21,35100,1600,1,ievID) q:ievID=\"\"  d\r	. . q:$$getn^EAXLIB(\"IEV\",ievID,1,\"24;6\")>instant  ;do not touch IEVs created after go-live\r	. . q:$$zgetnp^EAXLIB11(\"IEV\",ievID,17,1,99999)\'=dep  ;not owning deployment\r	. . s ievcount=ievcount+1\r	. . s mrn=$$zDnxVs^EAXLIB(\"EPT\",patID,2060,50140,2061),ptname=$$NameOut^HUNETNM(\"EPT\",patID,2,0)\r	. . w !,patID,\"|\",patDAT,\"|\",ievID,\"|\",$$dateTime^JULIB2($$getn^EAXLIB(\"IEV\",ievID,1,\"24;6\"),1),\"|\",mrn,\"|\",ptname\r	. . i fix d Clean(ievID,.success,.batchcnt,bid) i 1\r	. . e  w \"|Found\"\r	e  f  s patID=$$znxCxID^JAASCH1(\"EPT\",10102,2,patID) q:patID=\"\"  d\r	. f  s patDAT=$$znxCxDt^JALERT1(\"EPT\",10102,2,patID,patDAT) q:patDAT=\"\"  d\r	. . s CSN=$$zgetnp^EAXLIB11(\"EPT\",patID,8,1,patDAT)\r	. . f  s ievID=$$zTnxID^EALIB42(\"IEV\",28,CSN,21,35100,1600,1,ievID) q:ievID=\"\"  d\r	. . . q:$$getn^EAXLIB(\"IEV\",ievID,1,\"24;6\")>instant  ;do not touch IEVs created after go-live\r	. . . q:$$zgetnp^EAXLIB11(\"IEV\",ievID,17,1,99999)\'=dep  ;not owning deployment\r	. . . s ievcount=ievcount+1\r	. . . s mrn=$$zDnxVs^EAXLIB(\"EPT\",patID,2060,50140,2061),ptname=$$NameOut^HUNETNM(\"EPT\",patID,2,0)\r	. . . w !,patID,\"|\",patDAT,\"|\",ievID,\"|\",$$dateTime^JULIB2($$getn^EAXLIB(\"IEV\",ievID,1,\"24;6\"),1),\"|\",mrn,\"|\",ptname\r	. . . i fix d Clean(ievID,.success,.batchcnt,bid) i 1\r	. . . e  w \"|Found\"\r	i fix d EndBatch^EAETBT1(bid)  ;close batch\r	w !,\"Total IEV records found: \",ievcount\r	w !,\"Total IEV records completed: \",success\r	q\rClean(ievID,success,batchcnt,bid)\r	q:ievID=\"\"\r	s batchcnt=batchcnt+1\r	i batchcnt>50 d  ;flush batch every ~50 orders changed.\r	. s batchcnt=0\r	. d FlushBatch^EAETBT1(bid)\r	s %=$$CreateEvent^JORDRECEVENT(ievID,35310,35100)  ;locks IEV, sets status to complete\r	i $$getn^EAXLIB(\"IEV\",ievID,1,\"1600;1\")=3 w \"|Success\" s success=success+1\r	e  w \"|Not Completed\"\r	q\r\rd CompleteIEV(\"\")\r',NULL),(1650,'CANCELLED ORDER CLEANUP FOR PRODSBM','EPICRX',NULL,'SHARKEY, THOMAS            ',' ','Fix','Server Only',0,'Open','2009-06-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1650 - Cleanup Cancelled Orders.doc#',NULL,'406204',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1651,'NCAL_169751 - 20090629 - 898315 - FIX I ORD 805','EDI',NULL,'BLEDSOE, NEIL            ','Other','Fix','Server Only',0,'Open','2009-06-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\585-NCAL_169751-2090629-898315-FIX_I_ORD_805.doc#',NULL,'406945',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1655,'RA 1655 - CR - REMOVAL OF UNRELEASED COLUMNS ON ARPB_TX_MODERATE','CLARITY',NULL,'PILLAI, KARTHIK            ','Other','Fix','Server Only',0,'Open','2009-07-02 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1655 - CR - REMOVAL OF UNRELEASED COLUMNS ON ARPB_TX_MODERATE.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1657,'0707-NCAL-SPR07SLG401414','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ',' ','Server Only',0,'Open','2009-07-06 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0707-NCAL-Spr07SLG401414.doc#',NULL,'401414',NULL,' ','F117112','KP N CALIFORNIA REGION ','; Resolve same-data conflicts on group ORD-1001\r; HD0000004574688\r; SLG 401414\r; This code is intended for use by NCAL IntraConnect application support\r;\r; Resolves Chart Sync conflicts on group ORD-1001 if there is presently no difference\r; between the current and incoming data, or if the only difference is zero vs. null for\r; item ORD-7098. In the latter case, it preferentially takes the null over the zero.\r;\r; Example use:\r; d resolveEPT693(0) ; read-only mode, report on conflicts that will be resolved by the utility\r; d resolveEPT693(1) ; fix mode, actually resolve the conflicts\r\rzl\rresolveORD1001(FIXMODE)\r  n UID,bid,ord,cnode,e1l,ord,status,resolve,cnt\r  n cur7098,cur7099,in7098,in7099\r  s UID=$$GetUID^CSSRECV()\r  s here=$$zgtActDp^EAXLIB() \r  i FIXMODE=1 s bid=$$AuditBatch^EAETBT1() i bid=\"\" d\r  . s FIXMODE=0\r  . w !,\"Could not open audit batch. Proceeding in search-only mode.\",!\r  w !,\"Index\",?11,\"ORD\",?22,\"Resolution\"\r  f  s ord=$o(^CSSCONFLICT(\"GroupIndex\",\"ORD\",ord)) q:ord=\"\"  d\r  . f  s cnode=$o(^CSSCONFLICT(\"GroupIndex\",\"ORD\",ord,99999,1001,cnode)) q:cnode=\"\"  d\r  . . i ^CSSCONFLICT(cnode,\"IsOwner\")\'=1 q\r  . . s e1l=^CSSCONFLICT(cnode,\"E1LID\") q:e1l=\"\"\r  . . w !,cnode,?11,ord\r  . . s status=$$getn^CSSCONFLC2(\"E1L\",e1l,1,\"1000;5\") i status=5 w ?22,\"Already resolved\" q\r  . . s cur7098=$$geti^EAXLIB(\"ORD\",ord,7098,1,99999)\r  . . s cur7099=$$geti^EAXLIB(\"ORD\",ord,7099,1,99999)\r  . . s in7098=^CSSCONFLICT(cnode,\"InData\",7098,1)\r  . . s in7099=^CSSCONFLICT(cnode,\"InData\",7099,1)\r  . . i in7099\'=cur7099 w ?22,\"None - difference in item 7099 (MDL pointer)\" q\r  . . i (+in7098)\'=(+cur7098) w ?22,\"None - difference in item 7098 (long term indicator)\" q\r  . . s resolve=\"\"\r  . . i (cur7098=\"\")!((cur7098>0)&(cur7098<5)) s resolve=\"Current\" i 1\r  . . e  s resolve=\"Incoming\"\r  . . w ?22,resolve\r  . . i FIXMODE=1 d \r  . . . s cnt=cnt+1 \r  . . . s %=$$resolve^CSSCONFLC4(e1l,UID,(resolve=\"Incoming\"))\r  . . . s %=$$insrti^CSSCONFLCT(1050,\"Resolved by Command Line Utility\",\"\",\"\",\"\",e1l,99999,\"E1L\")\r  . . . i cnt#100=0 d FlushBatch^EAETBT1(bid)\r  i FIXMODE=1 d EndBatch^EAETBT1(bid)\r  q\r\r\r\r',NULL),(1658,'0707-NCAL-SPR07SLG369876','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ','Other','Server Only',0,'Open','2009-07-06 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0707-NCAL-Spr07SLG369876.doc#',NULL,'369876',NULL,' ','F117112','KP N CALIFORNIA REGION ','; This search code is intended for use by NCAL IntraConnect support personnel,\r; to assist with testing CR 2723 (package E758911, Chart Sync historical notes)\r; SLG 369876\r;  \r;\r; Search parameters are the beginning and end dates of the search, and the list of note types\r; (category values from item INP-5010) to search over.\r;\r; Examples of use:\r; d notesyncrpt(\"\",\"12/31/2008\",10) ; notes of type 10, created 12/31/2008 or before\r; d notesyncrpt(\"1/1/2008\",\"12/31/2008\",10) ; notes of type 10 created 1/1/2008 - 12/31/2008 inclusive\r; d notesyncrpt(\"\",\"\",10) ; notes of type 10, any creation date\r; d notesyncrpt(\"\",\"\",\"10^11^12\") ; notes of types 10, 11 and 12, any creation date\r\rzl\rnotesyncrpt(start,stop,typelist)\r  n pc,type,notetypes,here,hno,inp,ept,hometwr,homeitem,hnocid,inpcid,eptcid\r  i start]\"\" s start=$$din^CSSAXNOTESYNC(start) q:start=\"\" \r  i stop]\"\" s stop=$$din^CSSAXNOTESYNC(stop) q:stop=\"\"  i 1\r  e  s stop=+$h\r  f pc=1:1:$l(typelist,\"^\") s type=$p(typelist,\"^\",pc) i type]\"\" s notetypes(type)=\"\"\r  s type=\"\",here=$$zgtActDp^EAXLIB()\r  f  s type=$o(notetypes(type)) q:type=\"\"  d\r  . f  s hno=$$znxIxID^CSSAXNOTESYNC(\"HNO\",34033,type,hno) q:hno=\"\"  d\r  . . i $$check^CSSAXNOTESYNC(hno,start,stop,.inp,.ept,.hometwr,.homeitem) d\r  . . . s hnocid=$$zGtCID^EAXLIB(\"HNO\",hno)\r  . . . s inpcid=$$zGtCID^EAXLIB(\"INP\",inp)\r  . . . s eptcid=$$zGtCID^EAXLIB(\"EPT\",ept)\r  . . . w !,here,\"|\",hnocid,\"|\",inpcid,\"|\",eptcid\r  q\r',NULL),(1660,'KP NCAL - MYCHART TO SBS COMMUNICATION DLL WITH ADDITIONAL LOGGING','MYCHART',NULL,'PARK, KEVIN            ',' ',' ','Client Only',0,'Open','2009-07-08 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\20090709_-_KP_NCAL_-_Deliver_MyChart_to_SBS_communication_dll_with_additional_logging.doc#',NULL,'403413',NULL,' ','G336027','KP N CALIFORNIA REGION ',NULL,NULL),(1662,'KP NCAL - REPOST NONCOVERED CHARGES','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ',' ','Fix','Server Only',0,'Open','2009-07-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1662 - HB Repost Noncovered Charges1.doc#',NULL,' ',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,'F327190'),(1663,'TURN ON TABBED ABSTRACTING ACTIVITY IN WITS','HIM',NULL,'GANNON, KYLE            ','Other','Enhancement','Server Only',0,'Open','2009-07-10 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1663 - Turn on Tabbed Abstracting Activity.doc#',NULL,'400327',NULL,' ','F117112','KP N CALIFORNIA REGION ',NULL,NULL),(1664,'0716-NCAL-SPR07SLG374575','EPICCARE AMBULATORY',NULL,'BUCKINGHAM, ADAM            ',' ','Other','Server Only',0,'Open','2009-07-15 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0716-NCAL-Spr07SLG374575.doc#',NULL,'374575',NULL,' ','F117112','KP N CALIFORNIA REGION ','This code is meant to be shared with Zheng Huang from NCAL.\r--------------------------------------\r.\rzr\rzl\rPatSrch(startID)  \r          n eptID,eptDAT,cown,eptDAT2stop,eptDAT2,found,idx,eptDts\r          n cntFound,mrn\r          s:startID]\"\" startID=$$znxCxID^EA0LIB8(\"EPT\",30,109,startID,-1)  ;need to start one before the start ID\r          s eptID=startID\r          w !,\"    CID   |   MRN    | Contact\"\r	  f  s eptID=$$znxCxID^EA0LIB8(\"EPT\",30,109,eptID) q:eptID=\"\"  d  \r          . q:\'$$zisLHome^EALIB40(\"EPT\",eptID,\"\",\"\",9)  ;only srch locally owned patient\r          . s eptDAT=\"\"\r          . f  s eptDAT=$$znxCxDt^EA0LIB8(\"EPT\",30,109,eptID,eptDAT) q:eptDAT=\"\"  d\r          . . s found=\"\"\r          . . s cown=$$zGetCOwn^EALIB20(\"EPT\",eptID,eptDAT)\r          . . s eptDAT2stop=((eptDAT+.99)\\1)  ;stop at the beginning of the day for this dat\r          . . q:eptDAT2stop=eptDAT            ;no multiple contacts\r          . . s eptDAT2=eptDAT                ;we already know the most recent	 \r          . . f  s eptDAT2=$$znxCxDt^EA0LIB8(\"EPT\",30,109,eptID,eptDAT2) q:eptDAT2=\"\"!(eptDAT2>eptDAT2stop)  d\r          . . . i cown\'=$$zGetCOwn^EALIB20(\"EPT\",eptID,eptDAT2) s found=1\r          . . i found d  ;since contacts from different deployments exist on the same date, ept 21906 must be populated\r          . . . q:($$getr^EA0LIB(\"EPT\",eptID,1,eptDAT,\"21905;2\")]\"\")  ;quit - already populated\r          . . . s cntFound=cntFound+1\r          . . . s mrn=$$mpiGetID^LYSAHSCT(\"EPT\",eptID,-1,501711,\"\",\"\",1,1)\r	  . . . w !,$$zGtCID^EALIB20(\"EPT\",eptID)_\" | \"_mrn_\" | \"_eptDAT\r          . . s:eptDAT2\'=\"\" eptDAT=eptDAT2-.01 q\r          w !,!,\"Found \",cntFound,\" Records\"\r          q\r\rd PatSrch()\r',NULL),(1665,'Flag Orders with Extended Expiration Dates for Scheduling','EPICCARE AMBULATORY',NULL,'BUCKINGHAM, ADAM            ','Other','Other','Server Only',0,'Open','2009-07-17 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0722-NCAL-Spr07SLG388351.doc#',NULL,'388351',NULL,' ','F117112','KP N CALIFORNIA REGION ','; The code associated with this RA is meant to be shared with Zheng Huang from NCAL.\r\r\r\rzr\rzl\rExpiredFlag(change,maxcnt)\r	n cnt,actDep,bid,sttime,stglo,stlines,ordid,exit,ordtype,si600,ordstat,exp,actcnt,action,found,chgcnt\r	n grp,endtime,endglo,endlines,tottime,hours,mins,secs,ID,batchId,cnt,oid,repcnt,stop,fixcnt\r	n ordername,patmrn,padid,auditCnt,auditFound,childCID,childCount,ln,childid\r	d ^HUINIT\r	k ^XSCHEDFLAG,^XSCLOSE\r	s actDep=$$zgtActDp^LNODROP1()	\r	s:change bid=$$AuditBatch^EAETBT1,%EA(\"E\",\"DELAY CLARITY EXTRACTION\")=1\r	s sttime=$$time^%Zefnlib,stglo=$zu(67,9,$J),stlines=$zu(67,8,$J)\r	s ordid=^XLASTID(\"Last ID\") k ^XLASTID(\"Last ID\")\r	f  s ordid=$$znxIxID(\"ORD\",9,actDep,ordid) q:(ordid=\"\")!(exit=1)  d\r	. q:($$zgetnp(\"ORD\",ordid,157,1,99999)]\"\")  				;quit if already flagged\r	. w $$scrdots(.cnt,10000,100000)							;Increment overall counter\r	. s si600=$$zgetbll(\"ORD\",ordid,600,99999)\r	. s exp=$$zgetpcl(si600,2,1)								;ORD 610 - Standing Expiration Date\r	. q:(+$H>exp)&(exp]\"\")										;Expiration date exists and has passed\r	. s ordstat=+$$zgetpcl(si600,1,1)							;ORD 600 2=Future,1=Standing\r	. q:(ordstat=\'1)&(ordstat\'=2)								;ORD 600 is not future/standing\r	. q:(ordstat=2)&($$zgetnp(\"ORD\",ordid,660,0,99999)]\"\")		;Future order has been released\r	. q:(ordstat=1)&($$zgetpcl(si600,5,1)\']\"\")					;All standing occurrences released\r	. s auditCnt=$$getn(\"ORD\",ordid,0,\"3500;1;1\") q:+auditCnt=0    ;Quit if no item auditing\r	. s auditFound=\"\"\r	. f ln=1:1:auditCnt d  q:auditFound\r	. . i +$$getn(\"ORD\",ordid,ln,\"3500;1;1\")=610 s auditFound=1  ;check if item audit trail contains 610 \r	. q:\'auditFound\r	. q:$$getn(\"ORD\",ordid,1,\"34010;13\")\'=1						;ORD 34090 is not OP\r	. s ordtype=$$zgetnp(\"ORD\",ordid,30,1,99999)\r	. q:(ordtype\'=5)&(ordtype\'=7) 								;***Check this*** ORD 30 is not Lab or Imaging\r	. q:$$zgetnp(\"ORD\",ordid,90,1,99999)]\"\"						;Order Status is not active\r	. q:$$getn(\"ORD\",ordid,1,\"1;5\")]\"\"							;I ORD 500 = Yes -Pended Order	\r	. s actcnt=+$$getn(\"ORD\",ordid,0,\"50;3;1\") 					;Line count for ORD 760	\r	. f ln=1:1:actcnt d 											;Pull action line count\r	. . s action=$$getn(\"ORD\",ordid,ln,\"50;3;1\")					\r	. . s:(action=3)!(action=2) found=1							;Look for Signed or PendingSigned\r	. q:\'found													;Quit if order isn\'t signed\r	. i change=1 d  i 1\r	. . i \'$$zlock^%Zefnlid(\"ORD\",ordid,3) w !,\"Lock for order \"_ID_\" could not be obtained.\"  q   ;Lock order record\r	. . s %=$$insrti^LNODROP(157,1,\"\",\"\",\"\",ordid,99999,\"ORD\")				;Mark ORD 157=1 Appointment Needed\r	. . d cvRecord^RISCNV79413(ordid)							;Set ORD 153 for EAP/EDP\r	. . s %=$$zunlock^LULOCK(\"ORD\",ordid)						;Unlock order record\r	. . s ^XSCHEDFLAG(ordid)=\"\"									;Record altered ORD ID	\r	. . s childCount=$$zgetnp(\"ORD\",ordid,660,0,99999)			;check for child orders\r	. . i childCount]\"\" d\r	. . . f ln=1:1:childCount d\r	. . . . s childid=$$zgetnp(\"ORD\",ordid,660,ln,99999)		;get child id\r	. . . . q:$$zgetnp(\"ORD\",childid,157,99999,1)]\"\" 			;child flagged\r	. . . . s childCID=$$zGtCID^EALIB20(\"ORD\",childid)\r	. . . . s ^XCHILDREN(childCID)=\"\"							;build ^XCHILDREN for use later\r	. . s chgcnt=chgcnt+1										;Increment number of recs changed	\r	. . i (chgcnt#100)=0 d \r	. . . d FlushBatch^EAETBT1(bid)\r	. . i chgcnt>=maxcnt  w !,\"Maximum daily orders updated. Please restart again tomorrow.\" d\r	. . . d FlushBatch^EAETBT1(bid)\r	. . . s exit=1,^XLASTID(\"Last ID\")=ordid\r	. e  d\r	. . s grp=$$gtSchGrp^RISUTIL3(ordid)						;Find grouper\r	. . s ^XSCHEDFLAG(ordid,grp)=\"\"								;Flag ORD and future grouper for report\r	. . s chgcnt=chgcnt+1										;Increment number of recs to be changed\r	. i (cnt#1000)=0 d\r	. . i (^%Zdown)!(^XSCLOSE(\"STOP\")=1) s exit=1,^XLASTID(\"Last ID\")=ordid w !,\"Utility has been stopped.  Please restart again tomorrow.\"\r	d:change EndBatch^EAETBT1(bid)\r	k:change %EA(\"E\",\"DELAY CLARITY EXTRACTION\")\r	;\r	;Reporting\r	;\r	s endtime=$$time^%Zefnlib,endglo=$zu(67,9,$J),endlines=$zu(67,8,$J)\r	s tottime=endtime-sttime\r	s hours=(tottime)\\3600\r	s mins=((tottime)#3600)\\60\r	s secs=(((tottime)#3600)#60)\r	w !!,\"Process Statistics\",!\r	w !,\"Total Orders Processed: \"_+cnt\r	w !,\"Total Orders Flagged: \"_+chgcnt\r	w !,\"Start time: \",$$dm^%Zefnlib(sttime)\r	w !,\"End time: \",$$dm^%Zefnlib(endtime)\r	w !,\"Total time: \",hours,\"h \",mins,\"m \",secs,\"s\"\r	w !,\"Total global refs: \",endglo-stglo,\" (\",$J((endglo-stglo)/cnt,\"\",2),\" per order)\"\r	w !,\"Total lines: \",endlines-stlines,\" (\",$J((endlines-stlines)/cnt,\"\",2),\" per order)\"\r	i \'$$yn^%Zefnlic(\"Would you like to view a summary report\") q\r	w #\rfixrep	i change=1 d  i 1\r	. s oid=\"\",stop=\"\",fixcnt=\"\"\r	. s:$d(^XSCHEDFLAG(\"fixcnt\"))=1 oid=^XSCHEDFLAG(\"fixcnt\") k ^XSCHEDFLAG(\"fixcnt\")\r	. f  s oid=$o(^XSCHEDFLAG(oid)) q:(oid=\"\")!(stop=1)  d\r	. . s ordername=$$rpad($$znam(\"EAP\",$$zgetnp(\"ORD\",oid,40,1,99999)),40)\r	. . s padid=$$^HUIDFN($$getn(\"ORD\",oid,1,\"1;1\"),\"EPT\")\r	. . s patmrn=$$mpiGetID^LSSO(\"EPT\",padid,-1,50140)\r	. . w !,\"   Order ID: \"_oid_\"   Order: \"_ordername_\"   MRN: \"_patmrn\r	. . s fixcnt=fixcnt+1	\r	. . i fixcnt>65524 s ^XSCHEDFLAG(\"fixcnt\")=oid w !!,\"Max lines printed.  Please save to Excel and restart.\" s stop=1	\rrep	e  d\r	. s oid=\"\",grp=\"\",stop=\"\",repcnt=\"\"\r	. s:$d(^XSCHEDFLAG(\"repcnt\"))=1 oid=^XSCHEDFLAG(\"repcnt\") k ^XSCHEDFLAG(\"repcnt\")\r	. f  s oid=$o(^XSCHEDFLAG(oid)) q:(oid=\"\")!(stop=1)  d\r	. . f  s grp=$o(^XSCHEDFLAG(oid,grp)) q:(grp=\"\")!(stop=1)  d\r	. . . s ordername=$$rpad($$znam(\"EAP\",$$zgetnp(\"ORD\",oid,40,1,99999)),40)\r	. . . s padid=$$^HUIDFN($$getn(\"ORD\",oid,1,\"1;1\"),\"EPT\")\r	. . . s patmrn=$$mpiGetID^LSSO(\"EPT\",padid,-1,50140)\r	. . . w !,\"   Order ID: \"_oid_\"   Order: \"_ordername_\"   Grouper: \"_grp_\"   MRN: \"_patmrn\r	. . . s repcnt=repcnt+1	\r	. . . i repcnt>65524 s ^XSCHEDFLAG(\"repcnt\")=oid w !!,\"Max lines printed.  Please save to Excel and restart.\" s stop=1\r	q:cnt=\"\"\r	q\r	;\r	;\r	;Chidflag is for use once ^XCHILDREN has been populated and merged.\r	;\rChildflag(change,childAry)\r	n bid,childid,cnt,chgcnt,ZNOGRPTRK,childCID,exit,dataAry\r	d ^HUINIT\r	k ^XSCLOSE\r	i \'$d(^XCHILDREN),\'$d(childAry) w !,\"No Child Order data available.  Please run ExpiredFlag or pass order CID array in second parameter\" q\r	i $d(childAry) s dataAry=\"childAry\"\r	e  s dataAry=\"^XCHILDREN\"\r	s:change bid=$$AuditBatch^EAETBT1,%EA(\"E\",\"DELAY CLARITY EXTRACTION\")=1,ZNOGRPTRK=1\r	s childCID=^XLASTCHILD(\"Last ID\") k ^XLASTCHILD(\"Last ID\")\r	i change=1 d\r	. f  s childCID=$o(@dataAry@(childCID)) q:(childCID=\"\")!(exit)  d\r	. . w $$scrdots(.cnt,10,100)\r	. . s childid=$$zCIDgtID^EALIB20(\"ORD\",childCID) q:childid=\"\"\r	. . q:($$zgetnp(\"ORD\",childid,157,1,99999)]\"\")\r	. . i \'$$zlock^%Zefnlid(\"ORD\",childid,3) w !,\"Lock for order \"_childid_\" could not be obtained.\"  q   ;Lock order record\r	. . s %=$$insrti^LNODROP(157,2,\"\",\"\",\"\",childid,99999,\"ORD\")		;Mark ORD 157=2 Appointment scheduled\r	. . s %=$$zunlock^LULOCK(\"ORD\",childid)						;Unlock order record\r	. . s chgcnt=chgcnt+1										;Increment number of recs changed	\r	. . i (chgcnt#100)=0 d \r	. . . d FlushBatch^EAETBT1(bid)\r	. . i (cnt#1000)=0 d\r	. . . i (^%Zdown)!(^XSCLOSE(\"STOP\")=1) s exit=1,^XLASTCHILD(\"Last ID\")=childCID w !,\"Utility has been stopped.  Please restart again tomorrow.\"\r	. w !,+chgcnt_\" child orders flagged.\"\r	e  d\r	. f  s childCID=$o(@dataAry@(childCID)) q:childCID=\"\"  d\r	. . w $$scrdots(.cnt,10,100)\r	. . s childid=$$zCIDgtID^EALIB20(\"ORD\",childCID) q:childid=\"\"\r	. . q:($$zgetnp(\"ORD\",childid,157,1,99999)]\"\")\r	. . s chgcnt=chgcnt+1\r	. w !,+chgcnt_\" Child orders need to be flagged.\"							;Increment number of recs to be changed\r	d:change EndBatch^EAETBT1(bid)\r	k:change %EA(\"E\",\"DELAY CLARITY EXTRACTION\")\r	q\r	;\r	; Run ChildVerify immediately after the utility and again several days later to assure that changes stick.\r	; If Verified after the final run, then ^XCHILDREN can be killed.\r	;\rChildVerify(fix,startCID,stopCID)\r	n checkCID,checkid,fail,BadKids,badcnt,checkflag\r	d ^HUINIT\r	s:startCID]\"\" checkCID=startCID-1\r	s:stopCID\']\"\" stopCID=999999999999999\r	f  s checkCID=$o(^XCHILDREN(checkCID)) q:(checkCID=\"\")!(checkCID>stopCID)  d\r	. s checkid=$$zCIDgtID^EALIB20(\"ORD\",checkCID) q:checkid=\"\"\r	. s checkflag=$$zgetnp(\"ORD\",checkid,157,1,99999)\r	. s:(checkflag\']\"\") BadKids(checkCID)=\"\",badcnt=badcnt+1\r	s:$d(BadKids) fail=1\r	w !,+badcnt_\" child orders not previously flagged.\"\r	w:fix \" Reprocessing...\"\r	w:\'fix \" Please run ChildVerify in fix mode to correct.\"\r	d:fix&fail Childflag(1,.BadKids)\r	q\r	; \rscrdots(cnt,dot,num,BKG) \r	s cnt=cnt+1\r        q:BKG \"\"\r        w:$X>70 !\r        i +num\'=0,cnt#num=0 w cnt\\num i 1\r        e  w:(+dot\'=0)&(cnt#dot=0) \".\"\r        q \"\"\r	;\rzgtActDp() i \'$d(%EA(\"E\",\"ActDp\")) s %EA(\"E\",\"ActDp\")=$$znxIxID(\"ECI\",30,1,\"\")\r        q %EA(\"E\",\"ActDp\")\r	;\rznxIxID(ini,itm,val,id,direct) s %=$p(%EA(\"I\",ini,\"m\"),$c(127))\r        q:direct=-1 $o(^[%]EX(ini,itm,val,id),-1) q $o(^[%]EX(ini,itm,val,id))\r	;\rzgetnp(ini,id,itm,ln,dat,pd) s:dat=\"\" dat=99999\r        s %=$p(%EA(\"I\",ini,\"m\"),$c(127)) s:%]\"\" pd=%\r        q ^[pd]ER1(ini,id,itm,dat,ln)\r	;\rgetn(ini,id,ln,ip,pd) ; keep for G +1\r        i $p(ip,\";\",3) q $p(^ENU(ini,id,+ip,ln),$c(1),$p(ip,\";\",2))\r        q $p($p(^EN(ini,id,+ip),$c(1),$p(ip,\";\",2)),$c(2),ln+1)\r	;\rzgetbll(ini,id,si,dat) s %=$p(%EA(\"I\",ini,\"m\"),$c(127))\r        i dat=\"\"!(dat=99999) q ^[%]EN(ini,id,si)\r        q ^[%]EM(ini,id,dat,si)\r	;\rzgetpcl(v,pc,ln) q $p($p(v,$c(1),pc),$c(2),ln+1)\r	;\rznam(ini,id) s %=$p(%EA(\"I\",ini,\"m\"),$c(127)) q ^[%]ER(ini,id)\r	;\rrpad(x,w,c) i $L(x)>w q $$cut(x,w)\r        s:c=\"\" c=\" \" s %=\"\",$p(%,c,w-$l(x)+1)=\"\" q $e(x_%,1,w)\r	; \rcut(t,L,c) S:c=\"\" c=\"*\"\r        i $L(t)>L Q $E(t,1,L-1)_c\r        Q t	\r    ;   \r	q\r\rd ExpiredFlag(\"\",\"\")\r',NULL),(1666,'0720-NCAL-SPR07SLG345092','RADIOLOGY, INPATIENT EMR',NULL,'KAMATH, SUJATA            ',' ','Fix','Server Only',0,'Open','2009-07-17 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0720-NCAL-Spr07SLG345092.doc#',NULL,'345092',NULL,' ','F117112','KP N CALIFORNIA REGION ','The code associated with RA 1666 is meant for Adam Huffman and Lisa Pfeifer from KP NCAL. \rSLG # 345092 TD 36524\r\r1. Create a new order transmittal property:\rd ^lc > Order Transmittal > Properties\rCreate a new property with the desired name, id and descriptor.\rSet the property context to be Order Transmittal\rIn the comments section enter the SLG # above for reference.\rPage down to the next screen\rSet the Property type to be 3-set\rLeave the Get function blank\rEnter the following in the set function field WITHOUT the quotes: \"$$putn(\"ORD\",ORDid,1,\"7;9\",\"\",\"\",7070)\"\rEnter \"value\" without the quotes in the Resolution funct field\rSet the Cache level to be Order\r\r2. Use this new property in the desired order transmittal rule. Ensure that this property is setup to be used for\rboth the parent order and child order. Here is an example of what it will look like:\r\rIf order_type=5\r   directives: if filter equals both standing and future\r         set clear_ord_7070 to NULL\r    directives:\r         set clear_ord_7070 to NULL\r\r\rXML code:\r<rules>\r  <condition property=\"order_type\">\r    <case operator=\"equals\">\r      <operand value=\"5\"/>\r      <directives filter=\"Both\">\r        <set property=\"clear_sched_ord\" value=\"NULL\"/>\r      </directives>\r      <directives>\r        <set property=\"clear_sched_ord\" value=\"NULL\"/>\r      </directives>\r    </case>\r  </condition>\r</rules>\r\rTesting:\r1.Prior to updating the OTX rule, place a standing order and using the record viewer verify that today\'s date is set in ORD item 7070 for both the parent and child order\r2. Update the OTX rule and place another standing order. Using the record viewer verify that ORD item 7070 is cleared out for both the parent and child orders.\r\r',NULL),(1667,'KP NCAL REMOVE LINE BREAKS FROM HLV CLINICIAN NOTE','EPICCARE AMBULATORY',NULL,'RUSSELL, CHRIS            ','Other','Other','Server Only',0,'Open','2009-07-21 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1667 - Inpatient, KP NCAL Remove Line Breaks From HLV Clinician Note.doc#',NULL,'415849',NULL,' ','F117112','KP N CALIFORNIA REGION ','; The code associated with this RA is meant to be shared with Susan Gall from NCAL.\r;\r;---------\r; NAME: fixnote\r; AUTHOR: Drew Davey\r; DESCRIPTION:  removes lines 2-39 in HLV 119574866 in PRODCAM\r;\rfixnote(hlvID)\r   n bid,ary,hlvID\r   s bid=$$AuditBatch^EAETBT1()\r   s hlvID=119574866\r   i \'$$zlock^%Zefnlid(\"HLV\",hlvID) w !,\"Unable to lock record. Quitting.\"\r   s ary(0)=2\r   s ary(1)=$$getn^EALIB2(\"HLV\",hlvID,1,\"50;1;1\")\r   s ary(2)=$$getn^EALIB2(\"HLV\",hlvID,40,\"50;1;1\")\r   w !,\"Updating note \",$S($$insrti^EALIB(50,.ary,1,\"\",\"\",hlvID,99999,\"HLV\")=1:\"succeeded!\",1:\"failed.\")\r   s %=$$zunlock^%Zefnlid(\"HLV\",hlvID)\r   d EndBatch^EAETBT1(bid)\r   q\r\rd fixnote\r',NULL),(1668,'FLAG EKG ORDERS FOR SCHEDULE ORDERS',' ',NULL,'BUCKINGHAM, ADAM            ','Other','Other','Server Only',0,'Open','2009-07-24 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\NCAL_RA_1668_-_Flag_EKG_orders_for_Schedule_Orders.doc#',NULL,'382191',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',';The code below is meant to only be shared with appropriate API engineers.\r\r\r.\rzr\rzl\rSchedFlag(change,maxcnt)\r	n cnt,actDep,bid,sttime,stglo,stlines,ordid,exit,ordtype,si600,ordstat,exp,actcnt,action,found,chgcnt\r	n grp,endtime,endglo,endlines,tottime,hours,mins,secs,ID,batchId,cnt,ln,oid,repcnt,stop,fixcnt\r	n ordername,patmrn,padid,eapID,delay,eapKey,key   ;eapExtID,extID\r	d ^HUINIT\r	k ^XSCHEDFLAG,^XSCLOSE\r	s actDep=$$zgtActDp^LNODROP1()	\r	s:change bid=$$AuditBatch^EAETBT1,delay=%EA(\"E\",\"DELAY CLARITY EXTRACTION\"),%EA(\"E\",\"DELAY CLARITY EXTRACTION\")=1\r	s sttime=$$time^%Zefnlib,stglo=$zu(67,9,$J),stlines=$zu(67,8,$J)\r	s ordid=^XLASTID(\"Last ID\") k ^XLASTID(\"Last ID\")               ;remove $d - AB\r	s key=\"93000B\"													;procedure to search for\r	s eapKey=$$keyIn^LAACC2(\"EAP\",key)								;get EAP ID to look for\r	f  s ordid=$$znxIxID(\"ORD\",9,actDep,ordid) q:(ordid=\"\")!(exit=1)  d\r	. s found=\"\"\r	. w $$scrdots(.cnt,10000,100000)								;Increment overall counter\r	. i (cnt#1000)=0 d\r	. . i (^%Zdown)!(^XSCLOSE(\"STOP\")=1) s exit=1,^XLASTID(\"Last ID\")=ordid w !,\"Utility has been stopped.  Please restart again tomorrow.\"\r	. q:$$zgetnp(\"ORD\",ordid,153,1,99999)]\"\"\r	. q:$$getn(\"ORD\",ordid,1,\"34010;13\")\'=1							;ORD 34090 is not OP\r	. ;s ordtype=$$zgetnp(\"ORD\",ordid,30,1,99999)					;This check isn\'t necessary, and not consistent\r	. ;q:ordtype\'=14		 										;ORD 30 is not EKG - AB\r	. s eapID=$$zgetnp(\"ORD\",ordid,40,1,99999)\r	. q:eapID\'=eapKey												;check this in each environment\r	. ;s eapExtID=$$zgetnp(\"EAP\",eapID,100,1,99999)\r	. ;q:eapExtID\'=\"93000B\"											;Procedure ID not 93000B - AB\r	. s si600=$$zgetbll(\"ORD\",ordid,600,99999)\r	. q:$$zgetnp(\"ORD\",ordid,90,1,99999)]\"\"							;Order Status is not active\r	. s ordstat=+$$zgetpcl(si600,1,1)								;ORD 600 2=Future,1=Standing\r	. q:(ordstat=0)													;ORD 600 is not future/standing\r	. q:(ordstat=2)&($$zgetnp(\"ORD\",ordid,660,0,99999)]\"\")			;Future order has been released\r	. q:(ordstat=1)&($$zgetpcl(si600,5,1)\']\"\")						;All standing occurrences released\r	. s exp=$$zgetpcl(si600,2,1)									;ORD 610 - Standing Expiration Date\r	. q:(+$H>exp)&(exp]\"\")											;Expiration date exists and has passed\r	. q:$$getn(\"ORD\",ordid,1,\"1;5\")]\"\"								;I ORD 500 = Yes -Pended Order	\r	. s actcnt=+$$getn(\"ORD\",ordid,0,\"50;3;1\") 						;Line count for ORD 760	\r	. f ln=1:1:actcnt d 											;Pull audit line count\r	. . s action=$$getn(\"ORD\",ordid,ln,\"50;3;1\")					\r	. . s:(action=3)!(action=2) found=1								;Look for Signed or PendingSigned\r	. q:\'found														;Quit if order isn\'t signed\r	. i change=1 d  i 1\r	. . i \'$$zlock^%Zefnlid(\"ORD\",ordid,3) w !,\"Lock for order \"_ordid_\" could not be obtained.\"  q   ;Lock order record\r	. . s %=$$insrti^LNODROP(157,1,\"\",\"\",\"\",ordid,99999,\"ORD\")		;Mark ORD 157=1 Appointment Needed\r	. . s %=$$insrti^LNODROP(149,ordid,\"\",\"\",\"\",ordid,99999,\"ORD\")		;Set ORD 149 to .1 so additional \"C\" nodes aren\'t set\r	. . d cvRecord^RISCNV79413(ordid)								;Set ORD 153 for EAP/EDP\r	. . s %=$$zunlock^LULOCK(\"ORD\",ordid)							;Unlock order record\r	. . s ^XSCHEDFLAG(ordid)=\"\"										;Record altered ORD ID	\r	. . s chgcnt=chgcnt+1											;Increment number of recs changed	\r	. . i (chgcnt#100)=0 d \r	. . . d FlushBatch^EAETBT1(bid)\r	. . i chgcnt>=maxcnt  w !,\"Maximum daily orders updated. Please restart again tomorrow.\" d\r	. . . d FlushBatch^EAETBT1(bid)\r	. . . s exit=1,^XLASTID(\"Last ID\")=ordid\r	. e  d\r	. . s grp=$$gtSchGrp^RISUTIL3(ordid)							;Find grouper\r	. . s ^XSCHEDFLAG(ordid,grp)=\"\"									;Flag ORD and future grouper for report\r	. . s chgcnt=chgcnt+1											;Increment number of recs to be changed\r	s:change %EA(\"E\",\"DELAY CLARITY EXTRACTION\")=delay\r	d:change EndBatch^EAETBT1(bid)\r	;\r	;Reporting\r	;\r	s endtime=$$time^%Zefnlib,endglo=$zu(67,9,$J),endlines=$zu(67,8,$J)\r	s tottime=endtime-sttime\r	s hours=(tottime)\\3600\r	s mins=((tottime)#3600)\\60\r	s secs=(((tottime)#3600)#60)\r	q:cnt=\"\"\r	w !!,\"Process Statistics\",!\r	w !,\"Total Orders Processed: \"_+cnt\r	w !,\"Total Orders Flagged: \"_+chgcnt\r	w !,\"Start time: \",$$dm^%Zefnlib(sttime)\r	w !,\"End time: \",$$dm^%Zefnlib(endtime)\r	w !,\"Total time: \",hours,\"h \",mins,\"m \",secs,\"s\"\r	w !,\"Total global refs: \",endglo-stglo,\" (\",$J((endglo-stglo)/cnt,\"\",2),\" per order)\"\r	w !,\"Total lines: \",endlines-stlines,\" (\",$J((endlines-stlines)/cnt,\"\",2),\" per order)\"\r	i \'$$yn^%Zefnlic(\"Would you like to view a summary report\") q\r	w #\rfixrep	i change=1 d  i 1\r	. s oid=\"\",stop=\"\",fixcnt=\"\"\r	. s:$d(^XSCHEDFLAG(\"fixcnt\"))=1 oid=^XSCHEDFLAG(\"fixcnt\") k ^XSCHEDFLAG(\"fixcnt\")\r	. f  s oid=$o(^XSCHEDFLAG(oid)) q:(oid=\"\")!(stop=1)  d\r	. . s ordername=$$rpad($$znam(\"EAP\",$$zgetnp(\"ORD\",oid,40,1,99999)),40)\r	. . s padid=$$^HUIDFN($$getn(\"ORD\",oid,1,\"1;1\"),\"EPT\")\r	. . s patmrn=$$mpiGetID^LSSO(\"EPT\",padid,-1,50140)\r	. . w !,\"   Order ID: \"_oid_\"   Order: \"_ordername_\"   MRN: \"_patmrn\r	. . s fixcnt=fixcnt+1	\r	. . i fixcnt>65524 s ^XSCHEDFLAG(\"fixcnt\")=oid w !!,\"Max lines printed.  Please save to Excel and restart.\" s stop=1	\rrep	e  d\r	. s oid=\"\",grp=\"\",stop=\"\",repcnt=\"\"\r	. s:$d(^XSCHEDFLAG(\"repcnt\"))=1 oid=^XSCHEDFLAG(\"repcnt\") k ^XSCHEDFLAG(\"repcnt\")\r	. f  s oid=$o(^XSCHEDFLAG(oid)) q:(oid=\"\")!(stop=1)  d\r	. . f  s grp=$o(^XSCHEDFLAG(oid,grp)) q:(grp=\"\")!(stop=1)  d\r	. . . s ordername=$$rpad($$znam(\"EAP\",$$zgetnp(\"ORD\",oid,40,1,99999)),40)\r	. . . s padid=$$^HUIDFN($$getn(\"ORD\",oid,1,\"1;1\"),\"EPT\")\r	. . . s patmrn=$$mpiGetID^LSSO(\"EPT\",padid,-1,50140)\r	. . . w !,\"   Order ID: \"_oid_\"   Order: \"_ordername_\"   Grouper: \"_grp_\"   MRN: \"_patmrn\r	. . . s repcnt=repcnt+1	\r	. . . i repcnt>65524 s ^XSCHEDFLAG(\"repcnt\")=oid w !!,\"Max lines printed.  Please save to Excel and restart.\" s stop=1\r	q\r	;\rscrdots(cnt,dot,num,BKG) \r	s cnt=cnt+1\r        q:BKG \"\"\r        w:$X>70 !\r        i +num\'=0,cnt#num=0 w cnt\\num i 1\r        e  w:(+dot\'=0)&(cnt#dot=0) \".\"\r        q \"\"\r	;\rzgtActDp() i \'$d(%EA(\"E\",\"ActDp\")) s %EA(\"E\",\"ActDp\")=$$znxIxID(\"ECI\",30,1,\"\")\r        q %EA(\"E\",\"ActDp\")\r	;\rznxIxID(ini,itm,val,id,direct) s %=$p(%EA(\"I\",ini,\"m\"),$c(127))\r        q:direct=-1 $o(^[%]EX(ini,itm,val,id),-1) q $o(^[%]EX(ini,itm,val,id))\r	;\rzgetnp(ini,id,itm,ln,dat,pd) s:dat=\"\" dat=99999\r        s %=$p(%EA(\"I\",ini,\"m\"),$c(127)) s:%]\"\" pd=%\r        q ^[pd]ER1(ini,id,itm,dat,ln)\r	;\rgetn(ini,id,ln,ip,pd) ; keep for G +1\r        i $p(ip,\";\",3) q $p(^ENU(ini,id,+ip,ln),$c(1),$p(ip,\";\",2))\r        q $p($p(^EN(ini,id,+ip),$c(1),$p(ip,\";\",2)),$c(2),ln+1)\r	;\rzgetbll(ini,id,si,dat) s %=$p(%EA(\"I\",ini,\"m\"),$c(127))\r        i dat=\"\"!(dat=99999) q ^[%]EN(ini,id,si)\r        q ^[%]EM(ini,id,dat,si)\r	;\rzgetpcl(v,pc,ln) q $p($p(v,$c(1),pc),$c(2),ln+1)\r	;\rznam(ini,id) s %=$p(%EA(\"I\",ini,\"m\"),$c(127)) q ^[%]ER(ini,id)\r	;\rrpad(x,w,c) i $L(x)>w q $$cut(x,w)\r        s:c=\"\" c=\" \" s %=\"\",$p(%,c,w-$l(x)+1)=\"\" q $e(x_%,1,w)\r	; \rcut(t,L,c) S:c=\"\" c=\"*\"\r        i $L(t)>L Q $E(t,1,L-1)_c\r        Q t	\r	q\r\rd SchedFlag(\"\",\"\")\r',NULL),(1670,'HB - CLEAN UP STATEMENT QUEUE','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ',' ','Fix and Enhancement','Server Only',0,'Open','2009-07-28 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1670 - HB Clean Up Statement Queue.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1671,'ENABLE ADDITIONAL ITEMS FOR TRACKING IN OPTIME EDIT TRAIL','OPTIME',NULL,'SAUDER, ADAM            ',' ','Enhancement','Server Only',0,'Open','2009-07-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1671_Optime Edit Trail1.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1672,'HIM SET ACCOUNT ABSTRACTING STATUS TO IN PROGRESS','HIM',NULL,'GANNON, KYLE            ','Other','Fix','Server Only',0,'Open','2009-07-30 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1672 - Set Abstracting Status to In Progress.doc#',NULL,'419097',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1673,'KP NCAL PATIENT SUMMARY REPORT REMOVAL/REPLACEMENT UTILITY',' ',NULL,'RUSSELL, CHRIS            ','Other','Other','Server Only',0,'Open','2009-10-01 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1673_CSummary Report1.doc#',NULL,'328483',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1674,'DELAY BUILD UTILITY TO CORRECT DII-61,150,160,166','CLARITY',NULL,'PILLAI, KARTHIK            ',' ','Fix','Server Only',0,'Open','2009-08-13 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1674 - CR - DELAY BUILD UTILITY TO CORRECT DII-61,150,160,166.doc#',NULL,'376801, 414855, 373287, 234883',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1675,'587_NCAL_20090812 - 898313 - iSite Digital Images - Fix to build the image hyperlink correctly in the ORD and minimize customizations','EDI',NULL,'FABER, GREG            ','Other','Fix/Enhancement','Server Only',0,'Open','2009-08-12 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\587_NCAL_20090812_-_898313_-_iSite_Digital_Images_-_Fix_to_build_the_image_hyperlink_correctly_in_the_ORD_and_minimize_custo.doc#',NULL,'422877',NULL,' ','F117112','KP N CALIFORNIA REGION ','The code associated with this RA is meant to be shared with Marc Blaker, Fred Law, and Scott Schork from KP NCAL.\r\rLine 1:\r$$tabTranI^AIlib7(898307,%AIM(\"KP NCAL PACS SERVER\")) s:$p(ordinfo,\"|\",11)=\"CANCEL\" $p(@%AILAB@(OrdIX),\"|\",23)=\"F\"  ;Set IA=0 for Cancel\r\rLine 2:\rs:%AIM(\"OrdID\")]\"\" OrderID=%AIM(\"OrdID\") s:OrderID]\"\" %=$$insrti^AIlib4(52501,%AIM(\"KP NCAL PACS FLAG\"),\"\",\"\",\"\",OrderID,9999,\"ORD\"),%=$$insrti^AIlib4(52500,%AIM(\"KP NCAL PACS SERVER\"),\"\",\"\",\"\",OrderID,99999,\"ORD\") s:$p(ordinfo,\"|\",11)=\"CANCEL\" %=$$zdelLnGr^EALIB6(\"ORD\",OrderID,320,1,99999) s %=$$SavePatID^AIHLFN02(\"EPT\",%AIM(\"Pat\",\"ID\"),%AIM(\"Pat\",\"DAT\"),$p(^AIHLIN(%AIPid,msgNo,1,1),\"|\",4),%AIPid)\r\rLine 3:\rs %AIM(\"KP NCAL PACS FLAG\")=0 s:%AIData=\"D\"&&(%AIDataI(325)\'=\"X\")\r',NULL),(1676,'UTILITY TO UPDATE PREFERENCE CARD RESOURCES','OPTIME',NULL,'SAUDER, ADAM            ',' ','Other','Server Only',0,'Open','2009-08-18 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\~8287165.doc#',NULL,' ',NULL,' ','f117112','KAISER PERMANENTE - N CAL ','The code associated with this RA is meant to only be shared with appropriate SI engineers.\r\r\rORTSUTIL1 ; ; ;2009-08-14 12:48:14;7.7\r	; Copyright (C) Epic Systems Corporation 2010\r	;**************************************************************************\r	; TITLE:   ORTSUTIL1\r	; PURPOSE: TS Utilities\r	; AUTHOR:  Adam Sauder\r	; CALLABLE TAGS:\r	;    updPrefRes - updates number, merge and required for preference\r	;                 card resources\r	; REVISION HISTORY:\r	; *asauder 8/09 162615 - created\r	;**************************************************************************\r	;\r	;---------\r	; NAME:              updPrefRes (PUBLIC)\r	; DESCRIPTION:       updates number, merge and required for preference\r	;                    card resources.  By default, this utility will only\r	;                    update preference card records (ORP item 50=1) and\r	;                    not base procedures.\r	; KEYWORDS:          ORP,preference,card,procedure,merge,number,required\r	; CALLED BY:         Command Prompt as a zr/zl\r	; PARAMETERS:\r	;  itemlist (I,REQ)- list of ORP items and values for the update.\r	;                    This is a \"^\"-delimited list where each piece of the list\r	;                    is a \";\"-delimited list containing item;value;overwrite\r	;\r	;                    e.g. \"item1;value1;overwrite1^item2;value2;overwrite2^...\r	;                    where:\r	;                    item - ORP item between 240 and 300, but cannot\r	;                           be the item for the resource type itself.\r	;                    value- value to enter into the item\r	;                    overwrite - set to 1 to overwrite existing data\r	;                                leave blank to not overwrite existing data\r	;  subset   (I,OPT)- Name of the subset of ORP records to update.  Leave blank\r	;                    to update all preference cards.\r	;                    !!Subset cannot contain ranges of IDs in the \"S\" nodes!!\r	;                    !!Best way to build subset is to use a Chronicles search!!\r	;  orpID    (I,OPT)- Unpadded internal ORP ID for updating a specific preference card.\r	;                    leave blank to update all preference cards (ORP item 50=1)\r	; REVISIONS/USES:\r	;  *asauder 8/09 162615 - created\rupdPrefRes(itemlist,subset,orpID) n ID,bid,batchCnt,tw,node,stop\r	i subset]\"\",(\'$$exists^ECB1(subset)) d  Q\r	. w !,\"Subset \"_subset_\" does not exist!\",!\r	i itemlist=\"\" Q\r	d %zidrule^EALIB6(\"ORP\")\r	s bid=$$AuditBatch^EAETBT1()\r	i subset]\"\" d  s stop=1\r	. f  s node=$o(^SUBSET(subset,node)) q:node=\"\"  s ID=$p(^SUBSET(subset,node,\"S\"),\"_\",2)  d\r	. . i ID=\"\" Q\r	. . d itemloop(ID,itemlist,.tw)\r	. . s batchCnt=batchCnt+1\r	. . d:(batchCnt#100=0) FlushBatch^EAETBT1(bid)  ;flush batch every 100 records\r	i orpID]\"\" s ID=$$getidin^%Zefnlib(orpID,\"ORP\") d  s stop=1  ;leave library for use in Spring 07\r	. d itemloop(ID,itemlist,.tw)\r	i \'stop f  s ID=$$znxIxID^EAXLIB5(\"ORP\",50,1,ID) q:ID=\"\"  d\r	. d itemloop(ID,itemlist,.tw)\r	. s batchCnt=batchCnt+1\r	. d:(batchCnt#100=0) FlushBatch^EAETBT1(bid)  ;flush batch every 100 records\r	d EndBatch^EAETBT1(bid)\r	Q\r	;\r	;---------\r	; NAME:              itemloop (PRIVATE)\r	; DESCRIPTION:       loops over items in itemlist and sets new merge, required\r	;                    or number values for resources in ORP.\r	; CALLED BY:         updPrefRes\r	; PARAMETERS:\r	;  ID       (I,REQ)- ORP ID of the preference card to update\r	;  itemlist (I,REQ)- list of ORP items and values for the update.\r	;                    This is a \"^\"-delimited list where each piece of the list\r	;                    is a \";\"-delimited list containing item;value;overwrite\r	;\r	;                    e.g. \"item1;value1;overwrite1^item2;value2;overwrite2^...\r	;                    where:\r	;                    item - ORP item between 240 and 300, but cannot\r	;                           not be the item for the resource type itself.\r	;                    value- value to enter into the item\r	;                    overwrite - set to 1 to overwrite existing data\r	;                                leave blank to not overwrite existing data\r	; REVISIONS:\r	;  *asauder 8/09 162615 - created\ritemloop(ID,itemlist,tw)  n over,value,item,itemgrp,grpcnt\r	i \'$$zlock^%Zefnlid(\"ORP\",ID) d  Q   ;leave library for use in Spring 07\r	. w !,\"Locked procedure: \"_ID\r	f grpcnt=1:1:$l(itemlist,\"^\") d\r	. s itemgrp=$p(itemlist,\"^\",grpcnt)\r	. s item=$p(itemgrp,\";\",1)\r	. i (item\'<300)!(item\'>240) Q   ;resource information only\r	. i \"240^250^260^270^280^290\"[(\"^\"_item_\"^\") Q   ;do not update resource types\r	. s value=$p(itemgrp,\";\",2)\r	. s over=$p(itemgrp,\";\",3)\r	. d setVal(ID,item,value,over,.tw)\r	s %=$$zunlock^%Zefnlid(\"ORP\",ID)  ;leave library for use in Spring 07\r	Q\r	;\r	;---------\r	; NAME:              setVal (PRIVATE)\r	; DESCRIPTION:       sets new merge, required or number values\r	;                    for resources in ORP.\r	; CALLED BY:         itemloop\r	; PARAMETERS:\r	;  ID       (I,REQ)- ORP ID of the preference card to update\r	;  item     (I,REQ)- ORP item to be updated\r	;  value    (I,OPT)- value to enter into ORP item for specified record\r	;  over     (I,OPT)- set to 1 to overwrite existing data\r	;                    leave blank to not overwrite existing data\r	; REVISIONS:\r	;  *asauder 8/09 162615 - created\rsetVal(ID,item,value,over,tw) n ary,ov,ln,bl,sitem,pc,linecnt\r	s sitem=$$gtsitm^ORLIB8(\"ORP\",item,.tw,.pc)\r	s bl=$$zgetblu^EAXLIB9(\"ORP\",ID,sitem,0,99999)\r	s linecnt=$$zmaxunl^EAXLIB9(bl)\r	i +linecnt=0 Q\r	f ln=1:1:linecnt d\r	. i \'over s ov=$$getn^EAXLIB(\"ORP\",ID,ln,sitem_\";\"_pc_\";\"_1) Q:ov]\"\"\r	. s ary(ln)=value\r	s ary(0)=linecnt\r	s %=$$insrti^EALIB(item,.ary,3,\"\",\"\",ID,99999,\"ORP\")  ;leave library for use in Spring 07\r	Q\r	;\r	q  ;;#eor#\r',NULL),(1677,'KP NCAL CLEAR EPT 24350 FOR PATIENT','EMERGENCY',NULL,'PINGEL, ROBYN            ','Other','Other','Server Only',0,'Open','2009-08-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\KP NCAL Clear EPT 24350 for patient that cannot be admitted to the ED.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1679,'KP NCAL - RETRACT DUPLICATE IB COSIGN MESSAGES THAT CAUSE ERRORS WHEN ATTEMPTING TO BE DONE\'D','INPATIENT EMR, ORDERS',NULL,'SPINOZZI, MARIA            ','Data Corruption','Fix','Server Only',0,'Open','2009-08-24 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0825-NCAL-SPR07-SLG427498.doc#',NULL,'427498',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',';0901-NCAL-SPR07-SLG427498.txt\r;Accompanies RA 1679 and should only be shared with the appropriate SI Engineer for review\r\r	;Retract in basket messages that were erroneously sent in old med rec workflow\r	;These messages cause errors when attempted to be done\'d or signed\r	;See SLG 427498\rDualEOWs(retract)\r	n invalid,bid,batchcnt,total,oldExtrct,dep,Ret\r	i retract d\r	. r !,\"Enter user to list as Retracting User: \",user\r	. s user=$$^HUIDFN(user,\"EMP\")\r	. i \'$$zisID^EAXLIB2(\"EMP\",user) w !,\"You must enter a valid user.\"  s invalid=1 q\r	q:invalid\r	s dep=$$zgtActDp^LNOSEND  ;gets deployment number\r	i retract d\r	. d ^HUINIT\r	. s bid=$$AuditBatch^EAETBT1() d  ;open/obtain batch\r	. i bid=\"\" w !,\"Unable to open batch job. Quitting...\" s invalid=1\r	q:invalid\r	s:retract oldExtrct=%EA(\"E\",\"DELAY CLARITY EXTRACTION\"),%EA(\"E\",\"DELAY CLARITY EXTRACTION\")=1\r	;\r	;find messages\r	d FindMsgs(64,dep,bid,.batchcnt,.total,.Ret)    ;Verbal\r	;\r	;retract;\r	w !,\"Total Messages Found: \",total\r	w !,\"Total Messages Retracted: \",+Ret\r	;\r	d:retract EndBatch^EAETBT1(bid,.batchcnt)  ;close batch\r	s:retract %EA(\"E\",\"DELAY CLARITY EXTRACTION\")=oldExtrct\r	q\rRetractMsgs(eowid,user,bid,batchcnt,ret)\r	s %=$$Retract^LOIMISC8(eowid,user,5)   ;locking is handled within function\r	i $$zgetnp^EAXLIB11(\"EOW\",eowid,210,1,99999)\'=5 w \" |Could Not be Retracted. \" q\r	e  w \"|Retracted. \" s ret=1+ret\r	s batchcnt=batchcnt+1\r	i batchcnt>50 d  ;flush batch every ~50 eows changed.\r	. s batchcnt=0\r	. d FlushBatch^EAETBT1(bid)\r	q\rFindMsgs(msgType,dep,bid,batchcnt,total,Ret)\r	n msgID,OID,lncnt,eowStat,counter,Missing34800\r	n otpID,line,msgTypeName,respEOW,sent,sender,patient,recip\r	s msgTypeName=\"Verbal Order Cosign Messages\"\r	w !!!,msgTypeName,!,\"EOW ID|Order ID\"\r	f  s msgID=$$znxIxID^EAXLIB5(\"EOW\",30,msgType,msgID) q:msgID=\"\"  d\r	. s eowStat=$$zgetnp^EAXLIB11(\"EOW\",msgID,210,1,99999)\r	. q:(eowStat=4)!(eowStat=5)\r	. q:$$zgetnp^EAXLIB11(\"EOW\",msgID,17,1,99999)\'=dep\r	. s respEOW=$$gtRspEOW(msgID)\r	. q:respEOW=\"\"\r	. s OID=\"\",otpID=\"\",line=$$GetCosignLine(msgID,.OID,msgType)  ;get line in ORD 34800\r	. i (msgType=64),(line=\"\") s otpID=$$getn^EAXLIB(\"EOW\",msgID,1,\"77000;1\")\r	. i (line=\"\"),(otpID=\"\") d\r	. . i OID]\"\",$$getn^EAXLIB(\"ORD\",OID,1,\"34800;1;1\")=\"\" s Missing34800=\"Missing ORD-34800\"\r	. . s total=total+1\r	. . ;collect & write out eow info\r	. . s sent=$$date^%Zdfnlib($$zgetnp^EAXLIB11(\"EOW\",msgID,145,1,99999),\"\",1)\r	. . s patient=$$znam^JCENSUS(\"EPT\",$$getidin^%Zefnlib($$zgetnp^EAXLIB11(\"EOW\",msgID,120,1,99999),\"EPT\"))\r	. . s recip=$$getn^EALIB2(\"EOW\",msgID,1,\"100;1;1\")\r	. . w !,msgID,\"|\",OID,\"|\",sent,\"|\",patient,\"|\",recip\r	. . i retract d RetractMsgs(msgID,user,bid,.batchcnt,.Ret)\r	. . e  w \"|Found\"\r	q\rGetCosignLine(eowID,ordID,type,srcEOW,recursive)\r	n line\r	q:eowID=\"\" \"\"\r	s:ordID=\"\" ordID=$$zgetnp^EAXLIB11(\"EOW\",eowID,700,1,99999) q:ordID=\"\" \"\"\r	s:type=\"\" type=$$zgetnp^EAXLIB11(\"EOW\",eowID,30,1,99999) q:type=\"\" \"\"\r	s:type=64 line=$$znxLxLn^JAASCH3(\"ORD\",34820,eowID,ordID)\r	s:(type=13)!(type=18) line=$$znxLxLn^JAASCH3(\"ORD\",34850,eowID,ordID)\r	i line=\"\",\'recursive d\r	. s srcEOW=$$gtSrcEOW(eowID)\r	. s line=$$GetCosignLine(srcEOW,ordID,type,\"\",1)\r	s:srcEOW=\"\" srcEOW=eowID\r	q line\rgtSrcEOW(eowID) n threadID,srcEOW\r	s threadID=$$ThreadID^HTASSIGN(eowID)\r	s:threadID=\"\" threadID=$$znxIxID^EAXLIB5(\"HTH\",101,eowID)   ;find EOW ID in HTH-101 index\r	i threadID]\"\" s srcEOW=$$getn^EAXLIB(\"HTH\",threadID,1,\"100;2;1\") i 1  ;get line 1 of HTH-101\r	e  s srcEOW=eowID  ;supports workflows enabled after messages are created in the system (i.e. during the conversion to responsibility)\r	q srcEOW\rgtRspEOW(eowID) n threadID,respEOWID\r	s threadID=$$ThreadID^HTASSIGN(eowID)  ;*ENT+1 3/09 153753\r	s:threadID=\"\" threadID=$$znxIxID^EAXLIB5(\"HTH\",101,eowID)   ;HTH - 101\r	i threadID]\"\" s respEOWID=$$znxIxID^EAXLIB5(\"EOW\",275,threadID) i 1\r	e  s respEOWID=eowID                         ;supports workflows enabled after messages are created in the system (i.e. during the conversion to responsibility)\r	q respEOWID\r	q\r',NULL),(1680,'0825-NCAL-SPR07SLG388351','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ','Fax #:','608-216-9843',0,'Open','2009-08-24 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0825-NCAL-Spr07SLG388351.doc#',NULL,'388351',NULL,' ','f117112','KAISER PERMANENTE - N CAL ','; The code associated with this RA is meant for SI use only. \r; Correct past Chart Sync anomlies on an order by republishing the entire ORD from the patient home\r; SLG 388351\r; PR 4492081\r\rzl\rgetremotegens\r  s here=$$zgtActDp^EAXLIB()\r  k ordary\r  f  r !,input q:input=\"\"  d\r  . s cid=$p(input,\"|\",1)\r  . s gen=$p(input,\"|\",2)\r  . s ordary(cid)=gen\r  . s ord=$$zCIDgtID^EAXLIB(\"ORD\",cid)\r  . s ept=$$geti^EAXLIB(\"ORD\",ord,210,1,99999)\r  . s ept=$$^HUIDFN(ept,\"EPT\")\r  . s home=$$zGetLOwn^EAXLIB(\"EPT\",ept)\r  . i home=\"\" q\r  . i home=here q\r  . s g1=$p($$zgGen^CSSUPTRG2(\"ORD\",ord,99999,1),\"^\",2)\r  . i g1>gen s ordary(cid)=g1\r  w !!\r  s cid=\"\"\r  f  s cid=$o(ordary(cid)) q:cid=\"\"  d\r  . w !,cid,\"|\",ordary(cid)\r  q\r\rd getremotegens\r\r\rzl\rresyncORDs\r  s here=$$zgtActDp^EAXLIB()\r  f  r !,input q:input=\"\"  d\r  . s cid=$p(input,\"|\",1)\r  . s ord=$$zCIDgtID^EAXLIB(\"ORD\",cid)\r  . s ept=$$geti^EAXLIB(\"ORD\",ord,210,1,99999)\r  . s ept=$$^HUIDFN(ept,\"EPT\")\r  . s home=$$zGetLOwn^EAXLIB(\"EPT\",ept)\r  . i home\'=here w \"|Not EPT home - no action taken\" q\r  . s eptcid=$$zGtCID^EAXLIB(\"EPT\",ept)\r  . i \'$$zlockG^CSSLOCK(\"^CSSLOCK(\"\"INUPDCHK\"\",\"\"EPT\"\",eptcid)\",0) w \"|Cannot get CSSLOCK - no action taken\" q\r  . s rg1=$p(input,\"|\",2)\r  . s hg1=$p($$zgGen^CSSUPTRG2(\"ORD\",ord,99999,1),\"^\",2)\r  . i hg1<rg1 s %=$$zpGen^CSSFILGEN(\"ORD\",ord,99999,1,here,rg1+1,1)\r  . s %=$$zunlockG^CSSLOCK(\"^CSSLOCK(\"\"INUPDCHK\"\",\"\"EPT\"\",eptcid)\")\r  . s grp=1\r  . f  s grp=$o(^ER6N(\"ORD\",ord,grp)) q:+grp=0  d markGrpChngd^CSSCONFLC5(\"ORD\",ord,99999,grp,\"EPT\",ept)\r  . s dat=\"\"\r  . f  s dat=$o(^ER6(\"ORD\",ord,dat)) q:+dat=0  d\r  . . s grp=1\r  . . f  s grp=$o(^ER6(\"ORD\",ord,dat,grp)) q:+grp=0  d markGrpChngd^CSSCONFLC5(\"ORD\",ord,dat,grp,\"EPT\",ept)\r  . d trigUpdate^CSSUPTRG(\"EPT\",ept)\r  q\r\rd resyncORDs\r',NULL),(1681,'2009-08-26 NCAL ACCOUNT-PATIENT LINKS','CHART SYNC',NULL,'BUCHANAN, MICHAEL            ',' ',' ','Server Only',0,'Open','2009-11-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0112-NCAL-SPR07-SLG427966.doc#',NULL,'427966',NULL,' ','F117112','KAISER PERMANENTE - N CAL ','XMEBEARFIX ;; ;Thu Nov 19, 2009  1:28 PM\r	; The code associated with this RA is meant to only be shared with appropriate SI engineers.\r	q\r	; The data discrepancy you\'re seeing is that there are patient->guarantor pointers\r	; in (EPT-2200, ACCT_ID) that are not matched by guarantor->patient back pointers\r	; in (EAR-250, PAT_ID). The data in EPT is correct, and the data in EAR to should\r	; be corrected to mirror it.\r	;\r	; I EAR 250 is indexed\r	; I EPT 2200 is indexed\r	; In principle we see if\r	; $d(^EX(\"EPT\",2200,ear,ept)) -> $d(^EX(\"EAR\",250,ept,ear))\r	; AND\r	; $d(^EX(\"EAR\",250,ept,ear)) -> $d(^EX(\"EPT\",2200,ear,ept))\r	;\r	; Input:\r	; COMMIT (I/OPT) 1 to make changes\r	; testingEAR (I/OPT) If set, just fix that EAR\r	;\rcheckEARdata(COMMIT,testingEAR) n ear,ept,i,found,eptout,lines,bid,adds,count,home,lock\r	d ^HUINIT\r	d ^EAINISET(\"EAR\",\"\",1)\r	s:COMMIT bid=$$AuditBatch^EAETBT1()\r	s:COMMIT %EA(\"E\",\"DELAY CLARITY EXTRACTION\")=1\r	s home=$$zgtActDp^ASMIFL1()\r	f  s ear=$$znxIx^EAXLIB5(\"EPT\",2200,ear)  q:ear=\"\"  d\r	. i testingEAR]\"\" q:ear\'=testingEAR\r	. f  s ept=$$znxIxID^EAXLIB5(\"EPT\",2200,ear,ept) q:ept=\"\"  d\r	. . q:$$zGetLOwn^ASMIFL2(\"EPT\",ept)\'=home\r	. . s eptout=$$getidout^ASMIFL7(ept,\"EPT\")\r	. . q:$$zisIxID^EAXLIB3(\"EAR\",250,eptout,ear)\r	. . s found=0,lines=+$$zgetnp^EAXLIB11(\"EAR\",ear,250,0)\r	. . f i=1:1:lines d  q:found\r	. . . s:$$zgetnp^EAXLIB11(\"EAR\",ear,250,i)=eptout found=1\r	. . w:\'found !,1,\",\",eptout,\",\",ear,\",\",lines\r	. . q:\'COMMIT\r	. . s lock=$$zlock^AILock(\"EAR\",ear)\r	. . i \'lock d  q\r	. . . w !,\"Could not lock ear \",ear\r	. . k adds\r	. . s adds(0)=lines+1\r	. . s adds(lines+1)=eptout\r	. . s %=$$^EAINSRTF(250,.adds,3,\"\",\"\",ear,99999,\"EAR\")\r	. . s %=$$zunlock^AILock(\"EAR\",ear)\r	. . s count=count+1\r	. . i count=100 d FlushBatch^EAETBT1(bid) s count=0\r	d:COMMIT EndBatch^EAETBT1(bid)\r	q\r	; Ignore the reverse case for now.\r	;f  s ept=$o(^EX(\"EAR\",250,ept)) q:ept=\"\"  d\r	;. f  s ear=$o(^EX(\"EAR\",250,ept,ear)) q:ear=\"\"  d\r	;. . s eptin=$$getidin^ASMIFL7(ept,\"EPT\")\r	;. . q:$d(^EX(\"EPT\",2200,ear,eptin))\r	;. . s found=0\r	;. . f i=1:1:$$geti^EALIB(\"EPT\",eptin,2200,0) d  q:found\r	;. . . s:$$geti^EALIB(\"EPT\",eptin,2200,i)=ear found=1\r	;. . w:\'found !,2,\",\",ept,\",\",ear\r	;\r	q  ;;#eor#\r\r','F327190'),(1682,'0825-NCAL-SPR07-SLG428795','CLARITY',NULL,'PILLAI, KARTHIK            ',' ',' ','Server Only',0,'Open','2009-08-26 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1682 - 0825-NCAL-SPR07-SLG428795.doc#',NULL,'428795',NULL,' ','f117112','KAISER PERMANENTE - N CAL ','Authorization for Modifications\rDate prepared: \r8/26/2009\r\rCustomer:\rKAISER PERMANENTE - N CAL \r\rRA #: \r1682\r\rTitle:\r0826-NCAL-SPR07-SLG428795\r\rCO #:  \r\r\rProduct:\rCLARITY\r\rSLG #: \r428795\r\rInstall on version:\r\r\rDLG #: \r\r\rStandard in version:\r\r\rTLP #: \r\r\rReturn to:\rPILLAI, KARTHIK            \r\rFax #:\r608-216-9842\r\r\r\rIssue Type:      \r\r\rFix/Enhancement:\r\r\rClient/Server:\rServer Only\r\rDescription \rDescription of Modification\rThe code associated with this RA is meant to be shared with Susan Gall from KP-NCAL.\r\rKP Tracking Number: CHG000003983261\r\rThis utility will be run by the Clarity TS in the Reporting Shadows of all the NCAL deployments. It will mark all the EPT records for Delayed Extraction to Clarity.\r\r\rTesting Instructions\r\r1] The regional ETL team contact will run the Delay Build status report to take a \'BEFORE\' snapshot of the Delay Build counts.\r\r2] The utility will be run for a specified small INI (say, EMP or EAP).\r\r3] The regional ETL team contact will run the Delay Build status report again to take an \'AFTER\' snapshot of the Delay Build counts.\r\r4] Verify that the specified INI now appears in the Delay Build status report with the appropriate counts.\r\r \r\rSpecial Notes\r\rDelivery Contents\rFiles Delivered\r0826-NCAL-SPR07-SLG428795.doc, 0826-NCAL-SPR07-SLG428795.txt\rRelease Location and Filenames at Your Site\r\rServer Updates\r\r\rClient Updates\r\rInstallation	\rRequires an Outage? No\rProcesses to Stop/Start\rThe utility should not be run while Clarity ETL is running.\r\rInstall Instructions\r\rRun the utility for the EPT masterfile.\r\rBack out Instructions\rThis utility simply adds Delay Build \"D\" nodes to the ER2 and ER2N globals. \r\rIn case the utility does not successfully complete, we would need to do the full EPT extracts using the standard EPT Full build.\r\rAny extra Delay Build \"D\" entries will be processed during normal Clarity ETL extracts and should not cause any harm. If needed, we could kill these Delay Build \"D\" entries from the ER2* globals. \r\r\rProduction Impact\rModification of Operating Environment (if applicable) \rThis section is used to authorize modifications to the operating environment (e.g., the downloading of ASCII files, or the changing of a Caché setting).  I authorize Epic to apply the modifications as described above, to the host operating environment.  \r\rSI Signature:________________________________   Date: _______________    Valid until: ________\r	For Epic Use Only:     Moved:  Initials_______   Date _______     Notified Customer: Moved:  Initials_______   Date _______\r\rModification of Testing Environment(s) (if applicable)\rI authorize Epic to apply the modifications as described above, to the following Caché environment(s).\rSHADOW\rSignature:______________________________    Date: ___________ Valid until: _________\r\rWITS3\rSignature:______________________________    Date: ___________ Valid until: _________\r\r  \r\rModification of PRODUCTION Environment\rThe modifications have been applied satisfactorily to at least one environment other than PRODUCTION and have been tested by us to our satisfaction.  I authorize Epic to apply the modifications, as described above, to the PRODUCTION Caché environment.\r\rRegional Signature:________________________________   Date: _______________   Valid until: ________\r	For Epic Use Only:     Moved:  Initials_______   Date _______      Notified Customer: Moved:  Initials_______   Date _______\r\rSI Signature:________________________________   Date: _______________   Valid until: ________\r	For Epic Use Only:     Moved:  Initials_______   Date _______      Notified Customer: Moved:  Initials_______   Date _______\r\r',NULL),(1683,'NCAL - CLEAN BAD VALUES FOR EPT 24350','EMERGENCY',NULL,'PINGEL, ROBYN            ','Other','Fix','Server Only',0,'Open','2009-08-26 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1683 - Perform cleanup of bad data in EPT 243501.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1685,'FLAG EKG CHILD ORDERS',' ',NULL,'BUCKINGHAM, ADAM            ','Other',' ','Server Only',0,'Open','2009-08-27 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1685 - Flag Child EKG orders1.doc#',NULL,'382191',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1687,'2009-08-31 INFECTION LINE COUNTS','ADT',NULL,'BUCHANAN, MICHAEL            ',' ',' ','Server Only',0,'Open','2009-08-31 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\2009-08-31 infection resolution line counts.doc#',NULL,'431262',NULL,' ','F117112','KAISER PERMANENTE - N CAL ','XMEBINFLINES ;; ;Fri Sep 18, 2009 11:25 AM\r	; Copyright (C) 2009 Epic Systems Corporation\r	;*********************************************************************\r	;The code associated with this RA is meant to only be shared with appropriate sI engineers.\r	; TITLE:   XMEBINFLINES\r	; PURPOSE: Set some lines in infection items\r	; AUTHOR:  M Buchanan\r	; CALLABLE TAGS:\r	;    infLines - Set inconsistent lines\r	; REVISION HISTORY:\r	;   8/31/09 Created by MEB\r	;---------\r	; NAME:         infLines (PUBLIC)\r	; DESCRIPTION:  Fix inconsistent infection line counts\r	; KEYWORDS:     infection\r	; CALLED BY:    Users\r	; PARAMETERS:\r	;  COMMIT (I,OPT)- 1 to commit changes, 0 to just report\rinfLines(COMMIT) n ept,line,num10464,num10463,lock,bl0,ZNOGRPTRK,cid\r	d:\'%EA(\"E\",\"HUINIT\") ^HUINIT\r	s %EA(\"E\",\"DELAY CLARITY EXTRACTION\")=1\r	s %=$$DisableRegEDITrigger^HULIB2()\r	;\r	d ^EAINISET(\"EPT\",\"\",1)\r	s ZNOGRPTRK=1\r	;\r	f  s ept=$$zoID^EAXLIB2(\"EPT\",ept) q:ept=\"\"  d\r	. s bl0=$$zgetblu^EAXLIB9(\"EPT\",ept,10460,0)\r	. s line=$$zmaxunl^EAXLIB9(bl0)\r	. q:line<1\r	. s cid=$$zGtCID^ASMOFL1(\"EPT\",ept)\r	. s num10464=+$$zgetpcu^EAXLIB9(bl0,5)   ; EPT-10464\r	. i num10464<line d\r	. . s bl0=$$zputpcu^EAXLIB9(bl0,5,line)  ; EPT-10464\r	. . w !,\"Update line count for 10464 - User for EPT cid.\",cid,\" from \",num10464,\" to \",line\r	. s num10463=+$$zgetpcu^EAXLIB9(bl0,4)   ; EPT-10463\r	. i num10463<line d\r	. . s bl0=$$zputpcu^EAXLIB9(bl0,4,line)  ; EPT-10463\r	. . w !,\"Update line count for 10463 - Instant for EPT cid.\",cid,\" from \",num10463,\" to \",line\r	. q:\'COMMIT\r	. s lock=$$zlock^AILock(\"EPT\",ept)\r	. i \'lock w !,\"Could not lock EPT \"\"\",ept,\"\"\"\" q\r	. s %=$$zputblu^EAXLIB9(\"EPT\",ept,10460,0,99999,bl0)\r	. s %=$$zunlock^AILock(\"EPT\",ept)\r	q\r	;---------\r	; NAME:         infBackup (PUBLIC)\r	; DESCRIPTION:  Make a backup of the current line count information.\r	; KEYWORDS:     infection\r	; CALLED BY:    Users\r	; PARAMETERS:\r	;   fileName (I/REQ): The name of the output file, with path.\rinfBackup(fileName,restartCID) n err,ept,line,num10464,num10463,bl0,cid,fHndl\r	;\r	d ^EAINISET(\"EPT\",\"\",1)\r	;\r	i fileName]\"\" d  q:err]\"\"\r	. s fHndl=$$fopen^CSMUMNU(fileName,\"W\",.err)\r	. i err]\"\" w !,\"Error: \",err k fHndl\r	;\r	i fHndl]\"\" u fHndl\r	;\r	i restartCID]\"\" d\r	. s ept=$$zCIDgtID^ASMIFL2(\"EPT\",restartCID)\r	. s ept=$$zoID^EAXLIB2(\"EPT\",ept,-1)\r	;\r	f  s ept=$$zoID^EAXLIB2(\"EPT\",ept) q:ept=\"\"  d\r	. s bl0=$$zgetblu^EAXLIB9(\"EPT\",ept,10460,0)\r	. s line=$$zmaxunl^EAXLIB9(bl0)\r	. q:line<1\r	. s cid=$$zGtCID^ASMOFL1(\"EPT\",ept)\r	. s num10464=$$zgetpcu^EAXLIB9(bl0,5)   ; EPT-10464\r	. i num10464<line w !,cid,\",10464,\",num10464,\",\",line\r	. s num10463=$$zgetpcu^EAXLIB9(bl0,4)   ; EPT-10463\r	. i num10463<line w !,cid,\",10463,\",num10463,\",\",line\r	;\r	i fHndl]\"\" u 0 s %=$$fclose^CSMUMNU(fHndl)\r	;\r	w !,\"Done\"\r	q\r	;---------\r	; NAME:         infRestore (PUBLIC)\r	; DESCRIPTION:  Restore former line counts in 10463 and 10464\r	; KEYWORDS:     infection\r	; CALLED BY:    Users\r	; PARAMETERS:\r	;   fileName (I/REQ): The name of the output file, with path.\rinfRestore(fileName) n ZNOGRPTRK,SKIPLINE,curline,err,formerCount,item,lock,test,val,ept,line,num10464,num10463,bl0,cid,fHndl\r	;\r	d ^EAINISET(\"EPT\",\"\",1)\r	s ZNOGRPTRK=1\r	;\r	i fileName]\"\" d  q:err]\"\"\r	. s fHndl=$$fopen^CSMUMNU(fileName,\"R\",.err)\r	. i err]\"\" w !,\"Error: \",err k fHndl\r	;\r	i fHndl]\"\" u fHndl\r	;\r	f  s line=$$fread^CSXFLCID(.err) q:err]\"\"  d\r	. q:$l(line,\",\")\'=4\r	. s item=$p(line,\",\",2) q:(item\'=10463)&(item\'=10464)\r	. s cid=$p(line,\",\",1) s ept=$$zCIDgtID^ASMIFL2(\"EPT\",cid) q:ept=\"\"\r	. ;\r	. s formerCount=$p(line,\",\",3)\r	. ;\r	. s lock=$$zlock^AILock(\"EPT\",ept)\r	. i \'lock d  q\r	. . u 0\r	. . w !,\"Could not lock EPT \"\"\",ept,\"\"\", cid \",cid\r	. . u fHndl\r	. d\r	. . s bl0=$$zgetblu^EAXLIB9(\"EPT\",ept,10460,0)\r	. . i item=10464 s num10464=$$zgetpcu^EAXLIB9(bl0,5) q:num10464=formerCount\r	. . i item=10463 s num10463=$$zgetpcu^EAXLIB9(bl0,4) q:num10463=formerCount\r	. . s curline=$$zmaxunl^EAXLIB9(bl0)\r	. . i curline\'=$p(line,\",\",4) d  q\r	. . . u 0\r	. . . w !,\"The line count for patient cid \",cid,\" has changed from \",line,\" to \",curline\r	. . . u fHndl\r	. . s SKIPLINE=\"\"\r	. . f test=1:1:$$geti^EAXLIB1(\"EPT\",ept,item,0) d  q:SKIPLINE\r	. . . s val=$$geti^EAXLIB1(\"EPT\",ept,item,test)\r	. . . i val]\"\",test>formerCount d\r	. . . . u 0\r	. . . . w !,\"Patient cid \",cid,\" has data in the previously blank zone.\"\r	. . . . u fHndl\r	. . . . s SKIPLINE=1\r	. . ;\r	. . ;u 0\r	. . ;b\r	. . i item=10464 s bl0=$$zputpcu^EAXLIB9(bl0,5,formerCount)  ; EPT-10464\r	. . i item=10463 s bl0=$$zputpcu^EAXLIB9(bl0,4,formerCount)  ; EPT-10463\r	. . ;u fHndl\r	. . ;\r	. . s %=$$zputblu^EAXLIB9(\"EPT\",ept,10460,0,99999,bl0)\r	. s %=$$zunlock^AILock(\"EPT\",ept)\r	;\r	i fHndl]\"\" u 0 s %=$$fclose^CSMUMNU(fHndl)\r	;\r	w !,\"Done\"\r	q\r	;\r	q  ;;#eor#\r\r',NULL),(1689,'0831-NCAL-Spr07-SLG397873','RADIOLOGY',NULL,'KAMATH, SUJATA            ',' ','Other','Server Only',0,'Open','2009-08-31 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0831-NCAL-Spr07-SLG397873.doc#',NULL,'397873',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',';Reference numbers: SLG 397873 & SR CHG000003999957 \r;Note: Please reference the above SLG in the LPP comments\r\r;The report filter programming point below is indented to be used by KP NCAL to filter out IP2 orders from Ancillary and Verify orders activities.\r\rSetup instructions:\r1. Create a copy of LPP 52212\r2. In your copy of LPP 52212 delete the existing code and enter the following code:\r$$low^HULIBCAS(\'($$getn^RISLPP1(\"ORD\",ary(\"ORD\",1),1,\"1;18\")=4&$$filter^RISLPP12(5,2,1)))\r\r3. Set the database type to be Order\r4. In the comments section indicate that this programming point will filter out orders who have an ordering source of Clinician Orders (ORD 295 is equal to 4) and have an ordering mode of inpatient (ORD 34090=2). Enter the SLG number for reference.\r5. Exit out of the LPP.\r6. In Hyperspace access Ancillary orders activity for your test patient and click on the settings button\r7. select the desired report and then click on the general tab. Under the additional filter section enter in the LPP you created in step 2 above\r8. Save your report.\r\r\rTesting:\r1. For an OP patient place a couple of imaging procedure orders from order entry.Note down the order Ids.\r2. Place a couple of more imaging orders for the same test patient from ancillary orders. Note down the order Ids.\r3. Admit your patient and then place a couple of imaging orders through order entry. Note down the order Ids.\r4. Place a couple of more imaging orders for the same test patient from ancillary orders. Note down the order Ids.\r5. Verify that you do not see the IP orders placed in step 3 above and that all other orders remain visible.\r',NULL),(1690,'0901-NCAL-SPR07SLG388351',' ',NULL,'BUCKINGHAM, ADAM            ',' ',' ','Server Only',0,'Open','2009-08-31 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0901-NCAL-SPR07-SLG388351.doc#',NULL,'388351',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1691,'0903-NCAL-SPR07-SLG432173','EPICCARE AMBULATORY',NULL,'DAVEY, DREW            ',' ',' ','Server Only',0,'Open','2009-09-02 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0903-NCAL-Spr07-SLG432173.doc#',NULL,'432173',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',';The code associated with this RA is meant to be shared with Bill Yu from KP NCAL.\r\r:$$dm^%ZeUDT(val,\"\",\"\",1)\r',NULL),(1692,'SET ADT LINKING SETTING TO FORCE CASES TO CREATE SEPARATE PREADMISSIONS','OPTIME',NULL,'SAUDER, ADAM            ',' ','Enhancement','Server Only',0,'Open','2009-09-08 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1692 - OpTime - Set ADT Linking Settings to Force Cases to Create Separate Preadmissions.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1693,'KP NCAL - DEBUG CODE IN PSUP FOR RW CORE MEASURES ISSUE','INPATIENT EMR, REPORTING WORKBENCH',NULL,'SPINOZZI, MARIA            ','Other','Other','Server Only',0,'Open','2009-09-08 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\KP NCAL Debug Code in PSUPCAM for Core Measures Issue.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1695,'KP NCAL - CLEAR HANGING LOCKS ON PATIENT IN PRODCAM WITH CRASHING ISSUE','Inpatient',NULL,'SPINOZZI, MARIA            ','Other','Fix','Server Only',0,'Open','2009-09-10 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\KP NCAL Clear Hanging Locks.doc#',NULL,'434872',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1696,'KP NCAL- ANOTATE AND REMOVE FROM VIEW MESSAGES MEANT FOR TEST MEMBERS','MYCHART',NULL,'PARK, KEVIN            ','Other',' ',' ',0,'Open','2009-09-21 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\20090921 - KP NCAL - MyChart - Annotate and remove from view messages meant for test members.doc#',NULL,'427896',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1697,'0914-NCAL-SPR07SLG427877','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ','Fax #:',' ',0,'Open','2009-09-11 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0914-NCAL-Spr07SLG427877.doc#',NULL,'427877',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1698,'0918-NCAL-Spr07SLG434499.doc','EDI',NULL,'FABER. GREG            ',' ','Other','Server Only',0,'Open','2009-09-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0918-NCAL-Spr07SLG434499.doc#',NULL,'434499',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1699,'RIS, KP NCAL, TURN ON DEBUGGING FOR PACS INTEGRATION','RADIOLOGY',NULL,'KAMATH, SUJATA            ',' ','Other','Server Only',0,'Open','2009-09-16 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1699 - RIS, KP NCAL, turn on debugging for PACS integration.doc#',NULL,'437122',NULL,' ','f117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1700,'0921-NCAL-SPR07-SLG435039','EPICCARE AMBULATORY',NULL,'DAVEY, DREW            ',' ','Other','Server Only',0,'Open','2009-09-18 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0921-NCAL-SPR07-SLG435039.doc#',NULL,'435039',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1701,'091809 RUNNING INDEX VERIFIER IN WITS (SLG439079)','EPICRX',NULL,'MOHNEY, RYAN            ',' ',' ',' ',0,'Open','2009-09-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\1701-NCAL-SPR07SLG439079.doc#',NULL,'439079',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1704,'ACTIVATE HSB AND INP RECORDS','INPATIENT EMR',NULL,'TAIT, AARON            ','Other','Fix','Server Only',0,'Open','2009-10-03 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\Activate HSB and INP records.doc#',NULL,'444546',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1705,'Set Coding and Abstracting Status for Old Accounts','HIM',NULL,'GANNON, KYLE            ','Data Corruption','Fix','Server Only',0,'Open','2009-10-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1705 - Set Coding and Abstracting Status for Old Accounts1.doc#',NULL,'422968',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1706,'1006-NCAL-Spr07SLG444538.txt',' ',NULL,'SHIMMIN, ROBERT            ',' ','Fax #:',' ',0,'Open','2009-10-05 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\1006-NCAL-Spr07SLG444538.doc#',NULL,'444538',NULL,' ','F117112','KAISER PERMANENTE - N CAL ','; The code associated with this RA is intended for use by SI/API only\r; SLG 444538\r; HD0000004874937\r; Mitigate interface delays due to subscription race condition\r\r; Set CSIPUBSUB to custom value that circumvents the subscription race condition\r\rs ^CSIPUBSUB(\"Confirmation\",\"epic.patient\",\"TopicAdded\")=\"%zpd^EAXLIB5() s %=$$zlockG^CSSSUBP3(\"\"^CSSGETRC(\"\"\"\"SubscribeMessageNumber\"\"\"\",\"\"\"\"EPT\"\"\"\",\"\"_$p(topic,\"\".\"\",3)_\"\")\"\") d SubConfirm^CSSSUBP3(topic,msgID) s:$d(^CSSGETRC(\"\"SubscribeMessageNumber\"\",$p(topic,\"\".\"\",3),msgID)) %=$i(^CSSGETRC(\"\"SubscribeMessageNumber\"\",$p(topic,\"\".\"\",3),msgID),-31) s %=$$zunlockG^CSSSUBP3(\"\"^CSSGETRC(\"\"\"\"SubscribeMessageNumber\"\"\"\",\"\"\"\"EPT\"\"\"\",\"\"_$p(topic,\"\".\"\",3)_\"\")\"\")\"\r\r; Restore the Epic-released value, as a backout plan, or once the underlying code issue has been fixed\r\rs ^CSIPUBSUB(\"Confirmation\",\"epic.patient\",\"TopicAdded\")=\"SubConfirm^CSSSUBP3(topic,msgID)\"\r\r; Additional code needed for testing. Opens a subscription for a patient by CID.\r\rs cid=<EPT CID>\rw !,$$SubPat2^CSSSUBPB(cid,$$zgtActDp^EAXLIB())\r',NULL),(1707,'1008-NCAL-SPR07-SLG362311',' ',NULL,'PODOLL, BRANDON            ',' ',' ',' ',0,'Open','2009-10-07 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\1008-NCAL-SPR07-SLG362311.doc#',NULL,'362311',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',';1008-NCAL-SPR07-SLG362311\r;SCAL RA 1707  HD0000004861838\r;The code associated with this RA is meant to only be shared with appropriate SI engineers. \r\r;the following code should be run on the controlling deployment\r\r;Initial conditions:\r;All contacts have been copied from the source to the target. Compare target EPT with source and target MPT.\r;No add merge specs have been run. Check that source data for items 95500:95505 have been copied to target\r\r;initial setup, perform for all cleanups\rK  \rs tCID=\rs sCID=\rs imeCID=\rs mptTCID=\rs mptSCID=\r;\rd ^EAINISET(\"EPT\"),^HUINIT\rs bid=$$AuditBatch^EAETBT1()\rs ID=$$zCIDgtID^CSEISYNC(\"EPT\",tCID),(NEW,tarID,tgtID,tID)=ID\rs ID2=$$zCIDgtID^CSEISYNC(\"EPT\",sCID),(SAME,srcID,sID)=ID2\rs oldExt=$$getidout^IDEPT(SAME,\"EPT\")\rs mgIdSrc=$$zCIDgtID^CSEISYNC(\"MPT\",mptSCID),(srcMPT,mrgParams(\"IDMPTSRC\"))=mgIdSrc\rs mgIdTrgt=$$zCIDgtID^CSEISYNC(\"MPT\",mptTCID),mrgParams(\"IDMPTTGT\")=mgIdTrgt\rs imeID=$$zCIDgtID^CSEISYNC(\"IME\",imeCID),mrgParams(\"IMEID\")=imeID\rs UID=^%ZeUTT($I,\"UID\"),userId=$$getidout^IDEPT(UID,\"EMP\",$$EMPdir^HUCONFIG())\r;\rw $$lockPat^CSEPTMGU(ID,20,\"\",2,\"\",tCID) ; CS and local lock for target, should be 1\rw $$lockPat^CSEPTMGU(ID2,20,\"\",2,\"\",sCID) ; CS and local lock for source, should be 1 (even if source doesn\'t exist)\r;\r;NORMALLY POPULATED BEFORE MERGE\rS OK=1 D NtBkChk^IDVERLCK W OK ;CHECK THAT OK=1\rD OKMRG^WPMRGEPT w OK ;CHECK THAT OK=1   \rd ^EAINISET(\"MPT\")\rd preMrg^HWEPTMG6(mgIdTrgt,mgIdSrc,.mpiInfo) ;get clean ID tables from MPT\rd ^EAINISET(\"EPT\")\r;\r;for all the DATs from the source record:\rD chgDATtb^EANETFX(ID2,srcDAT,tarDAT)\r\r;==============================================================\r;if source still exists, perform HDF post-merge, delete source, and adjust netback\rD DNKA^SXPATMRG\rd postMrg^NWEPTM\rd WPRMRG^WPMRGQ\rd PostEPT^PGYKPEPT\rd Kill+1^EAMERGE2\r\r;if source didn\'t exist, just check netbacks and adjust if necessary\rk mrgChk s mrgChk=1 d NtBkRst^HUEPTUM4(srcMPT,\"\",tgtID,\"\",.mrgChk) zw mrgChk ;check netbacks\rD ^EANETFX(INI,ID2,ID,\'BKG) ;adjust netbacks\r\r;general merge end code\rs mrgDone=1 d SaveHist^HWEPTMG2(NEW,oldExt,userId) ;set EPT-2119:2122\rd pstMrg^HWEPTMG6(NEW,SAME,.mpiInfo,userId) ;rebuild ID table\rD chkMRG^IMERGE2(mrgParams(\"IMEID\"),NEW,SAME,mgIdTrgt,mgIdSrc,userId,.er) W !,er\r;CHECK THAT er=\"\"\r\r;CS specific merge code\rd audPtCID^CSEPTMGU(tID,sCID,tCID,$$zgetnp^CSEPTMG3(\"ECI\",$$%zGtCom^CSEPTMG3(),90,1,99999),imeID,sID)\rd restoreDCI^CSEPTMGU(tID,imeID,1)\rs tGen=$p($$zgGen^CSEPTMG3(\"EPT\",tID,99999,1),\"^\",2)\rs %=$$zpGen^CSEPTMG3(\"EPT\",tID,99999,1,$$zgtActDp^CSEPTMG3(),tGen+1,1)\rd UpdStat^CSEPTMG1(imeID,5) ;complete on controller, utility will merge remotes\rd EndBatch^EAETBT1(bid)\r\rw $$unlockPat^CSEPTMGU(ID,tCID) ; should be 1\rw $$unlockPat^CSEPTMGU(ID2,sCID) ; should be 1\r\r;if necessary:\r;d MrgFlgs^CSEPTMG1(imeID,0) ;clear merge flags\r;w $$stMRHFlg^CSEPMG1(ID,0,\"\",\"\",0) ;clear merge flags on EMPI (item not EMPI tracked)\r;d markGrpChngd^CSSCONFLC2(\"EPT\",ID,99999,group,\"EPT\",ID) ;mark group as changed: 400=ID table, 405=ID Hx table\r;d trigUpdate^CSSUPTRG(\"EPT\",ID,\"\",UID) ;trigger out the changes marked\r;s %=$$SubPat^CSSSUBPB(ID) d trigGetRec^CSSGETRCO2(\"EPT\",ID,UID) ;remote subscribe and getRecord\r',NULL),(1710,'101309 NCAL REMOVING DISCONTINUED ORDERS FROM VERIFICATION QUEUE IN PRODCCM (SLG449148)','WILLOW',NULL,'MOHNEY, RYAN            ','Data Corruption',' ',' ',0,'Open','2009-10-13 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\1710-NCAL-SPR07SLG449148.doc#',NULL,'449148',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1711,'1019-NCAL-Spr07SLG331253','RADIOLOGY',NULL,'KAMATH, SUJATA            ',' ','Other','Server Only',0,'Open','2009-10-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\1019-NCAL-Spr07SLG331253.doc#',NULL,'331253',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1714,'RA 1714 - CR - DELAY BUILD UTILITY TO CORRECT DII-61,150,160,166 (PRODNBS)','CLARITY',NULL,'PILLAI, KARTHIK            ',' ','Fix','Server Only',0,'Open','2009-10-22 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1714 - CR - DELAY BUILD UTILITY TO CORRECT DII-61,150,160,166 - PRODNBS.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1715,'RA 1715 - OB_EPT_BIRTH_HX EXTRANEOUS COLUMN REFERENCES REMOVAL','CLARITY',NULL,'PILLAI, KARTHIK            ',' ','Fix','Server Only',0,'Open','2009-10-22 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1715 - CR - OB_EPT_BIRTH_HX EXTRANEOUS COLUMN REFERENCES REMOVAL1.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1716,'KP NCAL - Clean Up Acct Note Causing XML error','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ',' ','Fix','Server Only',0,'Open','2009-10-27 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1716 - HB Clean Up Account Note Causing XML error.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1719,'121609 - Run Utility for PSE 435131','INPATIENT EMR',NULL,'FOWLER, KRISTIE            ','Data Corruption','Fix','Server Only',0,'Open','2009-11-17 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\121609 - Run Utility for PSE 435131.doc#',NULL,'436408',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,'F327190'),(1720,'KP NCAL Final Cleanup of INP Acknowledgment Items','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Data Corruption','Other','Server Only',0,'Open','2009-11-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1720 - Inpatient, KP NCAL Unacknowledged Order INP Item Cleanup - final.doc#',NULL,'289500',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1722,'Enable and Disable UCW and Intra-op Functionality','OPTIME',NULL,'SAUDER, ADAM            ',' ',' ','Server Only',0,'Open','2009-11-10 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1722 - OpTime - Enable and Disable UCW and Intra-op Functionality.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1723,'NCAL-SPR07SLG404712','WILLOW',NULL,'MOHNEY, RYAN            ','Data Corruption',' ',' ',0,'Open','2009-11-11 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\1723-NCAL-SPR07SLG4047121.doc#',NULL,'404712',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1726,'1130-NCAL-Spr07SLG466142','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ','Fax #:','608-216-9843',0,'Open','2009-11-25 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\1130-NCAL-Spr07SLG466142.doc#',NULL,'466142',NULL,' ','F117112','KAISER PERMANENTE - N CAL ','; Request first-time GetRecords in bulk \r; SLG 466142\r; HD0000005007758\r; This code is intended for use by SI/API only\r\rzl\rfirstGR\r  f  r !,cid q:cid=\"\"  d\r  . s ept=$$zCIDgtID^EAXLIB(\"EPT\",cid) q:ept=\"\"\r  . s %=$$UnSubPat^CSSSUBPB(ept)\r  . k ^CSSGETRC(\"EPT\",cid) \r  . s ^CSSGETRC(\"EPT\",cid,\"Gen\")=0 \r  . s ^CSSGETRC(\"EPT\",cid,\"UseGlo\")=1 \r  . d InitiateGR^CSSSRVC(\"EPT\",ept,2)\r  . f  s stat=$$geti^EAXLIB(\"EPT\",ept,24050,1,99999) q:stat=3  h 5\r  q\r\rd firstGR\r',NULL),(1727,'Sychronize records attached to cancelled admissions','CHART SYNC',NULL,'SHIMMIN, ROBERT            ',' ','Fax #:','608-216-9843',0,'Open','2009-12-02 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\1727-NCAL-Spr07SLG367733.doc#',NULL,'367733',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1729,'1211-NCAL-Spr07-SLG422968','HIM',NULL,'GANNON, KYLE',' ','Other','Server Only',0,'Open','2009-12-10 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\1211-NCAL-Spr07-SLG422968.doc#',NULL,'422968',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',';The code associated with this RA is meant to only be shared with the appropriate SI engineers.\r\rsearch(limit,startID)\r n harID,cnt,codStatErr,absStatErr,codHistErr,absHistErr,lastID\r n codStat,absStat,codHistCnt,absHistCnt,codHistLn,absHistLn\r n codHistVal,absHistVal,harLn\r k ^XSLG422968\r s harID=startID\r f  s harID=$$znxIxID^EAXLIB5(\"HAR\",2201,1,harID) q:((harID=\"\")!((limit]\"\")&(cnt>limit)))  d  \r . s codStatErr=\"\"\r . s absStatErr=\"\"\r . k codHistErr\r . k absHistErr\r . s %=$$scrdots^HULIB67(.cnt,100,1000)\r . i cnt=limit s lastID=harID\r . s codStat=$$getn^EAXLIB(\"HAR\",harID,1,\"140;1\")\r . s absStat=$$zgetnp^EAXLIB11(\"HAR\",harID,1500,1,99999)\r . s codHistCnt=+$$getn^EAXLIB(\"HAR\",harID,0,\"142;1;1\")\r . s absHistCnt=+$$getn^EAXLIB(\"HAR\",harID,0,\"152;1;1\")\r . i codStat=\"\",(absStat=\"\"),(codHistCnt=0),(absHistCnt=0) q\r . i codHistCnt>0,(codStat=\"\") s ^XSLG422968(\"Coding Status\",harID)=\"\"\r . i absHistCnt>0,(absStat=\"\") s ^XSLG422968(\"Abs Status\",harID)=\"\"\r . f codHistLn=1:1:codHistCnt d  \r . . s codHistVal=$$getn^EAXLIB(\"HAR\",harID,codHistLn,\"142;1;1\")\r . . i codHistVal]\"\" q\r . . s ^XSLG422968(\"Coding Hist\",harID,codHistLn)=\"\"\r . f absHistLn=1:1:absHistCnt d  \r . . s absHistVal=$$getn^EAXLIB(\"HAR\",harID,absHistLn,\"152;1;1\")\r . . i absHistVal]\"\" q\r . . s ^XSLG422968(\"Abs Hist\",harID,absHistLn)=\"\"\r i lastID]\"\" w !,\"Last ID Searched: \",lastID\r w !!,\"Accounts missing coding status:\"\r s harID=\"\"\r f  s harID=$O(^XSLG422968(\"Coding Status\",harID)) q:harID=\"\"  d  \r . w !,harID\r w !!,\"Accounts missing abstracting status:\"\r s harID=\"\"\r f  s harID=$O(^XSLG422968(\"Abs Status\",harID)) q:harID=\"\"  d  \r . w !,harID\r w !!,\"Accounts missing coding history values\"\r w !,\"Account|Line\"\r s harID=\"\"\r f  s harID=$O(^XSLG422968(\"Coding Hist\",harID)) q:harID=\"\"  d  \r . s harLn=\"\"\r . f  s harLn=$O(^XSLG422968(\"Coding Hist\",harID,harLn)) q:harLn=\"\"  d  \r . . w !,harID,\"|\",harLn\r w !!,\"Accounts missing abstracting history values\"\r w !,\"Account|Line\"\r s harID=\"\"\r f  s harID=$O(^XSLG422968(\"Abs Hist\",harID)) q:harID=\"\"  d  \r . s harLn=\"\"\r . f  s harLn=$O(^XSLG422968(\"Abs Hist\",harID,harLn)) q:harLn=\"\"  d  \r . . w !,harID,\"|\",harLn\r q\r\r************************************************************************************************************\r\rcleanCoding()\r n bid,harID,locked,cnt,ln,prevVal\r d ^HUINIT\r d %zidrule^PC(\"HAR\")\r s bid=$$AuditBatch^EAETBT1()\r f  s harID=$O(^XSLG422968(\"Coding Hist\",harID)) q:harID=\"\"  d  \r . s locked=$$zlock^%Zefnlid(\"HAR\",harID,15)\r . i \'locked w !,\"Could not lock R HAR \",harID q\r . s cnt=cnt+1\r . d:(cnt#100=0) FlushBatch^EAETBT1(bid)\r . s ln=\"\"\r . f  s ln=$O(^XSLG422968(\"Coding Hist\",harID,ln)) q:ln=\"\"  d  \r . . s prevVal=$$getn^EAXLIB(\"HAR\",harID,ln-1,\"142;1;1\")\r . . i prevVal]\"\" d  \r . . . s %=$$putn^EAXLIB(\"HAR\",harID,ln,\"142;1;1\",prevVal,\"\",1421)\r . . . k ^XSLG422968(\"Coding Hist\",harID,ln)\r . i $d(^XSLG422968(\"Coding Status\",harID)) d fixCodeStatus(harID)\r . s %=$$zunlock^%Zefnlid(\"HAR\",harID)\r s harID=\"\"\r f  s harID=$O(^XSLG422968(\"Coding Status\",harID)) q:harID=\"\"  d  \r . i $d(^XSLG422968(\"Coding Hist\",harID)) q\r . s locked=$$zlock^%Zefnlid(\"HAR\",harID,15)\r . i \'locked w !,\"Could not lock R HAR \",harID q\r . s cnt=cnt+1\r . d:(cnt#100=0) FlushBatch^EAETBT1(bid)\r . d fixCodeStatus(harID)\r . s %=$$zunlock^%Zefnlid(\"HAR\",harID)\r d EndBatch^EAETBT1(bid)\r q\rfixCodeStatus(harID)\r q:harID=\"\"\r n codStat,histCnt,lastVal\r s codStat=$$getn^EAXLIB(\"HAR\",harID,1,\"140;1\")\r i codStat]\"\" q\r s histCnt=$$getn^EAXLIB(\"HAR\",harID,0,\"142;1;1\")\r s lastVal=$$getn^EAXLIB(\"HAR\",harID,histCnt,\"142;1;1\")\r i lastVal]\"\" d  \r . s %=$$insrti^EALIB(1400,lastVal,\"\",\"\",\"\",harID,99999,\"HAR\")\r . k ^XSLG422968(\"Coding Status\",harID)\r q\r\r************************************************************************************************************\r\rcleanAbstract()\r n bid,harID,locked,cnt,ln,prevVal\r d ^HUINIT\r d %zidrule^PC(\"HAR\")\r s bid=$$AuditBatch^EAETBT1()\r f  s harID=$O(^XSLG422968(\"Abs Hist\",harID)) q:harID=\"\"  d  \r . s locked=$$zlock^%Zefnlid(\"HAR\",harID,15)\r . i \'locked w !,\"Could not lock R HAR \",harID q \r . s cnt=cnt+1\r . d:(cnt#100=0) FlushBatch^EAETBT1(bid)\r . s ln=\"\"\r . f  s ln=$O(^XSLG422968(\"Abs Hist\",harID,ln)) q:ln=\"\"  d  \r . . s prevVal=$$getn^EAXLIB(\"HAR\",harID,ln-1,\"152;1;1\")\r . . i prevVal]\"\" d  \r . . . s %=$$putn^EAXLIB(\"HAR\",harID,ln,\"152;1;1\",prevVal,\"\",1521)\r . . . k ^XSLG422968(\"Abs Hist\",harID,ln)\r . i $d(^XSLG422968(\"Abs Status\",harID)) d fixAbsStatus(harID)\r . s %=$$zunlock^%Zefnlid(\"HAR\",harID)\r s harID=\"\"\r f  s harID=$O(^XSLG422968(\"Abs Status\",harID)) q:harID=\"\"  d  \r . i $d(^XSLG422968(\"Abs Hist\",harID)) q\r . s locked=$$zlock^%Zefnlid(\"HAR\",harID,15)\r . i \'locked w !,\"Could not lock R HAR \",harID q\r . s cnt=cnt+1\r . d:(cnt#100=0) FlushBatch^EAETBT1(bid)\r . d fixAbsStatus(harID)\r . s %=$$zunlock^%Zefnlid(\"HAR\",harID)\r d EndBatch^EAETBT1(bid)\r q\rfixAbsStatus(harID)\r q:harID=\"\"\r n absStat,histCnt,lastVal\r s absStat=$$zgetnp^EAXLIB11(\"HAR\",harID,1500,1,99999)\r i abstStat]\"\" q\r s histCnt=$$getn^EAXLIB(\"HAR\",harID,0,\"152;1;1\")\r s lastVal=$$getn^EAXLIB(\"HAR\",harID,histCnt,\"152;1;1\")\r i lastVal]\"\" d  \r . s %=$$insrti^EALIB(1500,lastVal,\"\",\"\",\"\",harID,99999,\"HAR\")\r . k ^XSLG422968(\"Abs Status\",harID)\r q\r\r','D112011'),(1730,'Clean-up Duplicate unsignable messages in Provider inbaskets','INPATIENT EMR, ORDERS',NULL,'SPINOZZI, MARIA            ','Other','Fix','Server Only',0,'Open','2009-12-11 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1730 KP NCAL Clean up Inbasket messages.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1731,'1215-NCAL-Spr07SLG404835','CHART SYNC',NULL,'SHIMMIN, ROBERT            ','Other',' ',' ',0,'Open','2009-12-14 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\1215-NCAL-Spr07SLG404835.doc#',NULL,'404835',NULL,' ','F117112','KAISER PERMANENTE - N CAL ','; Import group FSD-10 data from CSSEXVLT into Chronicles\r; SLG 404835\r; PR 5070455\r; This code is for use by SI / API only.\r;\r;\r; Usage\r; d doAll(0) ; validate-only mode for all MSRs on FSD-10\r; d doAll(1) ; import vault for all MSRs on FSD-10, provided it can now be mapped\r; d doAll(2) ; import vault for all MSRs on FSD-10, ignoring data mapping errors\r;\r; d doOne(fsd,0) ; validate-only mode for a single FSD record\r; d doOne(fsd,1) ; import vault for a single FSD record, providing the vault data can now be mapped\r; d doOne(fsd,2) ; import vault for a single FSD record, ignoring data mapping errors\r;\r; Each mode prints a list of any data mapping errors or other irregularities encountered\r\rzl\rdoAll(MODE)\r  n err,tmp,bid,ZNOGRPTRK,fsd\r  s:err=\"\" err=$$zGtTmpGlo^CSSUPTRG()\r  s:tmp=\"\" tmp=$$zGtTmpGlo^CSSUPTRG()\r  s bid=$$AuditBatch^EAETBT1()\r  s ZNOGRPTRK=1\r  f  s fsd=$o(^EXX(\"E1L\",1,1160,\"FSD\",fsd)) q:fsd=\"\"  d doFSD(fsd,MODE)\r  d EndBatch^EAETBT1(bid)  \r  zw err \r  d %zRelTmpGlo^CSSUPTRG(err)\r  d %zRelTmpGlo^CSSUPTRG(tmp)\r  q\rdoOne(fsd,MODE)\r  n err,tmp,bid,ZNOGRPTRK\r  s:err=\"\" err=$$zGtTmpGlo^CSSUPTRG()\r  s:tmp=\"\" tmp=$$zGtTmpGlo^CSSUPTRG()\r  s bid=$$AuditBatch^EAETBT1()\r  s ZNOGRPTRK=1\r  d doFSD(fsd,MODE)\r  d EndBatch^EAETBT1(bid)  \r  zw err \r  d %zRelTmpGlo^CSSUPTRG(err)\r  d %zRelTmpGlo^CSSUPTRG(tmp)\r  q\rdoFSD(fsd,MODE)\r  k @tmp\r  n e1l,found,grp,vnode,eptcid,itm,cnt,ln,val,flocid,line,devcid,flouci,ID,DAT\r  s e1l=\"\",found=\"\"\r  f  s e1l=$o(^EXX(\"E1L\",1,1160,\"FSD\",1170,fsd,e1l)) q:e1l=\"\"  d  q:found\r  . s grp=$$geti^EAXLIB(\"E1L\",e1l,1011,1,99999)\r  . s vnode=$$geti^EAXLIB(\"E1L\",e1l,1080,1,99999)\r  . i grp=10,vnode]\"\" s found=1\r  i found=\"\" s @err@(fsd)=\"No FSD-10 MSRs\" q\r  s ept=$$GetEPTid^CSSPHOOK(^CSSEXVLT(vnode,100,1)) ; fsd -> inp -> ept\r  s eptcid=$$zGtCID^CSSLOCK(\"EPT\",ept)\r  i eptcid=\"\" s @err@(fsd)=\"Could not find root EPT\" q\r  i $d(^CSSCONFLICT(\"GroupIndex\",\"FSD\",fsd,99999,10)) s @err@(fsd)=\"Unresolved conflicts for group FSD 10\"\r  s itm=1000 d  ; Special item, vault data hasn\'t been mapped, format FLO CID, optional dash-line number\r  . s cnt=^CSSEXVLT(vnode,itm,0)\r  . s @tmp@(itm,0)=cnt  \r  . f ln=1:1:cnt d\r  . . s val=^CSSEXVLT(vnode,itm,ln)\r  . . s flocid=$p(val,\"-\",1),line=$p(val,\"-\",2)\r  . . i val]\"\" d\r  . . . s val=$$CID2ID^CSSISYNC4(\"FLO\",flocid)\r  . . . s:val=\"\" @err@(fsd,itm,ln)=\"Cannot map FLO id\"\r  . . . s:line]\"\" val=val_\"-\"_line\r  . . s @tmp@(itm,ln)=val\r  s itm=1100 d  ; Had MSRs. Hopefully they are resolvable now.\r  . s cnt=^CSSEXVLT(vnode,itm,0)\r  . s @tmp@(itm,0)=cnt  \r  . f ln=1:1:cnt d\r  . . s val=^CSSEXVLT(vnode,itm,ln)\r  . . s devcid=$p(val,\"CID:\",2)\r  . . i devcid]\"\" d\r  . . . s val=$$CID2ID^CSSISYNC4(\"DEV\",devcid)\r  . . . s:val=\"\" @err@(fsd,itm,ln)=\"Cannot map DEV id\"\r  . . s @tmp@(itm,ln)=val\r  s itm=1140 d  ; Special item (DAT pointer), vault data hasn\'t been mapped, format FLO UCI^FLO CID\r  . s cnt=^CSSEXVLT(vnode,itm,0)\r  . s @tmp@(itm,0)=cnt  \r  . f ln=1:1:cnt d\r  . . s val=^CSSEXVLT(vnode,itm,ln)\r  . . s flouci=$p(val,\"^\",1)\r  . . s flocid=$p(val,\"^\",2)\r  . . i flouci]\"\" s val=$$zUCI2DAT^JCSPP(\"FLO\",flouci)\r  . . i val=\"\",flocid]\"\" d\r  . . . s floid=$$CID2ID^JCSPP(\"FLO\",flocid)\r  . . . s val=$$zoDT^JCSPP(\"FLO\",floid,20)\r  . . . s:val=\"\" @err@(fsd,itm,ln)=\"Cannot map FLO dat\"\r  . . s @tmp@(itm,ln)=val\r  i MODE<1 q  ; validate-only mode\r  i $d(@err@(fsd)),MODE\'=2 q  ; Data validation errors, quit unless in force-mode\r  f itm=1010,1020,1030,1040,1050,1060,1070,1080,1090,1110,1150,1170 d  ; Vault data is already mapped for these\r  . s cnt=^CSSEXVLT(vnode,itm,0)\r  . s @tmp@(itm,0)=cnt\r  . f ln=1:1:cnt s @tmp@(itm,ln)=^CSSEXVLT(vnode,itm,ln)\r  ; import the vault data into Chronicles\r  i \'$$zlockG^CSSLOCK(\"^CSSLOCK(\"\"INUPDCHK\"\",\"\"EPT\"\",eptcid)\",0) d  q\r  . s @err@(fsd)=\"Could not lock root EPT\"\r  i \'$$zlock^CSSLOCK(\"FSD\",fsd) d  q\r  . s %=$$zunlockG^CSSLOCK(\"^CSSLOCK(\"\"INUPDCHK\"\",\"\"EPT\"\",eptcid)\")\r  . s @err@(fsd)=\"Could not lock FSD record\"\r  f itm=1000,1010,1020,1030,1040,1050,1060,1070,1080,1090,1100,1110,1140,1150,1170 d\r  . k val\r  . m val=@tmp@(itm)\r  . s %=$$insrti^CSSISYNCA(itm,.val,\"\",\"\",\"\",fsd,99999,\"FSD\")\r  s ID=fsd,DAT=99999 d PopFSD1001^CSSISYNCA ; Post-import PP, compiles FSD-1001 from 1000/1010\r  ; clear the MSRs for GRP FSD 10 for this record\r  s e1l=\"\"\r  f  s e1l=$o(^EXX(\"E1L\",1,1160,\"FSD\",1170,fsd,e1l)) q:e1l=\"\"  d\r  . s grp=$$geti^EAXLIB(\"E1L\",e1l,1011,1,99999)\r  . i grp=10 d ClearMSR^CSSFILE6(e1l,1,\"Updated\")\r  s %=$$zunlockG^CSSLOCK(\"^CSSLOCK(\"\"INUPDCHK\"\",\"\"EPT\"\",eptcid)\")\r  s %=$$zunlock^CSSLOCK(\"FSD\",fsd)\r  q\r',NULL),(1732,'KP NCAL - HB Post Adjustments Utility','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ',' ','Fix','Server Only',0,'Open','2009-12-15 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1732 - HB Post Adjustment Utility.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - NCAL ',NULL,NULL),(1733,'KP NCAL - EDI - 20091216 - Fix sidetrack queue for 898301 in NB','EDI',NULL,'LOEWENSTEIN, DANIEL            ',' ','Fix','Server Only',0,'Open','2009-12-16 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1733 - 20091216 - Cleanup interface sidetrack queue for 898301 in NB.doc#',NULL,'476025',NULL,'159262','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1738,'Remove stuck orders on test patient in PRODGGM','INPATIENT EMR',NULL,'SPINOZZI, MARIA            ','Other','Not Applicable','Server Only',0,'Open','2010-01-05 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1738 NCAL - Remove pended orders on test patient in ProdGGM.doc#',NULL,'481138',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,'D112011'),(1739,'0119-NCAL-SPR07-SLG391237','PRINTING',NULL,'GREENBLATT, AARON            ',' ',' ','Server Only',0,'Open','2010-01-18 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0119-NCAL-SPR07-SLG391237.doc#',NULL,'391237',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',';this code is associated with NCAL RA 1739 (0119-NCAL-SPR07-SLG391237) and is meant to be used in NCAL and SCAL to search for EPS printers used in LOM and RXD records. If other regions follow the same naming conventions in their printer paths, this search should work for them as well.\r\rzr\rzl\rncalEPS()\r	n count,lomid,rxdid,line,eprnam,lomnam,lwsid,rxdnam\r	s s=\"|\"\r	w !!,\"LOM ID|LOM NAME|LINE|LWS ID|EPR ID|EPR NAME|PRINTER PATH|EPS?\"\r	f  s lomid=$$zoID^EAXLIB2(\"LOM\",lomid) q:lomid=\"\"  d\r	. s count=$$zmaxunl^EALIB9($$zgetblu^EA0LIB9(\"LOM\",lomid,100,0))\r	. f line=1:1:count  d\r	. . s lwsid=$$getn^EAXLIB(\"LOM\",lomid,line,\"100;2;1\")\r	. . s eprnam=$$znam^EAXLIB2(\"EPR\",$$zgetnp^EAXLIB11(\"LWS\",lwsid,25,1,99999))\r	. . s lomnam=$$znam^EAXLIB2(\"LOM\",lomid)\r	. . s eprid=$o(^EA(\"EPR\",eprnam,\"\"))\r	. . s printerpath=$$getn^EAXLIB(\"EPR\",eprid,1,\"120;2\")\r	. . w !,lomid_\"|\"_lomnam_\"|\"_line_\"|\"_lwsid_\"|\"_eprid_s_eprnam_s_printerpath\r	. . i printerpath[\"EPS\" w \"|Yes\"\r	w !!,\"RXD ID|RXD NAME|LINE|LWS ID|EPR ID|EPR NAME|PRINTER PATH|EPS?\"\r	f  s rxdid=$$zoID^EAXLIB2(\"RXD\",rxdid) q:rxdid=\"\"  d\r	. s count=$$zmaxunl^EALIB9($$zgetblu^EA0LIB9(\"RXD\",rxdid,800,0))\r	. f line=1:1:count  d\r	. . s lwsid=$$getn^EAXLIB(\"RXD\",rxdid,line,\"800;1;1\")\r	. . s eprnam=$$znam^EAXLIB2(\"EPR\",$$zgetnp^EAXLIB11(\"LWS\",lwsid,25,1,99999))\r	. . s rxdnam=$$znam^EAXLIB2(\"RXD\",rxdid)\r	. . s eprid=$o(^EA(\"EPR\",eprnam,\"\"))\r	. . s printerpath=$$getn^EAXLIB(\"EPR\",eprid,1,\"120;2\")\r	. . w !,rxdid_\"|\"_rxdnam_\"|\"_line_\"|\"_lwsid_\"|\"_eprid_s_eprnam_s_printerpath\r	. . i printerpath[\"EPS\" w \"|Yes\"\r	q\r\r\rd ncalEPS()\r\r',NULL),(1740,'KP NCAL - ANNOTATE AND REMOVE FROM VIEW MESSAGES SENT TO THE WRONG MEMBER','MYCHART',NULL,'PARK, KEVIN            ','Other',' ',' ',0,'Open','2010-01-21 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\20100121 - KP NCAL - MyChart - Annotate and remove from view messages sent to wrong member1.doc#',NULL,'489239',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1741,'KP NCAL - Remove LGQ navigator sections from navigators','INPATIENT EMR, ORDERS',NULL,'SPINOZZI, MARIA            ','Other','Not Applicable','Server Only',0,'Open','2010-01-25 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0127-NCAL-Spr07SLG490732.doc#',NULL,'490732',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',';The code associated with this RA is meant to be shared with Susan Gall from KPNCAL\r; 0127-NCAL-SLG490732.doc\rLVNSearch(remove)\r	n lvnID,bid\r	i remove d\r	. d ^HUINIT\r	. s bid=$$AuditBatch^EAETBT1() d  ;open/obtain batch\r	. i bid=\"\" w !,\"Unable to open batch job. Quitting...\" s invalid=1\r	q:invalid\r	w !,!,\"This search will find all LVN topic with an LGQ navigator section attached.\"\r	w !,\"It will also notify you if the topic does not have a corresponding PRL section.\"\r	w !,\"Set the 1st parameter to remove the LGQ sections from the topic.\"\r	w !,\"LVN Topic ID|LVN Topic Name|LVN Section ID|LVN Section Name|Status|Contains PRL Section\"\r	f  s lvnID=$$znxIxID^EAXLIB5(\"LVN\",100,2,lvnID) q:lvnID=\"\"  d  ;I LVN 100 - loop over all topics\r	. n PRLfound,ln,toRemove\r	. q:lvnID<90000\r	. f ln=$$zgetnp^EAXLIB11(\"LVN\",lvnID,200,0,99999):-1:1 d  ;loop over all sections\r	. . n LGQfound,lvnSec,lvnSecID,lvnProgID\r	. . s lvnSec=$$zgetnp^EAXLIB11(\"LVN\",lvnID,200,ln,99999)\r	. . s lvnSecID=$$znxIxID^EAXLIB5(\"LVN\",800,lvnSec,\"\")  ;get LVN .1\r	. . s lvnProgID=$$zgetnp^EAXLIB11(\"LVN\",lvnSecID,1020,1,99999)\r	. . i (lvnProgID[\".IPVNMatchedOrdSet\")!(lvnProgID[\".MRVNSmartSets\")!(lvnProgID[\".MRVNSelOrderSet\") s LGQfound=1  ;is LGQ section?\r	. . i LGQfound=1 w !,lvnID,\"|\",$$zgetnp^EAXLIB11(\"LVN\",lvnID,800,1,99999)\r	. . i lvnProgID[\".MRPRLSelector\" s PRLfound=1\r	. . i LGQfound=1 w \"|\",lvnSecID,\"|\",lvnSec\r	. . i remove,(LGQfound=1) s toRemove=toRemove_$s(toRemove]\"\":\",\",1:\"\")_ln\r	. . e  i \'remove,(LGQfound=1) w \"|Found\"\r	. i remove,toRemove]\"\" d\r	. . i \'$$zlock^%Zefnlid(\"LVN\",lvnID) w \"|*ERROR* Could not obtain lock.\" q\r	. . s %=$$zdelLnGr^EALIB6(\"LVN\",lvnID,200,toRemove)\r	. . s %=$$zunlock^%Zefnlid(\"LVN\",lvnID)\r	. . w \"|removed\"\r	. i PRLfound=\"\",(found=1) d\r	. . w \"|*No PRL section found in LVN topic.*\"\r	d:remove EndBatch^EAETBT1(bid)  ;close batch\r	q\r\rd LVNSearch()\r\r','F327190'),(1742,'Configure System for APR DRGs from 3M','HIM',NULL,'GANNON, KYLE            ','Other','Enhancement','Server Only',0,'Open','2010-01-26 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1742 - Configure System for APR DRGs from 3M.doc#',NULL,'485110',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1743,'0128-NCAL-SPR07-SLG485110','HIM',NULL,'GANNON, KYLE            ',' ',' ','Server Only',0,'Open','2010-01-28 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0128-NCAL-SPR07-SLG485110.doc#',NULL,'485110',NULL,' ','F117112','KAISER PERMANENTE - N CAL ','***The code associated with this RA is meant to be shared with Susan Gall from NCAL\r\r\rChange to the outbound coding interface\r========================================\rProfile variable: SECOND_GROUPING_FUNCTION\rValue: $$3MSecPayor^KGCODINGX(%AIM(\"HAR\",\"ID\"))\r\r\rGlobal node settings\r====================\rs ^KHDF(\"Switch\",\"CodingSvc\",\"3MSecPyr\")=36\rs ^KHDF(\"Switch\",\"CodingSvc\",\"GrprMap\",36)=3\r','F327190'),(1744,'0208-NCAL-Spr07-SLG480727','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Data Corruption','Other','Server Only',0,'Open','2010-02-05 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0208-NCAL-Spr07-SLG480727.doc#',NULL,'480727',NULL,' ','F117112','KAISER PERMANENTE - N CAL ','	;The code associated with this RA is meant to be shared with Susan Gall from NCAL.\r	;KP Tracking Number: PR 5086092\r	;\r	; NAME:         inpHNOErase (PUBLIC)\r	; DESCRIPTION:  deletes given HNO record from given INP record, and EPT and INP IDs from HNO\r	; PARAMETERS:\r	;  inpID (I,REQ)  - INP record with note to be deleted\r	;  ln (I,REQ)   - line number in INP record of note to be deleted\r	;  hnoID (I,REQ) - ID of note to be deleted\r	;  inpItem (I,OPT) - The super item in INP for the note. Defaults to 5000.\r	;  edit (I,OPT) - True to edit. False to report (by default).\r	; RETURNS:      HNO erased from INP\rinpHNOErase(inpID,ln,hnoID,inpItem,edit) n bid,tempHNO,eptID,eptCSN,twr34020,twr505,twr508,inpStr,proceed\r	q:inpID=\"\"!(ln=\"\"!(hnoID=\"\"))\r	s:inpItem\'=5100 inpItem=5000     ;*CJR+1 01/10 either 5000 or 5100\r	s inpStr=$s(inpItem=5000:\"5000;4;1\",1:\"5100;4;1\"),proceed=1\r	i edit d\r	. d ^HUINIT\r	. s bid=$$AuditBatch^EAETBT1()                     ;open batch\r	. i bid=\"\" w !,\"Unable to open batch.  Quitting.\" s proceed=0\r	q:\'proceed\r	s tempHNO=$$getn^EAXLIB(\"INP\",inpID,ln,inpStr)\r	i hnoID\'=tempHNO w !,\"Passed in HNO (\"_hnoID_\") doesn\'t match HNO on line \"_ln_\" (\"_tempHNO_\")\" q   ;quit if HNO passed in isn\'t same as HNO in specified line\r	s eptID=$$zgetnp^EAXLIB11(\"HNO\",hnoID,505,1,99999)\r	s eptCSN=$$zgetnp^EAXLIB11(\"HNO\",hnoID,508,1,99999)\r	w !!,\"Data to delete: \",!,\"   Line \"_ln_\" from INP super item \"_inpItem_\" in record \"_inpID\r	w !,\"   EPT ID \"_eptID_\" from HNO item 505\",!,\"   Patient CSN \"_eptCSN_\" from HNO item 508\",!,\"   INP ID \"_inpID_\" from HNO item 34020\"\r	q:\'edit\r	w ! s proceed=$$yn^JTSUTIL6(\"Would you like to proceed\",0)\r	q:\'proceed\r	i \'$$zlock^%Zefnlid(\"INP\",inpID) w !,\"No lock on INP \"_inpID g don       ;try to obtain lock INP; if no lock, write INP and quit\r	i \'$$zlock^%Zefnlid(\"HNO\",hnoID) w !,\"No lock on HNO \"_hnoID g don       ;try to obtain lock HNO; if no lock, write HNO and quit\r	s %=$$zdelLnGr^EALIB6(\"INP\",inpID,inpItem,ln,99999)    ;delete HNO from SI INP 5000 or 5100\r	s:inpItem=5000 %=$$zdelLnGr^EALIB6(\"INP\",inpID,5002,ln,99999),%=$$zdelLine^EALIB6(\"INP\",inpID,5002,ln,99999)   ;SI INP 5002\r	w !!,\"HNO \"_hnoID_\" removed from INP \"_inpID\r	s %=$$zkillnp^EAXLIB11(\"HNO\",hnoID,34020,99999,.twr34020)         ;delete I HNO 34020 - INP ID\r	d %zIndex^EAXLIB4(\"HNO\",hnoID,34020,inpID,\"\",\"\",\"\",.twr34020)\r	s %=$$zkillnp^EAXLIB11(\"HNO\",hnoID,505,99999,.twr505)         ;delete I HNO 505 - EPT ID\r	d %zIndex^EAXLIB4(\"HNO\",hnoID,505,eptID,\"\",\"\",\"\",.twr505)\r	s %=$$zkillnp^EAXLIB11(\"HNO\",hnoID,508,99999,.twr508)       ;delete I HNO 508 - EPT CSN\r	d %zIndex^EAXLIB4(\"HNO\",hnoID,508,eptCSN,\"\",\"\",\"\",.twr508)\r	w !,\"INP \"_inpID_\", EPT ID \"_eptID_\", and EPT CSN \"_eptCSN_\" have been removed from HNO \"_hnoID\r	s %=$$zunlock^%Zefnlid(\"HNO\",hnoID)                    ;Unlock HNO record\rdon  s %=$$zunlock^%Zefnlid(\"INP\",inpID)                ;Unlock INP record\r	d EndBatch^EAETBT1(bid)\r	q\r','F327190'),(1745,'Utility to Auto-create Episodes for Upcoming Cases','OPTIME',NULL,'SAUDER, ADAM            ',' ',' ','Server Only',0,'Open','2010-01-28 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1745 - OpTime - Utility to Auto-Create Episodes for Upcoming Cases.doc#',NULL,'494014',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1747,'KP NCAL Retract Cross Deployment IB Messages Inappropriately Generated','ORDERS',NULL,'SPINOZZI, MARIA            ',' ',' ','Server Only',0,'Open','2010-02-03 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0205-NCAL-Spr07-SLG427498.doc#',NULL,'427498',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',';The code associated with this RA is meant to only be shared with appropriate SI engineers.\r\rmain(uid) n id,eow,ord,num,eowID,bad,bid\r i \'$$zisR^EAXLIB2(\"EMP\",$$getidin^%Zefnlib(uid,\"EMP\")) w !!,\"Invalid user id passed in.\" q\r w #,\"Copy-paste the EOW IDs:\"\r f num=1:1 r !,id q:id=\"\"  s eow(num)=id\r s eow=num-1\r w #,\"Copy-paste the ORD IDs:\"\r f num=1:1 r !,id q:id=\"\"  s ord(num)=id\r s ord=num-1\r i ord\'=eow w !!,\"Number mismatch!\" q\r f num=1:1:eow d\r . s eowID=eow(num)\r . i $$zgetnp^EAXLIB11(\"EOW\",eowID,700,1,99999)=ord(num) q\r . s bad=1\r . w !,ord(num),\"|\",eowID\r i bad w !!,\"EOWs do not match ORDs!\" q\r w #\r i \'$$yn^JORDUTILIZE(\"Proceed with fix\") q\r w #\r s bid=$$AuditBatch^EAETBT1()\r f num=1:1:eow d\r . s eowID=eow(num)\r . d ChgOver^HTSTAT2(eowID,uid,5)\r . w !,\"Message \",eowID,\" retracted.\"\r . s cnt=cnt+1\r . i cnt#100=0 d FlushBatch^EAETBT1(bid)\r d EndBatch^EAETBT1(bid)\r q\r\rd main(1)\r',NULL),(1748,'HB KP NCAL CLEAN UP PARTIALLY REJECTED STATEMENT RUN','HOSPITAL BILLING',NULL,'BEGLINGER, MATT            ',' ','Fix','Server Only',0,'Open','2010-02-10 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1748 - HB Clean Up Partially Rejected Statement Run.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,'D112011'),(1749,'Move Preference Cards to New Location Level','OPTIME',NULL,'SAUDER, ADAM            ',' ','Enhancement','Server Only',0,'Open','2010-02-11 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA1749 - OpTime - Move Preference Cards to New Location Level.doc#',NULL,'501767',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1756,'0309-NCAL-SPR07-SLG460192',' ',NULL,'RUSSELL, CHRIS            ',' ','Other','Server Only',0,'Open','2010-03-08 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0309-NCAL-SPR07-SLG460192.doc#',NULL,'460192',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1758,'20100301 - KP NCAL - Run Chronic Diagnosis Cleanup in PSUP','EPICCARE AMBULATORY',NULL,'DAVEY, DREW            ',' ','Other','Server Only',0,'Open','2010-03-01 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1758 20100301 - KP NCAL - Run Chronic Diagnosis Cleanup in PSUP.doc#',NULL,'494635',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1761,'0310-NCAL-SPR07-SLG514430','HIM',NULL,'GANNON, KYLE            ',' ','Fix','Server Only',0,'Open','2010-03-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0310-NCAL-SPR07-SLG514430.doc#',NULL,'514430',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1763,'0310-NCAL-Spr07-SLG489742','ORDERS',NULL,'SPINOZZI, MARIA            ','Data Corruption','Clean-up','Server Only',0,'Open','2010-03-09 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0310-NCAL-Spr07-SLG489742.doc#',NULL,'489742',NULL,' ','G336027','KAISER PERMANENTE - N CAL ',';RA 1763\r;Code to be shared with appropriate SI engineers only\r;\rdeleteln(subset,dupLQL)\r n nxtln,record,contact,pc,otpid,firstline,delLn,ary,ln,lqlID,cnt,bid\r d ^HUINIT\r s bid=$$AuditBatch^EAETBT1()\r f  s nxtln=$$loop^ECB1(subset,nxtln,.record,.contact) q:record=\"\"  d\r . f pc=2:1:$l(record,\"_\") d\r . . s otpid=$p(record,\"_\",pc)\r . . i \'$$zisID^EAXLIB2(\"OTL\",otpid) w !,otpid,\" is not a valid OTP ID\"\" q\r . . k firstline,delLn,ary,cnt\r . . f ln=1:1:$$getn^EAXLIB(\"OTL\",otpid,0,\"1200;1;1\") d\r . . . s lqlID=$$getn^EAXLIB(\"OTL\",otpid,ln,\"1200;1;1\")\r . . . i lqlID\'=dupLQL q  ;quit if not bad question\r . . . i firstline=\"\" s firstline=1 q  ;quit if first line with question\r . . . s ary(ln)=1,cnt=cnt+1  ;create array of lines to delete\r . . i \'$$zlock^LONUTIL1(\"OTL\",otpid) w !,otpid,\" is locked\" q\r . . f  s delLn=$o(ary(delLn),-1) q:delLn=\"\"  d\r . . . s %=$$zdelLnGr^EALIB6(\"OTL\",otpid,1200,delLn,99999)\r . . s %=$$zunlock^LONUTIL1(\"OTL\",otpid)\r . . w !,otpid,\"^\",cnt\r d EndBatch^EAETBT1(bid)\r q\r',NULL),(1767,'0312-NCAL-Spr07-SLG494635',' ',NULL,'DAVEY, DREW            ',' ','Other','Server Only',0,'Open','2010-03-11 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0312-NCAL-Spr07-SLG494635.doc#',NULL,'494635',NULL,' ','G336027','KAISER PERMANENTE - N CAL ',NULL,NULL),(1769,'0319-NCAL-Spr07SLG519050','CHART SYNC',NULL,'SHIMMIN, ROBERT            ','Other',' ',' ',0,'Open','2010-03-18 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0319-NCAL-Spr07SLG519050.doc#',NULL,'519050',NULL,' ','F117112','KAISER PERMANENTE - N CAL ','; The code associated with this RA is meant for SI/API use only.\r; Resolve Chart Sync conflicts on group CVG-95\r; SLG 519050\r; HD0000005329593\r;\r; Usage:\r; d resolveCVG95(0) ; Report-only mode. List conflicts that will be resolved.\r; d resolveCVG95(1) ; Fix mode. Actually resolve conflicts.\r\rzl\rresolveCVG95(FIXMODE)\r  n UID,here,itmArr,bid,CSnglb,cvg,cnode,e1l,status,item,cnt\r  s UID=$$GetUID^CSSRECV()\r  s here=$$zgtActDp^EAXLIB() \r  s %=$$zgGrpItm^CSSCONFLC2(\"CVG\",95,\"\",\"\",.itmArr)\r  i FIXMODE=1 d\r  . s bid=$$AuditBatch^EAETBT1(),CSnglb=$$zGtTmpGlo^%Zefnlih()\r  . i bid=\"\" s FIXMODE=0 w !,\"Could not open audit batch. Proceeding in search-only mode.\",!\r  . i CSnglb=\"\" s FIXMODE=0 w !,\"Could not obtain temp global. Proceeding in search-only mode.\",!\r  w !,\"Index\",?15,\"E1L ID\",?30,\"CVG ID\"\r  f  s cvg=$o(^CSSCONFLICT(\"GroupIndex\",\"CVG\",cvg)) q:cvg=\"\"  d\r  . f  s cnode=$o(^CSSCONFLICT(\"GroupIndex\",\"CVG\",cvg,99999,95,cnode)) q:cnode=\"\"  d\r  . . i ^CSSCONFLICT(cnode,\"IsOwner\")\'=1 q\r  . . s e1l=^CSSCONFLICT(cnode,\"E1LID\") q:e1l=\"\"\r  . . s status=$$getn^CSSCONFLC2(\"E1L\",e1l,1,\"1000;5\")\r  . . i status=5 q\r  . . w !,cnode,?15,e1l,?30,cvg\r  . . i FIXMODE\'=1 q\r  . . m ^CSSCONFLICT(cnode,\"CurDataPreJoin\")=^CSSCONFLICT(cnode,\"CurData\")\r  . . k ^CSSCONFLICT(cnode,\"CurData\")\r  . . ; reload current data\r  . . f  s item=$o(itmArr(item)) q:item=\"\"  d curItem^CSSCONFLC2(cnode,\"CVG\",cvg,99999,item)\r  . . ; resolve RG 8510\r  . . s %=$$grpRelated^CSSCONFLAUTO(\"CVG\",cvg,99999,95,\"CVG\",cvg,1,cnode,1,8510,\"^8510^8520^8530^8540^8550^\",\"\",1)\r  . . ; resolve RG 9510, if it exists in this version\r  . . i $d(itmArr(9510)) s %=$$grpRelated^CSSCONFLAUTO(\"CVG\",cvg,99999,95,\"CVG\",cvg,1,cnode,1,9510,\"^9510^9520^9530^9540^9560^9570^\",\"\",1)\r  . . m ^CSSCONFLICT(cnode,\"InDataPreJoin\")=^CSSCONFLICT(cnode,\"InData\")\r  . . k ^CSSCONFLICT(cnode,\"InData\")\r  . . m ^CSSCONFLICT(cnode,\"InData\")=^CSSCONFLICT(cnode,\"JoinData\")\r  . . s cnt=cnt+1\r  . . s %=$$resolve^CSSCONFLC4(e1l,UID,1)\r  . . s %=$$insrti^CSSCONFLCT(1050,\"Resolved by Command Line Utility\",\"\",\"\",\"\",e1l,99999,\"E1L\")\r  . . i cnt#100=0 d FlushBatch^EAETBT1(bid)\r  i bid]\"\" d EndBatch^EAETBT1(bid)\r  i CSnglb]\"\" d %zRelTmpGlo^%Zefnlih(CSnglb)\r  q\r\rd resolveCVG95(1)\r',NULL),(1770,'WITS3 09 Upgrade Inpatient Tech Notes','INPATIENT EMR, ORDERS',NULL,'SPINOZZI, MARIA            ','Other','Fix','Server Only',0,'Open','2010-03-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\WITS3 09 Upgrade Inpatient Tech Notes.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1771,'KP NCAL Un-Release an Accidentally Released FLO record','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Other','Not Applicable','Server Only',0,'Open','2010-03-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1771 - Inpatient, KP NCAL Un-Release FLO record.doc#',NULL,'521288',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1772,'WITS3 09 Upgrade Cadence Tech Notes','CADENCE',NULL,'KAUFMANN, JACOB            ','Other','Fix','Server Only',0,'Open','2010-03-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\WITS3 09 Upgrade Cadence Tech Notes.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1773,'SUM 09 ADT-Prelude Tech Notes','ADT, REGISTRATION',NULL,'VER BURG, JEFF            ','Other','Not Applicable','Server Only',0,'Open','2010-03-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0319-AP-TechNotes-ADT-Prelude-Sum09.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1774,'HIM Tech Notes for WITS3 Upgrade','HIM',NULL,'GANNON, KYLE            ','Other','Not Applicable','Server Only',0,'Open','2010-03-22 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1774 - WITS3 09 Upgrade HIM Tech Notes.doc#',NULL,' ',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1777,'20100324 - KP NCAL - Run utilities to populate HDF 2484 and HFLAG global for HH1 Conversion - PSUP','EPICCARE AMBULATORY',NULL,'DAVEY, DREW            ','Other','Other','Server Only',0,'Open','2010-03-24 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\20100324 - KP NCAL - Run utilities to populate HDF 2484 and HFLAG global for HH1 Conversion - PSUP.doc#',NULL,'458132',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1780,'KP NCAL Utility to Delete Scratch Notes','INPATIENT EMR',NULL,'RUSSELL, CHRIS            ','Other','Other','Server Only',0,'Open','2010-03-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 1780 - Inpatient, KP NCAL Utility to Delete Scratch Notes.doc#',NULL,'437263',NULL,' ','F117112','KAISER PERMANENTE - N CAL ',NULL,NULL),(1798,'0330-SCAL-Spr07SLG505865','CHART SYNC',NULL,'SHIMMIN, ROBERT            ','Other',' ',' ',0,'Open','2010-03-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0330-SCAL-Spr07SLG505865.doc#',NULL,'505865',NULL,' ','F117112','KAISER PERMANENTE - S CAL ',NULL,NULL),(1875,'2008-11-06 LOAD INFECTIONS','ADT, EPICCARE',NULL,'BUCHANAN, MICHAEL            ',' ','Other','Server Only',0,'Open','2008-11-07 00:00:00','#\\\\cnviaaamr110\\amr\\A&I RA Tracking\\RA Docs\\RA 1875 - IC project - 2008-11-07.doc#',NULL,' ',NULL,' ','F117112','KP NATIONAL ',NULL,NULL),(2049,'0310-NCAL-Spr07SLG347505','INPATIENT EMR, EMERGENCY, OPTIME, EPICRX',NULL,'REIMER, KRISTIE            ',' ','Fix','Server Only',0,'Open','2009-03-10 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0310-NCAL-Spr07SLG347505.doc#',NULL,'347505',NULL,' ','F117112','KP NATIONAL ','The code associated with this RA is meant to be shared with Adam Huffman from NCAL.\r\rReference SLG 347505\r\rFigure 1. \rs:^LNMINFO(infosess,info,\"NumberOfDoses\")=0 ^LNMINFO(infosess,info,\"NumberOfDoses\")=\"\"  ;\r\r\r*NOTE: Please be sure to include the semicolon at the end of the code as it is shown.\r',NULL),(2053,'0313-NCAL-SPR07SLG364629','RADIOLOGY',NULL,'KAMATH, SUJATA            ',' ','Enhancement','Server Only',0,'Open','2009-03-12 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 2053 0313-NCAL-SPR07SLG364629.doc#',NULL,'364629',NULL,' ','F117112','KP NATIONAL ',NULL,NULL),(2066,'0320-NCAL-SPR07SLG338147','RADIOLOGY',NULL,'KAMATH, SUJATA            ',' ','Fix','Server Only',0,'Open','2009-03-19 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\RA 2066 0320-NCAL-SPR07SLG338147.doc#',NULL,'338147',NULL,' ','F117112','KP NATIONAL ','The code associated with this RA is meant to be shared with Lisa Pfeifer from N California.\r\r1. Programming point to be used till the image notification interface is setup up:\rimagesavail^RISLPP14(ordId,patId,patDAT) s %=$$GetPntS^RISFILMS3(718552127) s mocTC=($f($c(10)_$$getMOD^RISACCESSOR2(ordId)_$c(10),$c(10)_\"159\"_$c(10))>0) i modTC d toFinal^RISLPP15(ordId,patId,patDAT,\"\",\"\",\"\",\"\",555000,modTC),^LNODROP(ordId)\r\r71852127 is another LPP that contains the following code:\r\"\" s xmstOrd=$$parent^RISLPP8(ordId) i $$zgetnp^RISLPP1(\"ORD\",xmstOrd,52235,1,99999)]\"\" s %=$$insrti^RISLETTER(52235,\"\",\"\",\"\",\"\",xmstOrd,99999,\"ORD\")\r\r2. Programming point to be used after the image notification interface has been setup:\r^RISLPP15 s %=$$GetPntS^RISPAFPP3(718552127) s modTC=($f($c(10)_$$getMOD^RISACCESSOR2(ordId)_$c(10),$c(10)_\"159\"_$c(10))>0) i modTC d toFinal^RISLPP15(ordId,patId,patDAT,\"\",\"\",\"\",\"\",14099,modTC),^LNODROP(ordId)      \r\r71852127 is another LPP that contains the following code:\r\"\" s xmstOrd=$$parent^RISLPP8(ordId) i $$zgetnp^RISLPP1(\"ORD\",xmstOrd,52235,1,99999)]\"\" s %=$$insrti^RISLETTER(52235,\"\",\"\",\"\",\"\",xmstOrd,99999,\"ORD\")\r',NULL),(2071,'0325-ALL-SPR07SLG366671',' ',NULL,'FUGATE, CHRIS            ',' ',' ','Client Only',0,'Open','2009-03-24 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0325-All-Spr07SLG366671.doc#',NULL,'366671',NULL,' ','F117112','KP NATIONAL ',NULL,NULL),(2159,'0602-NCAL-SPR07SLG304891','EPICCARE AMBULATORY, INPATIENT EMR',NULL,'REIMER, KRISTIE            ',' ',' ',' ',0,'Open','2009-06-02 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0602-NCAL-Spr07SLG304891.doc#',NULL,'304891',NULL,' ','F117112','KP NATIONAL ','The code associated with this RA is meant to be shared with Aditi Vakil from NCAL.\r\rReference SLG 304891\r\rFigure 1. \r1 n %I,%C s %I=INFOuniq s %C=((^LNMINFO(%I,\"ID\")=\"\")&($$getr^EAXLIB(\"EPT\",patID,1,patDAT,\"90002;3\")=3)) s:%C ^LNMINFO(%I,\"ID\")=patID,^LNMINFO(%I,\"DAT\")=patDAT s:($$getr^EAXLIB(\"EPT\",patID,1,patDAT,\"90002;3\")\'=3) x=$$mailPhrm^LYKPRAR1(%I,\"251^995\",\"\",\"\",\"\") k:%C ^LNMINFO(%I,\"ID\"),^LNMINFO(%I,\"DAT\")\r',NULL),(2230,'RESEND EMPI MESSAGES FROM 7-20 AND 7-21','EMPI, CHART SYNC, INTERCONNECT',NULL,'GREENBLATT, AARON            ','Other','Other',' ',0,'Open','2009-07-21 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0721-National-SCAL-NCAL-Spr07IU1SLG415856.doc#',NULL,'415856',NULL,' ','F117112','KP NATIONAL ',';this code is to be shared with SI\r\r;this code identifies messages to be resent\r\r\r;this code resends the messages\r;reads in str \"queue^msg\", where queue is the ^EQQ queue and msg is the message node\rk msg,dl,str,queue s dl=\"^\" f  r !,str q:str=\"\"  s queue=$p(str,dl),msg=$p(str,dl,2) i queue]\"\",msg]\"\" d Resend^CSIXMSG(queue,msg)\r',NULL),(2277,'0831-NATL-SPR07SLG430813','INTERCONNECT',NULL,'SHIMMIN, ROBERT            ',' ','Fax #:',' ',0,'Open','2009-08-29 00:00:00','#\\\\Cscrdvutf502\\EPIC RA Tool\\RA Tracking NCAL\\RA Docs\\0831-NATL-Spr07SLG430813.doc#',NULL,'430813',NULL,' ','F117112','KAISER PERMANENTE - NATIONAL ','; The code associated with this RA is for use by SI/API only\r; SLG 430813\r; HD0000004406394\r; Search ICOASYNC for failed messages and retry them\r\rs qu=\"ICOASYNC\"\rk pr,msg,inst,uuid,type\rw !,\"Queue|Priority|Message#|UUID|Type|Timestamp\"\rf  s pr=$o(^EQQ(qu,\"Q\",pr)) q:pr=\"\"  f  s msg=$o(^EQQ(qu,\"Q\",pr,msg)) q:msg=\"\"  i ^EQQ(qu,\"Q\",pr,msg,\"DATA\",\"RESULT\")=\"NOK\" s inst=$p(^EQQ(qu,\"Q\",pr,msg,\"LOG\"),\"^\",2),uuid=^EQQ(qu,\"Q\",pr,msg,\"DATA\",\"MESSAGE-ID\"),type=$p(^EQQ(qu,\"Q\",pr,msg,\"DATA\",\"MESSAGE\"),\",\",1) w !,qu,\"|\",pr,\"|\",msg,\"|\",uuid,\"|\",type,\"|\",$$dm^CSSPTLCK(inst) d Resend^CSIXMSG(qu,msg)\r',NULL),(1904928,'Test adhoc 0817-AP-PR2498232-E743625-Spr06Jul16NS.tar.Z for Utility to populate missing guarantor addresses','Ambulatory','Verifying',NULL,NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(1996896,'KPHC NCAL AMB InBasket Performance Improvement-In Basket refresh rate setting',NULL,'Verifying',NULL,NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(1996924,'KPHC NCAL AMB InBasket Performance Improvement-In basket load default setting change',NULL,'Verifying',NULL,NULL,NULL,NULL,0,'Pending',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(2030179,'Turn on the conversion daemon to kick off the HSB batch conversion in RENC',NULL,'Verifying',NULL,NULL,NULL,NULL,0,'Pending',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(2030235,'KPHC NCAL kick off ER3/6 conversion in RENC',NULL,NULL,NULL,NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(2052720,'KPHC NCAL - Update CPF Files and STRM purge interval for NCAL PROD',NULL,NULL,NULL,NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(2060547,'Remove ECM purge job, 54010, from CE nightly batch.  Create a new job for the ECM purge job',NULL,NULL,'Margaret H Lin',NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(2247266,'Load HSB conversion in PSUP all instances, turn on HSB conversion in PSUPEBM',NULL,NULL,'Margaret H Lin',NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,NULL,NULL,NULL,'X514008',NULL,NULL,NULL),(2247804,'HLV chart sync fix testing in PSUPEBM',NULL,NULL,'Margaret H Lin',NULL,NULL,NULL,0,'Closed',NULL,NULL,NULL,'0',NULL,NULL,NULL,NULL,NULL,NULL),(2513647,'KPHC NCAL PROD - Reverse Preallocating Patient Level Order Records',NULL,NULL,NULL,NULL,NULL,NULL,0,'Open',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL);
/*!40000 ALTER TABLE `tblratracking` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2023-07-10  9:58:23
